require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({49:[function(require,module,exports) {
"use strict";var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;function n(r){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function o(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de","5"===Object.getOwnPropertyNames(r)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(r){return t[r]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(r){n[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}module.exports=o()?Object.assign:function(o,c){for(var a,i,s=n(o),f=1;f<arguments.length;f++){for(var u in a=Object(arguments[f]))t.call(a,u)&&(s[u]=a[u]);if(r){i=r(a);for(var b=0;b<i.length;b++)e.call(a,i[b])&&(s[i[b]]=a[i[b]])}}return s};
},{}],51:[function(require,module,exports) {
"use strict";var e={};module.exports=e;
},{}],54:[function(require,module,exports) {
"use strict";function t(t){return function(){return t}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},module.exports=n;
},{}],37:[function(require,module,exports) {
"use strict";var e=require("object-assign"),t=require("fbjs/lib/emptyObject"),r=require("fbjs/lib/emptyFunction"),n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,u=n?Symbol.for("react.call"):60104,l=n?Symbol.for("react.return"):60105,i=n?Symbol.for("react.portal"):60106,c=n?Symbol.for("react.fragment"):60107,f="function"==typeof Symbol&&Symbol.iterator;function a(e){for(var t=arguments.length-1,r="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);throw(t=Error(r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function s(e,r,n){this.props=e,this.context=r,this.refs=t,this.updater=n||p}function y(e,r,n){this.props=e,this.context=r,this.refs=t,this.updater=n||p}function d(){}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&a("85"),this.updater.enqueueSetState(this,e,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},d.prototype=s.prototype;var h=y.prototype=new d;function v(e,r,n){this.props=e,this.context=r,this.refs=t,this.updater=n||p}h.constructor=y,e(h,s.prototype),h.isPureReactComponent=!0;var m=v.prototype=new d;m.constructor=v,e(m,s.prototype),m.unstable_isAsyncReactComponent=!0,m.render=function(){return this.props.children};var b={current:null},k=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function g(e,t,r){var n,u={},l=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)k.call(t,n)&&!_.hasOwnProperty(n)&&(u[n]=t[n]);var c=arguments.length-2;if(1===c)u.children=r;else if(1<c){for(var f=Array(c),a=0;a<c;a++)f[a]=arguments[a+2];u.children=f}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===u[n]&&(u[n]=c[n]);return{$$typeof:o,type:e,key:l,ref:i,props:u,_owner:b.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}function j(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}var w=/\/+/g,x=[];function P(e,t,r,n){if(x.length){var o=x.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>x.length&&x.push(e)}function O(e,t,r,n){var c=typeof e;"undefined"!==c&&"boolean"!==c||(e=null);var p=!1;if(null===e)p=!0;else switch(c){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case o:case u:case l:case i:p=!0}}if(p)return r(n,e,""===t?"."+$(e,0):t),1;if(p=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var y=t+$(c=e[s],s);p+=O(c,y,r,n)}else if(null===e||void 0===e?y=null:y="function"==typeof(y=f&&e[f]||e["@@iterator"])?y:null,"function"==typeof y)for(e=y.call(e),s=0;!(c=e.next()).done;)p+=O(c=c.value,y=t+$(c,s++),r,n);else"object"===c&&a("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return p}function $(e,t){return"object"==typeof e&&null!==e&&null!=e.key?j(e.key):t.toString(36)}function A(e,t){e.func.call(e.context,t,e.count++)}function E(e,t,n){var u=e.result,l=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?C(e,u,n,r.thatReturnsArgument):null!=e&&(S(e)&&(t=l+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(w,"$&/")+"/")+n,e={$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),u.push(e))}function C(e,t,r,n,o){var u="";null!=r&&(u=(""+r).replace(w,"$&/")+"/"),t=P(t,u,n,o),null==e||O(e,"",E,t),R(t)}var q={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return C(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;t=P(null,null,t,r),null==e||O(e,"",A,t),R(t)},count:function(e){return null==e?0:O(e,"",r.thatReturnsNull,null)},toArray:function(e){var t=[];return C(e,t,null,r.thatReturnsArgument),t},only:function(e){return S(e)||a("143"),e}},Component:s,PureComponent:y,unstable_AsyncComponent:v,Fragment:c,createElement:g,cloneElement:function(t,r,n){var u=e({},t.props),l=t.key,i=t.ref,c=t._owner;if(null!=r){if(void 0!==r.ref&&(i=r.ref,c=b.current),void 0!==r.key&&(l=""+r.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(a in r)k.call(r,a)&&!_.hasOwnProperty(a)&&(u[a]=void 0===r[a]&&void 0!==f?f[a]:r[a])}var a=arguments.length-2;if(1===a)u.children=n;else if(1<a){f=Array(a);for(var p=0;p<a;p++)f[p]=arguments[p+2];u.children=f}return{$$typeof:o,type:t.type,key:l,ref:i,props:u,_owner:c}},createFactory:function(e){var t=g.bind(null,e);return t.type=e,t},isValidElement:S,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:b,assign:e}},U=Object.freeze({default:q}),F=U&&q||U;module.exports=F.default?F.default:F;
},{"object-assign":49,"fbjs/lib/emptyObject":51,"fbjs/lib/emptyFunction":54}],52:[function(require,module,exports) {
"use strict";var e=function(e){};function n(n,r,i,o,t,a,f,s){if(e(r),!n){var u;if(void 0===r)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,o,t,a,f,s],l=0;(u=new Error(r.replace(/%s/g,function(){return d[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}module.exports=n;
},{}],53:[function(require,module,exports) {
"use strict";var e,r=require("./emptyFunction"),t=r;module.exports=t;
},{"./emptyFunction":54}],147:[function(require,module,exports) {
"use strict";var _="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=_;
},{}],50:[function(require,module,exports) {
"use strict";var t,e,o,r;function s(t,e,o,r,s){}module.exports=s;
},{"fbjs/lib/invariant":52,"fbjs/lib/warning":53,"./lib/ReactPropTypesSecret":147}],38:[function(require,module,exports) {
"use strict";
},{"object-assign":49,"fbjs/lib/emptyObject":51,"fbjs/lib/invariant":52,"fbjs/lib/warning":53,"fbjs/lib/emptyFunction":54,"prop-types/checkPropTypes":50}],32:[function(require,module,exports) {
"use strict";module.exports=require("./cjs/react.production.min.js");
},{"./cjs/react.production.min.js":37,"./cjs/react.development.js":38}],62:[function(require,module,exports) {
"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};module.exports=n;
},{}],63:[function(require,module,exports) {
"use strict";var e=require("./emptyFunction"),t={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(t,n,r){return t.addEventListener?(t.addEventListener(n,r,!0),{remove:function(){t.removeEventListener(n,r,!0)}}):{remove:e}},registerDefault:function(){}};module.exports=t;
},{"./emptyFunction":54}],64:[function(require,module,exports) {
"use strict";function e(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}module.exports=e;
},{}],65:[function(require,module,exports) {
"use strict";var t=Object.prototype.hasOwnProperty;function e(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function r(r,n){if(e(r,n))return!0;if("object"!=typeof r||null===r||"object"!=typeof n||null===n)return!1;var o=Object.keys(r),u=Object.keys(n);if(o.length!==u.length)return!1;for(var l=0;l<o.length;l++)if(!t.call(n,o[l])||!e(r[o[l]],n[o[l]]))return!1;return!0}module.exports=r;
},{}],121:[function(require,module,exports) {
"use strict";function e(e){var o=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof o.Node?e instanceof o.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=e;
},{}],83:[function(require,module,exports) {
"use strict";var e=require("./isNode");function r(r){return e(r)&&3==r.nodeType}module.exports=r;
},{"./isNode":121}],66:[function(require,module,exports) {
"use strict";var o=require("./isTextNode");function e(n,t){return!(!n||!t)&&(n===t||!o(n)&&(o(t)?e(n,t.parentNode):"contains"in n?n.contains(t):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(t))))}module.exports=e;
},{"./isTextNode":83}],67:[function(require,module,exports) {
"use strict";function t(t){try{t.focus()}catch(t){}}module.exports=t;
},{}],41:[function(require,module,exports) {
"use strict";var e=require("react"),t=require("fbjs/lib/ExecutionEnvironment"),n=require("object-assign"),r=require("fbjs/lib/emptyFunction"),a=require("fbjs/lib/EventListener"),o=require("fbjs/lib/getActiveElement"),l=require("fbjs/lib/shallowEqual"),i=require("fbjs/lib/containsNode"),u=require("fbjs/lib/focusNode"),c=require("fbjs/lib/emptyObject");function s(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}e||s("227");var d={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function p(e,t){return(e&t)===t}var f={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=f,n=e.Properties||{},r=e.DOMAttributeNamespaces||{},a=e.DOMAttributeNames||{};for(var o in e=e.DOMMutationMethods||{},n){h.hasOwnProperty(o)&&s("48",o);var l=o.toLowerCase(),i=n[o];1>=(l={attributeName:l,attributeNamespace:null,propertyName:o,mutationMethod:null,mustUseProperty:p(i,t.MUST_USE_PROPERTY),hasBooleanValue:p(i,t.HAS_BOOLEAN_VALUE),hasNumericValue:p(i,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:p(i,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:p(i,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:p(i,t.HAS_STRING_BOOLEAN_VALUE)}).hasBooleanValue+l.hasNumericValue+l.hasOverloadedBooleanValue||s("50",o),a.hasOwnProperty(o)&&(l.attributeName=a[o]),r.hasOwnProperty(o)&&(l.attributeNamespace=r[o]),e.hasOwnProperty(o)&&(l.mutationMethod=e[o]),h[o]=l}}},h={};function m(e,t){if(d.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return d.hasOwnProperty(e)?e=!0:(t=g(e))?e=t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:e="data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e,e;case"undefined":case"number":case"string":case"object":return!0;default:return!1}}function g(e){return h.hasOwnProperty(e)?h[e]:null}var v=f,y=v.MUST_USE_PROPERTY,b=v.HAS_BOOLEAN_VALUE,C=v.HAS_NUMERIC_VALUE,k=v.HAS_POSITIVE_NUMERIC_VALUE,x=v.HAS_OVERLOADED_BOOLEAN_VALUE,w=v.HAS_STRING_BOOLEAN_VALUE,E={Properties:{allowFullScreen:b,async:b,autoFocus:b,autoPlay:b,capture:x,checked:y|b,cols:k,contentEditable:w,controls:b,default:b,defer:b,disabled:b,download:x,draggable:w,formNoValidate:b,hidden:b,loop:b,multiple:y|b,muted:y|b,noValidate:b,open:b,playsInline:b,readOnly:b,required:b,reversed:b,rows:k,rowSpan:C,scoped:b,seamless:b,selected:y|b,size:k,start:C,span:k,spellCheck:w,style:0,tabIndex:0,itemScope:b,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:w},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},T=v.HAS_STRING_BOOLEAN_VALUE,S={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},N={Properties:{autoReverse:T,externalResourcesRequired:T,preserveAlpha:T},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:S.xlink,xlinkArcrole:S.xlink,xlinkHref:S.xlink,xlinkRole:S.xlink,xlinkShow:S.xlink,xlinkTitle:S.xlink,xlinkType:S.xlink,xmlBase:S.xml,xmlLang:S.xml,xmlSpace:S.xml}},P=/[\-\:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(P,_);N.Properties[t]=0,N.DOMAttributeNames[t]=e}),v.injectDOMPropertyConfig(E),v.injectDOMPropertyConfig(N);var I={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!=typeof e.invokeGuardedCallback&&s("197"),O=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,a,o,l,i,u){O.apply(I,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,a,o,l,i,u){if(I.invokeGuardedCallback.apply(this,arguments),I.hasCaughtError()){var c=I.clearCaughtError();I._hasRethrowError||(I._hasRethrowError=!0,I._rethrowError=c)}},rethrowCaughtError:function(){return M.apply(I,arguments)},hasCaughtError:function(){return I._hasCaughtError},clearCaughtError:function(){if(I._hasCaughtError){var e=I._caughtError;return I._caughtError=null,I._hasCaughtError=!1,e}s("198")}};function O(e,t,n,r,a,o,l,i,u){I._hasCaughtError=!1,I._caughtError=null;var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){I._caughtError=e,I._hasCaughtError=!0}}function M(){if(I._hasRethrowError){var e=I._rethrowError;throw I._rethrowError=null,I._hasRethrowError=!1,e}}var D=null,R={};function F(){if(D)for(var e in R){var t=R[e],n=D.indexOf(e);if(-1<n||s("96",e),!U[n])for(var r in t.extractEvents||s("97",e),U[n]=t,n=t.eventTypes){var a=void 0,o=n[r],l=t,i=r;L.hasOwnProperty(i)&&s("99",i),L[i]=o;var u=o.phasedRegistrationNames;if(u){for(a in u)u.hasOwnProperty(a)&&A(u[a],l,i);a=!0}else o.registrationName?(A(o.registrationName,l,i),a=!0):a=!1;a||s("98",r,e)}}}function A(e,t,n){H[e]&&s("100",e),H[e]=t,z[e]=t.eventTypes[n].dependencies}var U=[],L={},H={},z={};function V(e){D&&s("101"),D=Array.prototype.slice.call(e),F()}function B(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];R.hasOwnProperty(t)&&R[t]===r||(R[t]&&s("102",t),R[t]=r,n=!0)}n&&F()}var j=Object.freeze({plugins:U,eventNameDispatchConfigs:L,registrationNameModules:H,registrationNameDependencies:z,possibleRegistrationNames:null,injectEventPluginOrder:V,injectEventPluginsByName:B}),K=null,W=null,q=null;function Q(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=q(r),I.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function $(e,t){return null==t&&s("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function G(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var Y=null;function X(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)Q(e,t,n[a],r[a]);else n&&Q(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Z(e){return X(e,!0)}function J(e){return X(e,!1)}var ee={injectEventPluginOrder:V,injectEventPluginsByName:B};function te(e,t){var n=e.stateNode;if(!n)return null;var r=K(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&s("231",t,typeof n),n)}function ne(e,t,n,r){for(var a,o=0;o<U.length;o++){var l=U[o];l&&(l=l.extractEvents(e,t,n,r))&&(a=$(a,l))}return a}function re(e){e&&(Y=$(Y,e))}function ae(e){var t=Y;Y=null,t&&(G(t,e?Z:J),Y&&s("95"),I.rethrowCaughtError())}var oe=Object.freeze({injection:ee,getListener:te,extractEvents:ne,enqueueEvents:re,processEventQueue:ae}),le=Math.random().toString(36).slice(2),ie="__reactInternalInstance$"+le,ue="__reactEventHandlers$"+le;function ce(e){if(e[ie])return e[ie];for(var t=[];!e[ie];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=void 0,r=e[ie];if(5===r.tag||6===r.tag)return r;for(;e&&(r=e[ie]);e=t.pop())n=r;return n}function se(e){if(5===e.tag||6===e.tag)return e.stateNode;s("33")}function de(e){return e[ue]||null}var pe=Object.freeze({precacheFiberNode:function(e,t){t[ie]=e},getClosestInstanceFromNode:ce,getInstanceFromNode:function(e){return!(e=e[ie])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:se,getFiberCurrentPropsFromNode:de,updateFiberProps:function(e,t){e[ue]=t}});function fe(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function he(e,t,n){for(var r=[];e;)r.push(e),e=fe(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function me(e,t,n){(t=te(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=$(n._dispatchListeners,t),n._dispatchInstances=$(n._dispatchInstances,e))}function ge(e){e&&e.dispatchConfig.phasedRegistrationNames&&he(e._targetInst,me,e)}function ve(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;he(t=t?fe(t):null,me,e)}}function ye(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=te(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=$(n._dispatchListeners,t),n._dispatchInstances=$(n._dispatchInstances,e))}function be(e){e&&e.dispatchConfig.registrationName&&ye(e._targetInst,null,e)}function Ce(e){G(e,ge)}function ke(e,t,n,r){if(n&&r)e:{for(var a=n,o=r,l=0,i=a;i;i=fe(i))l++;i=0;for(var u=o;u;u=fe(u))i++;for(;0<l-i;)a=fe(a),l--;for(;0<i-l;)o=fe(o),i--;for(;l--;){if(a===o||a===o.alternate)break e;a=fe(a),o=fe(o)}a=null}else a=null;for(o=a,a=[];n&&n!==o&&(null===(l=n.alternate)||l!==o);)a.push(n),n=fe(n);for(n=[];r&&r!==o&&(null===(l=r.alternate)||l!==o);)n.push(r),r=fe(r);for(r=0;r<a.length;r++)ye(a[r],"bubbled",e);for(e=n.length;0<e--;)ye(n[e],"captured",t)}var xe=Object.freeze({accumulateTwoPhaseDispatches:Ce,accumulateTwoPhaseDispatchesSkipTarget:function(e){G(e,ve)},accumulateEnterLeaveDispatches:ke,accumulateDirectDispatches:function(e){G(e,be)}}),we=null;function Ee(){return!we&&t.canUseDOM&&(we="textContent"in document.documentElement?"textContent":"innerText"),we}var Te={_root:null,_startText:null,_fallbackText:null};function Se(){if(Te._fallbackText)return Te._fallbackText;var e,t,n=Te._startText,r=n.length,a=Ne(),o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===a[o-t];t++);return Te._fallbackText=a.slice(e,1<t?1-t:void 0),Te._fallbackText}function Ne(){return"value"in Te._root?Te._root.value:Te._root[Ee()]}var Pe="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),_e={type:null,target:null,currentTarget:r.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function Ie(e,t,n,a){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=a:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?r.thatReturnsTrue:r.thatReturnsFalse,this.isPropagationStopped=r.thatReturnsFalse,this}function Oe(e,t,n,r){if(this.eventPool.length){var a=this.eventPool.pop();return this.call(a,e,t,n,r),a}return new this(e,t,n,r)}function Me(e){e instanceof this||s("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function De(e){e.eventPool=[],e.getPooled=Oe,e.release=Me}function Re(e,t,n,r){return Ie.call(this,e,t,n,r)}function Fe(e,t,n,r){return Ie.call(this,e,t,n,r)}n(Ie.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=r.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=r.thatReturnsTrue)},persist:function(){this.isPersistent=r.thatReturnsTrue},isPersistent:r.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<Pe.length;t++)this[Pe[t]]=null}}),Ie.Interface=_e,Ie.augmentClass=function(e,t){function r(){}r.prototype=this.prototype;var a=new r;n(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=n({},this.Interface,t),e.augmentClass=this.augmentClass,De(e)},De(Ie),Ie.augmentClass(Re,{data:null}),Ie.augmentClass(Fe,{data:null});var Ae,Ue=[9,13,27,32],Le=t.canUseDOM&&"CompositionEvent"in window,He=null;if(t.canUseDOM&&"documentMode"in document&&(He=document.documentMode),Ae=t.canUseDOM&&"TextEvent"in window&&!He){var ze=window.opera;Ae=!("object"==typeof ze&&"function"==typeof ze.version&&12>=parseInt(ze.version(),10))}var Ve=Ae,Be=t.canUseDOM&&(!Le||He&&8<He&&11>=He),je=String.fromCharCode(32),Ke={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},We=!1;function qe(e,t){switch(e){case"topKeyUp":return-1!==Ue.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Qe(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $e=!1;function Ge(e,t){switch(e){case"topCompositionEnd":return Qe(t);case"topKeyPress":return 32!==t.which?null:(We=!0,je);case"topTextInput":return(e=t.data)===je&&We?null:e;default:return null}}function Ye(e,t){if($e)return"topCompositionEnd"===e||!Le&&qe(e,t)?(e=Se(),Te._root=null,Te._startText=null,Te._fallbackText=null,$e=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Be?null:t.data;default:return null}}var Xe={eventTypes:Ke,extractEvents:function(e,t,n,r){var a;if(Le)e:{switch(e){case"topCompositionStart":var o=Ke.compositionStart;break e;case"topCompositionEnd":o=Ke.compositionEnd;break e;case"topCompositionUpdate":o=Ke.compositionUpdate;break e}o=void 0}else $e?qe(e,n)&&(o=Ke.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(o=Ke.compositionStart);return o?(Be&&($e||o!==Ke.compositionStart?o===Ke.compositionEnd&&$e&&(a=Se()):(Te._root=r,Te._startText=Ne(),$e=!0)),o=Re.getPooled(o,t,n,r),a?o.data=a:null!==(a=Qe(n))&&(o.data=a),Ce(o),a=o):a=null,(e=Ve?Ge(e,n):Ye(e,n))?((t=Fe.getPooled(Ke.beforeInput,t,n,r)).data=e,Ce(t)):t=null,[a,t]}},Ze=null,Je=null,et=null;function tt(e){if(e=W(e)){Ze&&"function"==typeof Ze.restoreControlledState||s("194");var t=K(e.stateNode);Ze.restoreControlledState(e.stateNode,e.type,t)}}var nt={injectFiberControlledHostComponent:function(e){Ze=e}};function rt(e){Je?et?et.push(e):et=[e]:Je=e}function at(){if(Je){var e=Je,t=et;if(et=Je=null,tt(e),t)for(e=0;e<t.length;e++)tt(t[e])}}var ot=Object.freeze({injection:nt,enqueueStateRestore:rt,restoreStateIfNeeded:at});function lt(e,t){return e(t)}var it=!1;function ut(e,t){if(it)return lt(e,t);it=!0;try{return lt(e,t)}finally{it=!1,at()}}var ct,st={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!st[e.type]:"textarea"===t}function pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ft(e,n){if(!t.canUseDOM||n&&!("addEventListener"in document))return!1;var r=(n="on"+e)in document;return r||((r=document.createElement("div")).setAttribute(n,"return;"),r="function"==typeof r[n]),!r&&ct&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function gt(e){e._valueTracker||(e._valueTracker=mt(e))}function vt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}t.canUseDOM&&(ct=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var yt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function bt(e,t,n){return(e=Ie.getPooled(yt.change,e,t,n)).type="change",rt(n),Ce(e),e}var Ct=null,kt=null;function xt(e){re(e),ae(!1)}function wt(e){if(vt(se(e)))return e}function Et(e,t){if("topChange"===e)return t}var Tt=!1;function St(){Ct&&(Ct.detachEvent("onpropertychange",Nt),kt=Ct=null)}function Nt(e){"value"===e.propertyName&&wt(kt)&&ut(xt,e=bt(kt,e,pt(e)))}function Pt(e,t,n){"topFocus"===e?(St(),kt=n,(Ct=t).attachEvent("onpropertychange",Nt)):"topBlur"===e&&St()}function _t(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return wt(kt)}function It(e,t){if("topClick"===e)return wt(t)}function Ot(e,t){if("topInput"===e||"topChange"===e)return wt(t)}t.canUseDOM&&(Tt=ft("input")&&(!document.documentMode||9<document.documentMode));var Mt={eventTypes:yt,_isInputEventSupported:Tt,extractEvents:function(e,t,n,r){var a=t?se(t):window,o=a.nodeName&&a.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===a.type)var l=Et;else if(dt(a))if(Tt)l=Ot;else{l=_t;var i=Pt}else!(o=a.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type||(l=It);if(l&&(l=l(e,t)))return bt(l,n,r);i&&i(e,a,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||a._wrapperState)&&e.controlled&&"number"===a.type&&(e=""+a.value,a.getAttribute("value")!==e&&a.setAttribute("value",e))}};function Dt(e,t,n,r){return Ie.call(this,e,t,n,r)}Ie.augmentClass(Dt,{view:null,detail:null});var Rt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ft(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rt[e])&&!!t[e]}function At(){return Ft}function Ut(e,t,n,r){return Ie.call(this,e,t,n,r)}Dt.augmentClass(Ut,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:At,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var Lt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ht={eventTypes:Lt,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?ce(t):null):e=null,e===t)return null;var o=null==e?a:se(e);a=null==t?a:se(t);var l=Ut.getPooled(Lt.mouseLeave,e,n,r);return l.type="mouseleave",l.target=o,l.relatedTarget=a,(n=Ut.getPooled(Lt.mouseEnter,t,n,r)).type="mouseenter",n.target=a,n.relatedTarget=o,ke(l,n,e,t),[l,n]}},zt=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function Vt(e){return"string"==typeof(e=e.type)?e:"function"==typeof e?e.displayName||e.name:null}function Bt(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function jt(e){return!!(e=e._reactInternalFiber)&&2===Bt(e)}function Kt(e){2!==Bt(e)&&s("188")}function Wt(e){var t=e.alternate;if(!t)return 3===(t=Bt(e))&&s("188"),1===t?null:e;for(var n=e,r=t;;){var a=n.return,o=a?a.alternate:null;if(!a||!o)break;if(a.child===o.child){for(var l=a.child;l;){if(l===n)return Kt(a),e;if(l===r)return Kt(a),t;l=l.sibling}s("188")}if(n.return!==r.return)n=a,r=o;else{l=!1;for(var i=a.child;i;){if(i===n){l=!0,n=a,r=o;break}if(i===r){l=!0,r=a,n=o;break}i=i.sibling}if(!l){for(i=o.child;i;){if(i===n){l=!0,n=o,r=a;break}if(i===r){l=!0,r=o,n=a;break}i=i.sibling}l||s("189")}}n.alternate!==r&&s("190")}return 3!==n.tag&&s("188"),n.stateNode.current===n?e:t}function qt(e){if(!(e=Wt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Qt(e){if(!(e=Wt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var $t=[];function Gt(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=ce(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],Xt(e.topLevelType,t,e.nativeEvent,pt(e.nativeEvent))}var Yt=!0,Xt=void 0;function Zt(e){Yt=!!e}function Jt(e,t,n){return n?a.listen(n,t,tn.bind(null,e)):null}function en(e,t,n){return n?a.capture(n,t,tn.bind(null,e)):null}function tn(e,t){if(Yt){var n=pt(t);if(null===(n=ce(n))||"number"!=typeof n.tag||2===Bt(n)||(n=null),$t.length){var r=$t.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{ut(Gt,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>$t.length&&$t.push(e)}}}var nn=Object.freeze({get _enabled(){return Yt},get _handleTopLevel(){return Xt},setHandleTopLevel:function(e){Xt=e},setEnabled:Zt,isEnabled:function(){return Yt},trapBubbledEvent:Jt,trapCapturedEvent:en,dispatchEvent:tn});function rn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var an={animationend:rn("Animation","AnimationEnd"),animationiteration:rn("Animation","AnimationIteration"),animationstart:rn("Animation","AnimationStart"),transitionend:rn("Transition","TransitionEnd")},on={},ln={};function un(e){if(on[e])return on[e];if(!an[e])return e;var t,n=an[e];for(t in n)if(n.hasOwnProperty(t)&&t in ln)return on[e]=n[t];return""}t.canUseDOM&&(ln=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);var cn={topAbort:"abort",topAnimationEnd:un("animationend")||"animationend",topAnimationIteration:un("animationiteration")||"animationiteration",topAnimationStart:un("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:un("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},sn={},dn=0,pn="_reactListenersID"+(""+Math.random()).slice(2);function fn(e){return Object.prototype.hasOwnProperty.call(e,pn)||(e[pn]=dn++,sn[e[pn]]={}),sn[e[pn]]}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}var vn=t.canUseDOM&&"documentMode"in document&&11>=document.documentMode,yn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},bn=null,Cn=null,kn=null,xn=!1;function wn(e,t){if(xn||null==bn||bn!==o())return null;var n=bn;return"selectionStart"in n&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,kn&&l(kn,n)?null:(kn=n,(e=Ie.getPooled(yn.select,Cn,e,t)).type="select",e.target=bn,Ce(e),e)}var En={eventTypes:yn,extractEvents:function(e,t,n,r){var a,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(a=!o)){e:{o=fn(o),a=z.onSelect;for(var l=0;l<a.length;l++){var i=a[l];if(!o.hasOwnProperty(i)||!o[i]){o=!1;break e}}o=!0}a=!o}if(a)return null;switch(o=t?se(t):window,e){case"topFocus":(dt(o)||"true"===o.contentEditable)&&(bn=o,Cn=t,kn=null);break;case"topBlur":kn=Cn=bn=null;break;case"topMouseDown":xn=!0;break;case"topContextMenu":case"topMouseUp":return xn=!1,wn(n,r);case"topSelectionChange":if(vn)break;case"topKeyDown":case"topKeyUp":return wn(n,r)}return null}};function Tn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Sn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Nn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Pn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}Ie.augmentClass(Tn,{animationName:null,elapsedTime:null,pseudoElement:null}),Ie.augmentClass(Sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dt.augmentClass(Nn,{relatedTarget:null});var _n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function On(e,t,n,r){return Ie.call(this,e,t,n,r)}function Mn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Dn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Rn(e,t,n,r){return Ie.call(this,e,t,n,r)}function Fn(e,t,n,r){return Ie.call(this,e,t,n,r)}Dt.augmentClass(On,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Pn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:At,charCode:function(e){return"keypress"===e.type?Pn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Pn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ut.augmentClass(Mn,{dataTransfer:null}),Dt.augmentClass(Dn,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:At}),Ie.augmentClass(Rn,{propertyName:null,elapsedTime:null,pseudoElement:null}),Ut.augmentClass(Fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var An={},Un={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t="top"+t]},An[e]=n,Un[t]=n});var Ln={eventTypes:An,extractEvents:function(e,t,n,r){var a=Un[e];if(!a)return null;switch(e){case"topKeyPress":if(0===Pn(n))return null;case"topKeyDown":case"topKeyUp":e=On;break;case"topBlur":case"topFocus":e=Nn;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Ut;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=Mn;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=Dn;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Tn;break;case"topTransitionEnd":e=Rn;break;case"topScroll":e=Dt;break;case"topWheel":e=Fn;break;case"topCopy":case"topCut":case"topPaste":e=Sn;break;default:e=Ie}return Ce(t=e.getPooled(a,t,n,r)),t}};Xt=function(e,t,n,r){re(e=ne(e,t,n,r)),ae(!1)},ee.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),K=pe.getFiberCurrentPropsFromNode,W=pe.getInstanceFromNode,q=pe.getNodeFromInstance,ee.injectEventPluginsByName({SimpleEventPlugin:Ln,EnterLeaveEventPlugin:Ht,ChangeEventPlugin:Mt,SelectEventPlugin:En,BeforeInputEventPlugin:Xe});var Hn=[],zn=-1;function Vn(e){0>zn||(e.current=Hn[zn],Hn[zn]=null,zn--)}function Bn(e,t){Hn[++zn]=e.current,e.current=t}new Set;var jn={current:c},Kn={current:!1},Wn=c;function qn(e){return $n(e)?Wn:jn.current}function Qn(e,t){var n=e.type.contextTypes;if(!n)return c;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function $n(e){return 2===e.tag&&null!=e.type.childContextTypes}function Gn(e){$n(e)&&(Vn(Kn,e),Vn(jn,e))}function Yn(e,t,n){null!=jn.cursor&&s("168"),Bn(jn,t,e),Bn(Kn,n,e)}function Xn(e,t){var r=e.stateNode,a=e.type.childContextTypes;if("function"!=typeof r.getChildContext)return t;for(var o in r=r.getChildContext())o in a||s("108",Vt(e)||"Unknown",o);return n({},t,r)}function Zn(e){if(!$n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||c,Wn=jn.current,Bn(jn,t,e),Bn(Kn,Kn.current,e),!0}function Jn(e,t){var n=e.stateNode;if(n||s("169"),t){var r=Xn(e,Wn);n.__reactInternalMemoizedMergedChildContext=r,Vn(Kn,e),Vn(jn,e),Bn(jn,r,e)}else Vn(Kn,e);Bn(Kn,t,e)}function er(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function tr(e,t,n){var r=e.alternate;return null===r?((r=new er(e.tag,e.key,e.internalContextTag)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.pendingProps=t,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nr(e,t,n){var r=void 0,a=e.type,o=e.key;return"function"==typeof a?((r=a.prototype&&a.prototype.isReactComponent?new er(2,o,t):new er(0,o,t)).type=a,r.pendingProps=e.props):"string"==typeof a?((r=new er(5,o,t)).type=a,r.pendingProps=e.props):"object"==typeof a&&null!==a&&"number"==typeof a.tag?(r=a).pendingProps=e.props:s("130",null==a?a:typeof a,""),r.expirationTime=n,r}function rr(e,t,n,r){return(t=new er(10,r,t)).pendingProps=e,t.expirationTime=n,t}function ar(e,t,n){return(t=new er(6,null,t)).pendingProps=e,t.expirationTime=n,t}function or(e,t,n){return(t=new er(7,e.key,t)).type=e.handler,t.pendingProps=e,t.expirationTime=n,t}function lr(e,t,n){return(e=new er(9,null,t)).expirationTime=n,e}function ir(e,t,n){return(t=new er(4,e.key,t)).pendingProps=e.children||[],t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ur=null,cr=null;function sr(e){return function(t){try{return e(t)}catch(e){}}}function dr(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);ur=sr(function(e){return t.onCommitFiberRoot(n,e)}),cr=sr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function pr(e){"function"==typeof ur&&ur(e)}function fr(e){"function"==typeof cr&&cr(e)}function hr(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function mr(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function gr(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=hr(null)),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=hr(null)):e=null,null===(e=e!==r?e:null)?mr(r,t):null===r.last||null===e.last?(mr(r,t),mr(e,t)):(mr(r,t),e.last=t)}function vr(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}function yr(e,t,r,a,o,l){null!==e&&e.updateQueue===r&&(r=t.updateQueue={baseState:r.baseState,expirationTime:r.expirationTime,first:r.first,last:r.last,isInitialized:r.isInitialized,callbackList:null,hasForceUpdate:!1}),r.expirationTime=0,r.isInitialized?e=r.baseState:(e=r.baseState=t.memoizedState,r.isInitialized=!0);for(var i=!0,u=r.first,c=!1;null!==u;){var s=u.expirationTime;if(s>l){var d=r.expirationTime;(0===d||d>s)&&(r.expirationTime=s),c||(c=!0,r.baseState=e)}else c||(r.first=u.next,null===r.first&&(r.last=null)),u.isReplace?(e=vr(u,a,e,o),i=!0):(s=vr(u,a,e,o))&&(e=i?n({},e,s):n(e,s),i=!1),u.isForced&&(r.hasForceUpdate=!0),null!==u.callback&&(null===(s=r.callbackList)&&(s=r.callbackList=[]),s.push(u));u=u.next}return null!==r.callbackList?t.effectTag|=32:null!==r.first||r.hasForceUpdate||(t.updateQueue=null),c||(r.baseState=e),e}function br(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],a=r.callback;r.callback=null,"function"!=typeof a&&s("191",a),a.call(t)}}function Cr(e,t,n,r){function a(e,t){t.updater=o,e.stateNode=t,t._reactInternalFiber=e}var o={isMounted:jt,enqueueSetState:function(n,r,a){n=n._reactInternalFiber,a=void 0===a?null:a;var o=t(n);gr(n,{expirationTime:o,partialState:r,callback:a,isReplace:!1,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueReplaceState:function(n,r,a){n=n._reactInternalFiber,a=void 0===a?null:a;var o=t(n);gr(n,{expirationTime:o,partialState:r,callback:a,isReplace:!0,isForced:!1,nextCallback:null,next:null}),e(n,o)},enqueueForceUpdate:function(n,r){n=n._reactInternalFiber,r=void 0===r?null:r;var a=t(n);gr(n,{expirationTime:a,partialState:null,callback:r,isReplace:!1,isForced:!0,nextCallback:null,next:null}),e(n,a)}};return{adoptClassInstance:a,constructClassInstance:function(e,t){var n=e.type,r=qn(e),o=2===e.tag&&null!=e.type.contextTypes,l=o?Qn(e,r):c;return a(e,t=new n(t,l)),o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=l),t},mountClassInstance:function(e,t){var n=e.alternate,r=e.stateNode,a=r.state||null,l=e.pendingProps;l||s("158");var i=qn(e);r.props=l,r.state=e.memoizedState=a,r.refs=c,r.context=Qn(e,i),null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=1),"function"==typeof r.componentWillMount&&(a=r.state,r.componentWillMount(),a!==r.state&&o.enqueueReplaceState(r,r.state,null),null!==(a=e.updateQueue)&&(r.state=yr(n,e,a,r,l,t))),"function"==typeof r.componentDidMount&&(e.effectTag|=4)},updateClassInstance:function(e,t,a){var i=t.stateNode;i.props=t.memoizedProps,i.state=t.memoizedState;var u=t.memoizedProps,c=t.pendingProps;c||null==(c=u)&&s("159");var d=i.context,p=qn(t);if(p=Qn(t,p),"function"!=typeof i.componentWillReceiveProps||u===c&&d===p||(d=i.state,i.componentWillReceiveProps(c,p),i.state!==d&&o.enqueueReplaceState(i,i.state,null)),d=t.memoizedState,a=null!==t.updateQueue?yr(e,t,t.updateQueue,i,c,a):d,!(u!==c||d!==a||Kn.current||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!=typeof i.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),!1;var f=c;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)f=!0;else{var h=t.stateNode,m=t.type;f="function"==typeof h.shouldComponentUpdate?h.shouldComponentUpdate(f,a,p):!m.prototype||!m.prototype.isPureReactComponent||(!l(u,f)||!l(d,a))}return f?("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(c,a,p),"function"==typeof i.componentDidUpdate&&(t.effectTag|=4)):("function"!=typeof i.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),n(t,c),r(t,a)),i.props=c,i.state=a,i.context=p,f}}}var kr="function"==typeof Symbol&&Symbol.for,xr=kr?Symbol.for("react.element"):60103,wr=kr?Symbol.for("react.call"):60104,Er=kr?Symbol.for("react.return"):60105,Tr=kr?Symbol.for("react.portal"):60106,Sr=kr?Symbol.for("react.fragment"):60107,Nr="function"==typeof Symbol&&Symbol.iterator;function Pr(e){return null===e||void 0===e?null:"function"==typeof(e=Nr&&e[Nr]||e["@@iterator"])?e:null}var _r=Array.isArray;function Ir(e,t){var n=t.ref;if(null!==n&&"function"!=typeof n){if(t._owner){var r=void 0;(t=t._owner)&&(2!==t.tag&&s("110"),r=t.stateNode),r||s("147",n);var a=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===a?e.ref:((e=function(e){var t=r.refs===c?r.refs={}:r.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,e)}"string"!=typeof n&&s("148"),t._owner||s("149",n)}return n}function Or(e,t){"textarea"!==e.type&&s("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Mr(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return(e=tr(e,t,n)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function l(t){return e&&null===t.alternate&&(t.effectTag=2),t}function i(e,t,n,r){return null===t||6!==t.tag?((t=ar(n,e.internalContextTag,r)).return=e,t):((t=a(t,n,r)).return=e,t)}function u(e,t,n,r){return null!==t&&t.type===n.type?((r=a(t,n.props,r)).ref=Ir(t,n),r.return=e,r):((r=nr(n,e.internalContextTag,r)).ref=Ir(t,n),r.return=e,r)}function c(e,t,n,r){return null===t||7!==t.tag?((t=or(n,e.internalContextTag,r)).return=e,t):((t=a(t,n,r)).return=e,t)}function d(e,t,n,r){return null===t||9!==t.tag?((t=lr(n,e.internalContextTag,r)).type=n.value,t.return=e,t):((t=a(t,null,r)).type=n.value,t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ir(n,e.internalContextTag,r)).return=e,t):((t=a(t,n.children||[],r)).return=e,t)}function f(e,t,n,r,o){return null===t||10!==t.tag?((t=rr(n,e.internalContextTag,r,o)).return=e,t):((t=a(t,n,r)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ar(""+t,e.internalContextTag,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xr:return t.type===Sr?((t=rr(t.props.children,e.internalContextTag,n,t.key)).return=e,t):((n=nr(t,e.internalContextTag,n)).ref=Ir(null,t),n.return=e,n);case wr:return(t=or(t,e.internalContextTag,n)).return=e,t;case Er:return(n=lr(t,e.internalContextTag,n)).type=t.value,n.return=e,n;case Tr:return(t=ir(t,e.internalContextTag,n)).return=e,t}if(_r(t)||Pr(t))return(t=rr(t,e.internalContextTag,n,null)).return=e,t;Or(e,t)}return null}function m(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:i(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case xr:return n.key===a?n.type===Sr?f(e,t,n.props.children,r,a):u(e,t,n,r):null;case wr:return n.key===a?c(e,t,n,r):null;case Er:return null===a?d(e,t,n,r):null;case Tr:return n.key===a?p(e,t,n,r):null}if(_r(n)||Pr(n))return null!==a?null:f(e,t,n,r,null);Or(e,n)}return null}function g(e,t,n,r,a){if("string"==typeof r||"number"==typeof r)return i(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case xr:return e=e.get(null===r.key?n:r.key)||null,r.type===Sr?f(t,e,r.props.children,a,r.key):u(t,e,r,a);case wr:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case Er:return d(t,e=e.get(n)||null,r,a);case Tr:return p(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(_r(r)||Pr(r))return f(t,e=e.get(n)||null,r,a,null);Or(t,r)}return null}function v(a,l,i,u){for(var c=null,s=null,d=l,p=l=0,f=null;null!==d&&p<i.length;p++){d.index>p?(f=d,d=null):f=d.sibling;var v=m(a,d,i[p],u);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&t(a,d),l=o(v,l,p),null===s?c=v:s.sibling=v,s=v,d=f}if(p===i.length)return n(a,d),c;if(null===d){for(;p<i.length;p++)(d=h(a,i[p],u))&&(l=o(d,l,p),null===s?c=d:s.sibling=d,s=d);return c}for(d=r(a,d);p<i.length;p++)(f=g(d,a,p,i[p],u))&&(e&&null!==f.alternate&&d.delete(null===f.key?p:f.key),l=o(f,l,p),null===s?c=f:s.sibling=f,s=f);return e&&d.forEach(function(e){return t(a,e)}),c}function y(a,l,i,u){var c=Pr(i);"function"!=typeof c&&s("150"),null==(i=c.call(i))&&s("151");for(var d=c=null,p=l,f=l=0,v=null,y=i.next();null!==p&&!y.done;f++,y=i.next()){p.index>f?(v=p,p=null):v=p.sibling;var b=m(a,p,y.value,u);if(null===b){p||(p=v);break}e&&p&&null===b.alternate&&t(a,p),l=o(b,l,f),null===d?c=b:d.sibling=b,d=b,p=v}if(y.done)return n(a,p),c;if(null===p){for(;!y.done;f++,y=i.next())null!==(y=h(a,y.value,u))&&(l=o(y,l,f),null===d?c=y:d.sibling=y,d=y);return c}for(p=r(a,p);!y.done;f++,y=i.next())null!==(y=g(p,a,f,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?f:y.key),l=o(y,l,f),null===d?c=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(a,e)}),c}return function(e,r,o,i){"object"==typeof o&&null!==o&&o.type===Sr&&null===o.key&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case xr:e:{var c=o.key;for(u=r;null!==u;){if(u.key===c){if(10===u.tag?o.type===Sr:u.type===o.type){n(e,u.sibling),(r=a(u,o.type===Sr?o.props.children:o.props,i)).ref=Ir(u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===Sr?((r=rr(o.props.children,e.internalContextTag,i,o.key)).return=e,e=r):((i=nr(o,e.internalContextTag,i)).ref=Ir(r,o),i.return=e,e=i)}return l(e);case wr:e:{for(u=o.key;null!==r;){if(r.key===u){if(7===r.tag){n(e,r.sibling),(r=a(r,o,i)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=or(o,e.internalContextTag,i)).return=e,e=r}return l(e);case Er:e:{if(null!==r){if(9===r.tag){n(e,r.sibling),(r=a(r,null,i)).type=o.value,r.return=e,e=r;break e}n(e,r)}(r=lr(o,e.internalContextTag,i)).type=o.value,r.return=e,e=r}return l(e);case Tr:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=a(r,o.children||[],i)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ir(o,e.internalContextTag,i)).return=e,e=r}return l(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),r=a(r,o,i)):(n(e,r),r=ar(o,e.internalContextTag,i)),r.return=e,l(e=r);if(_r(o))return v(e,r,o,i);if(Pr(o))return y(e,r,o,i);if(u&&Or(e,o),void 0===o)switch(e.tag){case 2:case 1:s("152",(i=e.type).displayName||i.name||"Component")}return n(e,r)}}var Dr=Mr(!0),Rr=Mr(!1);function Fr(e,t,n,r,a){function o(e,t,n){var r=t.expirationTime;t.child=null===e?Rr(t,null,n,r):Dr(t,e.child,n,r)}function l(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=128)}function i(e,t,n,r){if(l(e,t),!n)return r&&Jn(t,!1),c(e,t);n=t.stateNode,zt.current=t;var a=n.render();return t.effectTag|=1,o(e,t,a),t.memoizedState=n.state,t.memoizedProps=n.props,r&&Jn(t,!0),t.child}function u(e){var t=e.stateNode;t.pendingContext?Yn(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yn(e,t.context,!1),g(e,t.containerInfo)}function c(e,t){if(null!==e&&t.child!==e.child&&s("153"),null!==t.child){var n=tr(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=tr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function d(e,t){switch(t.tag){case 3:u(t);break;case 2:Zn(t);break;case 4:g(t,t.stateNode.containerInfo)}return null}var p=e.shouldSetTextContent,f=e.useSyncScheduling,h=e.shouldDeprioritizeSubtree,m=t.pushHostContext,g=t.pushHostContainer,v=n.enterHydrationState,y=n.resetHydrationState,b=n.tryToClaimNextHydratableInstance,C=(e=Cr(r,a,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,k=e.constructClassInstance,x=e.mountClassInstance,w=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n)return d(0,t);switch(t.tag){case 0:null!==e&&s("155");var r=t.type,a=t.pendingProps,E=qn(t);return r=r(a,E=Qn(t,E)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render?(t.tag=2,a=Zn(t),C(t,r),x(t,n),t=i(e,t,!0,a)):(t.tag=1,o(e,t,r),t.memoizedProps=a,t=t.child),t;case 1:e:{if(a=t.type,n=t.pendingProps,r=t.memoizedProps,Kn.current)null===n&&(n=r);else if(null===n||r===n){t=c(e,t);break e}a=a(n,r=Qn(t,r=qn(t))),t.effectTag|=1,o(e,t,a),t.memoizedProps=n,t=t.child}return t;case 2:return a=Zn(t),r=void 0,null===e?t.stateNode?s("153"):(k(t,t.pendingProps),x(t,n),r=!0):r=w(e,t,n),i(e,t,r,a);case 3:return u(t),null!==(a=t.updateQueue)?(r=t.memoizedState)===(a=yr(e,t,a,null,null,n))?(y(),t=c(e,t)):(r=a.element,E=t.stateNode,(null===e||null===e.child)&&E.hydrate&&v(t)?(t.effectTag|=2,t.child=Rr(t,null,r,n)):(y(),o(e,t,r)),t.memoizedState=a,t=t.child):(y(),t=c(e,t)),t;case 5:m(t),null===e&&b(t),a=t.type;var T=t.memoizedProps;return null===(r=t.pendingProps)&&(null===(r=T)&&s("154")),E=null!==e?e.memoizedProps:null,Kn.current||null!==r&&T!==r?(T=r.children,p(a,r)?T=null:E&&p(a,E)&&(t.effectTag|=16),l(e,t),2147483647!==n&&!f&&h(a,r)?(t.expirationTime=2147483647,t=null):(o(e,t,T),t.memoizedProps=r,t=t.child)):t=c(e,t),t;case 6:return null===e&&b(t),null===(e=t.pendingProps)&&(e=t.memoizedProps),t.memoizedProps=e,null;case 8:t.tag=7;case 7:return a=t.pendingProps,Kn.current?null===a&&(null===(a=e&&e.memoizedProps)&&s("154")):null!==a&&t.memoizedProps!==a||(a=t.memoizedProps),r=a.children,t.stateNode=null===e?Rr(t,t.stateNode,r,n):Dr(t,t.stateNode,r,n),t.memoizedProps=a,t.stateNode;case 9:return null;case 4:e:{if(g(t,t.stateNode.containerInfo),a=t.pendingProps,Kn.current)null===a&&(null==(a=e&&e.memoizedProps)&&s("154"));else if(null===a||t.memoizedProps===a){t=c(e,t);break e}null===e?t.child=Dr(t,null,a,n):o(e,t,a),t.memoizedProps=a,t=t.child}return t;case 10:e:{if(n=t.pendingProps,Kn.current)null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=c(e,t);break e}o(e,t,n),t.memoizedProps=n,t=t.child}return t;default:s("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case 2:Zn(t);break;case 3:u(t);break;default:s("157")}return t.effectTag|=64,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),0===t.expirationTime||t.expirationTime>n?d(0,t):(t.firstEffect=null,t.lastEffect=null,t.child=null===e?Rr(t,null,null,n):Dr(t,e.child,null,n),2===t.tag&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function Ar(e,t,n){function r(e){e.effectTag|=4}var a=e.createInstance,o=e.createTextInstance,l=e.appendInitialChild,i=e.finalizeInitialChildren,u=e.prepareUpdate,c=e.persistence,d=t.getRootHostContainer,p=t.popHostContext,f=t.getHostContext,h=t.popHostContainer,m=n.prepareToHydrateHostInstance,g=n.prepareToHydrateHostTextInstance,v=n.popHydrationState,y=void 0,b=void 0,C=void 0;return e.mutation?(y=function(){},b=function(e,t,n){(t.updateQueue=n)&&r(t)},C=function(e,t,n,a){n!==a&&r(t)}):s(c?"235":"236"),{completeWork:function(e,t,n){var c=t.pendingProps;switch(null===c?c=t.memoizedProps:2147483647===t.expirationTime&&2147483647!==n||(t.pendingProps=null),t.tag){case 1:return null;case 2:return Gn(t),null;case 3:return h(t),Vn(Kn,t),Vn(jn,t),(c=t.stateNode).pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==e&&null!==e.child||(v(t),t.effectTag&=-3),y(t),null;case 5:p(t),n=d();var k=t.type;if(null!==e&&null!=t.stateNode){var x=e.memoizedProps,w=t.stateNode,E=f();w=u(w,k,x,c,n,E),b(e,t,w,k,x,c,n),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!c)return null===t.stateNode&&s("166"),null;if(e=f(),v(t))m(t,n,e)&&r(t);else{e=a(k,c,n,e,t);e:for(x=t.child;null!==x;){if(5===x.tag||6===x.tag)l(e,x.stateNode);else if(4!==x.tag&&null!==x.child){x.child.return=x,x=x.child;continue}if(x===t)break;for(;null===x.sibling;){if(null===x.return||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}i(e,k,c,n)&&r(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)C(e,t,e.memoizedProps,c);else{if("string"!=typeof c)return null===t.stateNode&&s("166"),null;e=d(),n=f(),v(t)?g(t)&&r(t):t.stateNode=o(c,e,n,t)}return null;case 7:(c=t.memoizedProps)||s("165"),t.tag=8,k=[];e:for((x=t.stateNode)&&(x.return=t);null!==x;){if(5===x.tag||6===x.tag||4===x.tag)s("247");else if(9===x.tag)k.push(x.type);else if(null!==x.child){x.child.return=x,x=x.child;continue}for(;null===x.sibling;){if(null===x.return||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}return c=(x=c.handler)(c.props,k),t.child=Dr(t,null!==e?e.child:null,c,n),t.child;case 8:return t.tag=7,null;case 9:case 10:return null;case 4:return h(t),y(t),null;case 0:s("167");default:s("156")}}}}function Ur(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function r(e){switch("function"==typeof fr&&fr(e),e.tag){case 2:n(e);var r=e.stateNode;if("function"==typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case 5:n(e);break;case 7:a(e.stateNode);break;case 4:u&&l(e)}}function a(e){for(var t=e;;)if(r(t),null===t.child||u&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function o(e){return 5===e.tag||3===e.tag||4===e.tag}function l(e){for(var t=e,n=!1,o=void 0,l=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&s("160"),n.tag){case 5:o=n.stateNode,l=!1;break e;case 3:case 4:o=n.stateNode.containerInfo,l=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)a(t),l?b(o,t.stateNode):y(o,t.stateNode);else if(4===t.tag?o=t.stateNode.containerInfo:r(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var i=e.getPublicInstance,u=e.mutation;e=e.persistence,u||s(e?"235":"236");var c=u.commitMount,d=u.commitUpdate,p=u.resetTextContent,f=u.commitTextUpdate,h=u.appendChild,m=u.appendChildToContainer,g=u.insertBefore,v=u.insertInContainerBefore,y=u.removeChild,b=u.removeChildFromContainer;return{commitResetTextContent:function(e){p(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(o(t)){var n=t;break e}t=t.return}s("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:s("161")}16&n.effectTag&&(p(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||o(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var a=e;;){if(5===a.tag||6===a.tag)n?r?v(t,a.stateNode,n):g(t,a.stateNode,n):r?m(t,a.stateNode):h(t,a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},commitDeletion:function(e){l(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var a=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&d(n,o,a,e,r,t)}break;case 6:null===t.stateNode&&s("162"),n=t.memoizedProps,f(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:s("163")}},commitLifeCycles:function(e,t){switch(t.tag){case 2:var n=t.stateNode;if(4&t.effectTag)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var r=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(r,e)}null!==(t=t.updateQueue)&&br(t,n);break;case 3:null!==(n=t.updateQueue)&&br(n,null!==t.child?t.child.stateNode:null);break;case 5:n=t.stateNode,null===e&&4&t.effectTag&&c(n,t.type,t.memoizedProps,t);break;case 6:case 4:break;default:s("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:t(i(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}var Lr={};function Hr(e){function t(e){return e===Lr&&s("174"),e}var n=e.getChildHostContext,r=e.getRootHostContext,a={current:Lr},o={current:Lr},l={current:Lr};return{getHostContext:function(){return t(a.current)},getRootHostContainer:function(){return t(l.current)},popHostContainer:function(e){Vn(a,e),Vn(o,e),Vn(l,e)},popHostContext:function(e){o.current===e&&(Vn(a,e),Vn(o,e))},pushHostContainer:function(e,t){Bn(l,t,e),t=r(t),Bn(o,e,e),Bn(a,t,e)},pushHostContext:function(e){var r=t(l.current),i=t(a.current);i!==(r=n(i,e.type,r))&&(Bn(o,e,e),Bn(a,r,e))},resetHostContainer:function(){a.current=Lr,l.current=Lr}}}function zr(e){function t(e,t){var n=new er(5,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=o(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=l(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function r(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;p=e}var a=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){s("175")},prepareToHydrateHostTextInstance:function(){s("176")},popHydrationState:function(){return!1}};var o=e.canHydrateInstance,l=e.canHydrateTextInstance,i=e.getNextHydratableSibling,u=e.getFirstHydratableChild,c=e.hydrateInstance,d=e.hydrateTextInstance,p=null,f=null,h=!1;return{enterHydrationState:function(e){return f=u(e.stateNode.containerInfo),p=e,h=!0},resetHydrationState:function(){f=p=null,h=!1},tryToClaimNextHydratableInstance:function(e){if(h){var r=f;if(r){if(!n(e,r)){if(!(r=i(r))||!n(e,r))return e.effectTag|=2,h=!1,void(p=e);t(p,f)}p=e,f=u(r)}else e.effectTag|=2,h=!1,p=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return d(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==p)return!1;if(!h)return r(e),h=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!a(n,e.memoizedProps))for(n=f;n;)t(e,n),n=i(n);return r(e),f=p?i(e.stateNode):null,!0}}}function Vr(e){function t(e){le=Y=!0;var t=e.stateNode;if(t.current===e&&s("177"),t.isReadyForCommit=!1,zt.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var n=e.firstEffect}else n=e;else n=e.firstEffect;for(W(),ee=n;null!==ee;){var r=!1,a=void 0;try{for(;null!==ee;){var o=ee.effectTag;if(16&o&&R(ee),128&o){var l=ee.alternate;null!==l&&z(l)}switch(-242&o){case 2:F(ee),ee.effectTag&=-3;break;case 6:F(ee),ee.effectTag&=-3,U(ee.alternate,ee);break;case 4:U(ee.alternate,ee);break;case 8:ie=!0,A(ee),ie=!1}ee=ee.nextEffect}}catch(e){r=!0,a=e}r&&(null===ee&&s("178"),i(ee,a),null!==ee&&(ee=ee.nextEffect))}for(q(),t.current=e,ee=n;null!==ee;){n=!1,r=void 0;try{for(;null!==ee;){var u=ee.effectTag;if(36&u&&L(ee.alternate,ee),128&u&&H(ee),64&u)switch(a=ee,o=void 0,null!==te&&(o=te.get(a),te.delete(a),null==o&&null!==a.alternate&&(a=a.alternate,o=te.get(a),te.delete(a))),null==o&&s("184"),a.tag){case 2:a.stateNode.componentDidCatch(o.error,{componentStack:o.componentStack});break;case 3:null===ae&&(ae=o.error);break;default:s("157")}var c=ee.nextEffect;ee.nextEffect=null,ee=c}}catch(e){n=!0,r=e}n&&(null===ee&&s("178"),i(ee,r),null!==ee&&(ee=ee.nextEffect))}return Y=le=!1,"function"==typeof pr&&pr(e.stateNode),re&&(re.forEach(g),re=null),null!==ae&&(e=ae,ae=null,E(e)),0===(t=t.current.expirationTime)&&(ne=te=null),t}function n(e){for(;;){var t=D(e.alternate,e,J),n=e.return,r=e.sibling,a=e;if(2147483647===J||2147483647!==a.expirationTime){if(2!==a.tag&&3!==a.tag)var o=0;else o=null===(o=a.updateQueue)?0:o.expirationTime;for(var l=a.child;null!==l;)0!==l.expirationTime&&(0===o||o>l.expirationTime)&&(o=l.expirationTime),l=l.sibling;a.expirationTime=o}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){e.stateNode.isReadyForCommit=!0;break}e=n}return null}function r(e){var t=O(e.alternate,e,J);return null===t&&(t=n(e)),zt.current=null,t}function a(e){var t=M(e.alternate,e,J);return null===t&&(t=n(e)),zt.current=null,t}function o(e){if(null!==te){if(!(0===J||J>e))if(J<=$)for(;null!==X;)X=u(X)?a(X):r(X);else for(;null!==X&&!w();)X=u(X)?a(X):r(X)}else if(!(0===J||J>e))if(J<=$)for(;null!==X;)X=r(X);else for(;null!==X&&!w();)X=r(X)}function l(e,t){if(Y&&s("243"),Y=!0,e.isReadyForCommit=!1,e!==Z||t!==J||null===X){for(;-1<zn;)Hn[zn]=null,zn--;Wn=c,jn.current=c,Kn.current=!1,_(),J=t,X=tr((Z=e).current,null,t)}var n=!1,r=null;try{o(t)}catch(e){n=!0,r=e}for(;n;){if(oe){ae=r;break}var l=X;if(null===l)oe=!0;else{var u=i(l,r);if(null===u&&s("183"),!oe){try{for(r=t,u=n=u;null!==l;){switch(l.tag){case 2:Gn(l);break;case 5:P(l);break;case 3:N(l);break;case 4:N(l)}if(l===u||l.alternate===u)break;l=l.return}X=a(n),o(r)}catch(e){n=!0,r=e;continue}break}}}return t=ae,oe=Y=!1,ae=null,null!==t&&E(t),e.isReadyForCommit?e.current.alternate:null}function i(e,t){var n=zt.current=null,r=!1,a=!1,o=null;if(3===e.tag)n=e,d(e)&&(oe=!0);else for(var l=e.return;null!==l&&null===n;){if(2===l.tag?"function"==typeof l.stateNode.componentDidCatch&&(r=!0,o=Vt(l),n=l,a=!0):3===l.tag&&(n=l),d(l)){if(ie||null!==re&&(re.has(l)||null!==l.alternate&&re.has(l.alternate)))return null;n=null,a=!1}l=l.return}if(null!==n){null===ne&&(ne=new Set),ne.add(n);var i="";l=e;do{e:switch(l.tag){case 0:case 1:case 2:case 5:var u=l._debugOwner,c=l._debugSource,s=Vt(l),p=null;u&&(p=Vt(u)),u=c,s="\n    in "+(s||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":p?" (created by "+p+")":"");break e;default:s=""}i+=s,l=l.return}while(l);l=i,e=Vt(e),null===te&&(te=new Map),t={componentName:e,componentStack:l,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:o,willRetry:a},te.set(n,t);try{var f=t.error;f&&f.suppressReactErrorLogging}catch(e){e&&e.suppressReactErrorLogging}return le?(null===re&&(re=new Set),re.add(n)):g(n),n}return null===ae&&(ae=t),null}function u(e){return null!==te&&(te.has(e)||null!==e.alternate&&te.has(e.alternate))}function d(e){return null!==ne&&(ne.has(e)||null!==e.alternate&&ne.has(e.alternate))}function p(){return 20*(1+((v()+100)/20|0))}function f(e){return 0!==G?G:Y?le?1:J:!K||1&e.internalContextTag?p():1}function h(e,t){return m(e,t)}function m(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!Y&&n===Z&&t<J&&(X=Z=null,J=0);var r=n,a=t;if(xe>ke&&s("185"),null===r.nextScheduledRoot)r.remainingExpirationTime=a,null===ce?(ue=ce=r,r.nextScheduledRoot=r):(ce=ce.nextScheduledRoot=r).nextScheduledRoot=ue;else{var o=r.remainingExpirationTime;(0===o||a<o)&&(r.remainingExpirationTime=a)}pe||(be?Ce&&x(fe=r,he=1):1===a?k(1,null):y(a)),!Y&&n===Z&&t<J&&(X=Z=null,J=0)}e=e.return}}function g(e){m(e,1)}function v(){return $=2+((V()-Q)/10|0)}function y(e){if(0!==se){if(e>se)return;j(de)}var t=V()-Q;se=e,de=B(C,{timeout:10*(e-2)-t})}function b(){var e=0,t=null;if(null!==ce)for(var n=ce,r=ue;null!==r;){var a=r.remainingExpirationTime;if(0===a){if((null===n||null===ce)&&s("244"),r===r.nextScheduledRoot){ue=ce=r.nextScheduledRoot=null;break}if(r===ue)ue=a=r.nextScheduledRoot,ce.nextScheduledRoot=a,r.nextScheduledRoot=null;else{if(r===ce){(ce=n).nextScheduledRoot=ue,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||a<e)&&(e=a,t=r),r===ce)break;n=r,r=r.nextScheduledRoot}}null!==(n=fe)&&n===t?xe++:xe=0,fe=t,he=e}function C(e){k(0,e)}function k(e,t){for(ye=t,b();null!==fe&&0!==he&&(0===e||he<=e)&&!me;)x(fe,he),b();if(null!==ye&&(se=0,de=-1),0!==he&&y(he),ye=null,me=!1,xe=0,ge)throw e=ve,ve=null,ge=!1,e}function x(e,n){if(pe&&s("245"),pe=!0,n<=v()){var r=e.finishedWork;null!==r?(e.finishedWork=null,e.remainingExpirationTime=t(r)):(e.finishedWork=null,null!==(r=l(e,n))&&(e.remainingExpirationTime=t(r)))}else null!==(r=e.finishedWork)?(e.finishedWork=null,e.remainingExpirationTime=t(r)):(e.finishedWork=null,null!==(r=l(e,n))&&(w()?e.finishedWork=r:e.remainingExpirationTime=t(r)));pe=!1}function w(){return!(null===ye||ye.timeRemaining()>we)&&(me=!0)}function E(e){null===fe&&s("246"),fe.remainingExpirationTime=0,ge||(ge=!0,ve=e)}var T=Hr(e),S=zr(e),N=T.popHostContainer,P=T.popHostContext,_=T.resetHostContainer,I=Fr(e,T,S,h,f),O=I.beginWork,M=I.beginFailedWork,D=Ar(e,T,S).completeWork,R=(T=Ur(e,i)).commitResetTextContent,F=T.commitPlacement,A=T.commitDeletion,U=T.commitWork,L=T.commitLifeCycles,H=T.commitAttachRef,z=T.commitDetachRef,V=e.now,B=e.scheduleDeferredCallback,j=e.cancelDeferredCallback,K=e.useSyncScheduling,W=e.prepareForCommit,q=e.resetAfterCommit,Q=V(),$=2,G=0,Y=!1,X=null,Z=null,J=0,ee=null,te=null,ne=null,re=null,ae=null,oe=!1,le=!1,ie=!1,ue=null,ce=null,se=0,de=-1,pe=!1,fe=null,he=0,me=!1,ge=!1,ve=null,ye=null,be=!1,Ce=!1,ke=1e3,xe=0,we=1;return{computeAsyncExpiration:p,computeExpirationForFiber:f,scheduleWork:h,batchedUpdates:function(e,t){var n=be;be=!0;try{return e(t)}finally{(be=n)||pe||k(1,null)}},unbatchedUpdates:function(e){if(be&&!Ce){Ce=!0;try{return e()}finally{Ce=!1}}return e()},flushSync:function(e){var t=be;be=!0;try{e:{var n=G;G=1;try{var r=e();break e}finally{G=n}r=void 0}return r}finally{be=t,pe&&s("187"),k(1,null)}},deferredUpdates:function(e){var t=G;G=p();try{return e()}finally{G=t}}}}function Br(e){function t(e){return null===(e=qt(e))?null:e.stateNode}var r=e.getPublicInstance,a=(e=Vr(e)).computeAsyncExpiration,o=e.computeExpirationForFiber,l=e.scheduleWork;return{createContainer:function(e,t){var n=new er(3,null,0);return e={current:n,containerInfo:e,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:t,nextScheduledRoot:null},n.stateNode=e},updateContainer:function(e,t,n,r){var i=t.current;if(n){var u;n=n._reactInternalFiber;e:{for(2===Bt(n)&&2===n.tag||s("170"),u=n;3!==u.tag;){if($n(u)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}(u=u.return)||s("171")}u=u.stateNode.context}n=$n(n)?Xn(n,u):u}else n=c;null===t.context?t.context=n:t.pendingContext=n,t=void 0===(t=r)?null:t,gr(i,{expirationTime:r=null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent?a():o(i),partialState:{element:e},callback:t,isReplace:!1,isForced:!1,nextCallback:null,next:null}),l(i,r)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return r(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:t,findHostInstanceWithNoPortals:function(e){return null===(e=Qt(e))?null:e.stateNode},injectIntoDevTools:function(e){var r=e.findFiberByHostInstance;return dr(n({},e,{findHostInstanceByFiber:function(e){return t(e)},findFiberByHostInstance:function(e){return r?r(e):null}}))}}}var jr=Object.freeze({default:Br}),Kr=jr&&Br||jr,Wr=Kr.default?Kr.default:Kr;function qr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Tr,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}var Qr="object"==typeof performance&&"function"==typeof performance.now,$r=void 0;$r=Qr?function(){return performance.now()}:function(){return Date.now()};var Gr=void 0,Yr=void 0;if(t.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Xr,Zr=null,Jr=!1,ea=-1,ta=!1,na=0,ra=33,aa=33;Xr=Qr?{didTimeout:!1,timeRemaining:function(){var e=na-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=na-Date.now();return 0<e?e:0}};var oa="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===oa){if(Jr=!1,e=$r(),0>=na-e){if(!(-1!==ea&&ea<=e))return void(ta||(ta=!0,requestAnimationFrame(la)));Xr.didTimeout=!0}else Xr.didTimeout=!1;ea=-1,e=Zr,Zr=null,null!==e&&e(Xr)}},!1);var la=function(e){ta=!1;var t=e-na+aa;t<aa&&ra<aa?(8>t&&(t=8),aa=t<ra?ra:t):ra=t,na=e+aa,Jr||(Jr=!0,window.postMessage(oa,"*"))};Gr=function(e,t){return Zr=e,null!=t&&"number"==typeof t.timeout&&(ea=$r()+t.timeout),ta||(ta=!0,requestAnimationFrame(la)),0},Yr=function(){Zr=null,Jr=!1,ea=-1}}else Gr=window.requestIdleCallback,Yr=window.cancelIdleCallback;else Gr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})})},Yr=function(e){clearTimeout(e)};var ia=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ua={},ca={};function sa(e){return!!ca.hasOwnProperty(e)||!ua.hasOwnProperty(e)&&(ia.test(e)?ca[e]=!0:(ua[e]=!0,!1))}function da(e,t,n){var r=g(t);if(r&&m(t,n)){var a=r.mutationMethod;a?a(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?fa(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(a=r.attributeNamespace)?e.setAttributeNS(a,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else pa(e,t,m(t,n)?n:null)}function pa(e,t,n){sa(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))}function fa(e,t){var n=g(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}function ha(e,t){var r=t.value,a=t.checked;return n({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=r?r:e._wrapperState.initialValue,checked:null!=a?a:e._wrapperState.initialChecked})}function ma(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ga(e,t){null!=(t=t.checked)&&da(e,"checked",t)}function va(e,t){ga(e,t);var n=t.value;null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(n!=(t=parseFloat(e.value)||0)||n==t&&e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))}function ya(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function ba(t){var n="";return e.Children.forEach(t,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(n+=e)}),n}function Ca(e,t){return e=n({children:void 0},t),(t=ba(t.children))&&(e.children=t),e}function ka(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function xa(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function wa(e,t){return null!=t.dangerouslySetInnerHTML&&s("91"),n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ea(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&s("92"),Array.isArray(t)&&(1>=t.length||s("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Ta(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Sa(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var Na={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Pa(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Pa(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ia=void 0,Oa=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Na.svg||"innerHTML"in e)e.innerHTML=t;else{for((Ia=Ia||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Ia.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ma(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Da={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ra=["Webkit","ms","Moz","O"];function Fa(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=n,o=t[n];a=null==o||"boolean"==typeof o||""===o?"":r||"number"!=typeof o||0===o||Da.hasOwnProperty(a)&&Da[a]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(Da).forEach(function(e){Ra.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Da[t]=Da[e]})});var Aa=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(e,t,n){t&&(Aa[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&s("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&s("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||s("61")),null!=t.style&&"object"!=typeof t.style&&s("62",n()))}function La(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ha=Na.html,za=r.thatReturns("");function Va(e,t){var n=fn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=z[t];for(var r=0;r<t.length;r++){var a=t[r];n.hasOwnProperty(a)&&n[a]||("topScroll"===a?en("topScroll","scroll",e):"topFocus"===a||"topBlur"===a?(en("topFocus","focus",e),en("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===a?(ft("cancel",!0)&&en("topCancel","cancel",e),n.topCancel=!0):"topClose"===a?(ft("close",!0)&&en("topClose","close",e),n.topClose=!0):cn.hasOwnProperty(a)&&Jt(a,cn[a],e),n[a]=!0)}}var Ba={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function ja(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Ha&&(r=Pa(e)),r===Ha?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function Ka(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Wa(e,t,a,o){var l=La(t,a);switch(t){case"iframe":case"object":Jt("topLoad","load",e);var i=a;break;case"video":case"audio":for(i in Ba)Ba.hasOwnProperty(i)&&Jt(i,Ba[i],e);i=a;break;case"source":Jt("topError","error",e),i=a;break;case"img":case"image":Jt("topError","error",e),Jt("topLoad","load",e),i=a;break;case"form":Jt("topReset","reset",e),Jt("topSubmit","submit",e),i=a;break;case"details":Jt("topToggle","toggle",e),i=a;break;case"input":ma(e,a),i=ha(e,a),Jt("topInvalid","invalid",e),Va(o,"onChange");break;case"option":i=Ca(e,a);break;case"select":xa(e,a),i=n({},a,{value:void 0}),Jt("topInvalid","invalid",e),Va(o,"onChange");break;case"textarea":Ea(e,a),i=wa(e,a),Jt("topInvalid","invalid",e),Va(o,"onChange");break;default:i=a}Ua(t,i,za);var u,c=i;for(u in c)if(c.hasOwnProperty(u)){var s=c[u];"style"===u?Fa(e,s,za):"dangerouslySetInnerHTML"===u?null!=(s=s?s.__html:void 0)&&Oa(e,s):"children"===u?"string"==typeof s?("textarea"!==t||""!==s)&&Ma(e,s):"number"==typeof s&&Ma(e,""+s):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(H.hasOwnProperty(u)?null!=s&&Va(o,u):l?pa(e,u,s):null!=s&&da(e,u,s))}switch(t){case"input":gt(e),ya(e,a);break;case"textarea":gt(e),Sa(e,a);break;case"option":null!=a.value&&e.setAttribute("value",a.value);break;case"select":e.multiple=!!a.multiple,null!=(t=a.value)?ka(e,!!a.multiple,t,!1):null!=a.defaultValue&&ka(e,!!a.multiple,a.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=r)}}function qa(e,t,a,o,l){var i,u,c=null;switch(t){case"input":a=ha(e,a),o=ha(e,o),c=[];break;case"option":a=Ca(e,a),o=Ca(e,o),c=[];break;case"select":a=n({},a,{value:void 0}),o=n({},o,{value:void 0}),c=[];break;case"textarea":a=wa(e,a),o=wa(e,o),c=[];break;default:"function"!=typeof a.onClick&&"function"==typeof o.onClick&&(e.onclick=r)}for(i in Ua(t,o,za),e=null,a)if(!o.hasOwnProperty(i)&&a.hasOwnProperty(i)&&null!=a[i])if("style"===i)for(u in t=a[i])t.hasOwnProperty(u)&&(e||(e={}),e[u]="");else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(H.hasOwnProperty(i)?c||(c=[]):(c=c||[]).push(i,null));for(i in o){var s=o[i];if(t=null!=a?a[i]:void 0,o.hasOwnProperty(i)&&s!==t&&(null!=s||null!=t))if("style"===i)if(t){for(u in t)!t.hasOwnProperty(u)||s&&s.hasOwnProperty(u)||(e||(e={}),e[u]="");for(u in s)s.hasOwnProperty(u)&&t[u]!==s[u]&&(e||(e={}),e[u]=s[u])}else e||(c||(c=[]),c.push(i,e)),e=s;else"dangerouslySetInnerHTML"===i?(s=s?s.__html:void 0,t=t?t.__html:void 0,null!=s&&t!==s&&(c=c||[]).push(i,""+s)):"children"===i?t===s||"string"!=typeof s&&"number"!=typeof s||(c=c||[]).push(i,""+s):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(H.hasOwnProperty(i)?(null!=s&&Va(l,i),c||t===s||(c=[])):(c=c||[]).push(i,s))}return e&&(c=c||[]).push("style",e),c}function Qa(e,t,n,r,a){"input"===n&&"radio"===a.type&&null!=a.name&&ga(e,a),La(n,r),r=La(n,a);for(var o=0;o<t.length;o+=2){var l=t[o],i=t[o+1];"style"===l?Fa(e,i,za):"dangerouslySetInnerHTML"===l?Oa(e,i):"children"===l?Ma(e,i):r?null!=i?pa(e,l,i):e.removeAttribute(l):null!=i?da(e,l,i):fa(e,l)}switch(n){case"input":va(e,a);break;case"textarea":Ta(e,a);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!a.multiple,null!=(n=a.value)?ka(e,!!a.multiple,n,!1):t!==!!a.multiple&&(null!=a.defaultValue?ka(e,!!a.multiple,a.defaultValue,!0):ka(e,!!a.multiple,a.multiple?[]:"",!1))}}function $a(e,t,n,a,o){switch(t){case"iframe":case"object":Jt("topLoad","load",e);break;case"video":case"audio":for(var l in Ba)Ba.hasOwnProperty(l)&&Jt(l,Ba[l],e);break;case"source":Jt("topError","error",e);break;case"img":case"image":Jt("topError","error",e),Jt("topLoad","load",e);break;case"form":Jt("topReset","reset",e),Jt("topSubmit","submit",e);break;case"details":Jt("topToggle","toggle",e);break;case"input":ma(e,n),Jt("topInvalid","invalid",e),Va(o,"onChange");break;case"select":xa(e,n),Jt("topInvalid","invalid",e),Va(o,"onChange");break;case"textarea":Ea(e,n),Jt("topInvalid","invalid",e),Va(o,"onChange")}for(var i in Ua(t,n,za),a=null,n)n.hasOwnProperty(i)&&(l=n[i],"children"===i?"string"==typeof l?e.textContent!==l&&(a=["children",l]):"number"==typeof l&&e.textContent!==""+l&&(a=["children",""+l]):H.hasOwnProperty(i)&&null!=l&&Va(o,i));switch(t){case"input":gt(e),ya(e,n);break;case"textarea":gt(e),Sa(e,n);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=r)}return a}function Ga(e,t){return e.nodeValue!==t}var Ya=Object.freeze({createElement:ja,createTextNode:Ka,setInitialProperties:Wa,diffProperties:qa,updateProperties:Qa,diffHydratedProperties:$a,diffHydratedText:Ga,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(va(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=de(r);a||s("90"),vt(r),va(r,a)}}}break;case"textarea":Ta(e,n);break;case"select":null!=(t=n.value)&&ka(e,!!n.multiple,t,!1)}}});nt.injectFiberControlledHostComponent(Ya);var Xa=null,Za=null;function Ja(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eo(e){return!(!(e=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))}var to=Wr({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_a(null,"");break;default:e=_a(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}return e},getChildHostContext:function(e,t){return _a(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Xa=Yt;var e=o();if(gn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{t.nodeType,a.nodeType}catch(e){t=null;break e}var l=0,i=-1,u=-1,c=0,s=0,d=e,p=null;t:for(;;){for(var f;d!==t||0!==r&&3!==d.nodeType||(i=l+r),d!==a||0!==n&&3!==d.nodeType||(u=l+n),3===d.nodeType&&(l+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===t&&++c===r&&(i=l),p===a&&++s===n&&(u=l),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}t=-1===i||-1===u?null:{start:i,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;Za={focusedElem:e,selectionRange:t},Zt(!1)},resetAfterCommit:function(){var e=Za,t=o(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&i(document.documentElement,n)){if(gn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var a=n[Ee()].length;e=Math.min(r.start,a),r=void 0===r.end?e:Math.min(r.end,a),!t.extend&&e>r&&(a=r,r=e,e=a),a=mn(n,e);var l=mn(n,r);if(a&&l&&(1!==t.rangeCount||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)){var c=document.createRange();c.setStart(a.node,a.offset),t.removeAllRanges(),e>r?(t.addRange(c),t.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),t.addRange(c))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(u(n),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}Za=null,Zt(Xa),Xa=null},createInstance:function(e,t,n,r,a){return(e=ja(e,t,n,r))[ie]=a,e[ue]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){Wa(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,a){return qa(e,t,n,r,a)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return(e=Ka(e,t))[ie]=r,e},now:$r,mutation:{commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,a){e[ue]=a,Qa(e,t,n,r,a)},resetTextContent:function(e){e.textContent=""},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,a,o){return e[ie]=o,e[ue]=n,$a(e,t,n,a,r)},hydrateTextInstance:function(e,t,n){return e[ie]=n,Ga(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Gr,cancelDeferredCallback:Yr,useSyncScheduling:!0});function no(e,t,n,r,a){Ja(n)||s("200");var o=n._reactRootContainer;if(o)to.updateContainer(t,o,e,a);else{if(!(r=r||eo(n)))for(o=void 0;o=n.lastChild;)n.removeChild(o);var l=to.createContainer(n,r);o=n._reactRootContainer=l,to.unbatchedUpdates(function(){to.updateContainer(t,l,e,a)})}return to.getPublicRootInstance(o)}function ro(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ja(t)||s("200"),qr(e,t,null,n)}function ao(e,t){this._reactRootContainer=to.createContainer(e,t)}lt=to.batchedUpdates,ao.prototype.render=function(e,t){to.updateContainer(e,this._reactRootContainer,null,t)},ao.prototype.unmount=function(e){to.updateContainer(null,this._reactRootContainer,null,e)};var oo={createPortal:ro,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return to.findHostInstance(t);"function"==typeof e.render?s("188"):s("213",Object.keys(e))},hydrate:function(e,t,n){return no(null,e,t,!0,n)},render:function(e,t,n){return no(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&s("38"),no(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Ja(e)||s("40"),!!e._reactRootContainer&&(to.unbatchedUpdates(function(){no(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:ro,unstable_batchedUpdates:ut,unstable_deferredUpdates:to.deferredUpdates,flushSync:to.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:oe,EventPluginRegistry:j,EventPropagators:xe,ReactControlledComponent:ot,ReactDOMComponentTree:pe,ReactDOMEventListener:nn}};to.injectIntoDevTools({findFiberByHostInstance:ce,bundleType:0,version:"16.2.0",rendererPackageName:"react-dom"});var lo=Object.freeze({default:oo}),io=lo&&oo||lo;module.exports=io.default?io.default:io;
},{"react":32,"fbjs/lib/ExecutionEnvironment":62,"object-assign":49,"fbjs/lib/emptyFunction":54,"fbjs/lib/EventListener":63,"fbjs/lib/getActiveElement":64,"fbjs/lib/shallowEqual":65,"fbjs/lib/containsNode":66,"fbjs/lib/focusNode":67,"fbjs/lib/emptyObject":51}],177:[function(require,module,exports) {
"use strict";var e=/([A-Z])/g;function r(r){return r.replace(e,"-$1").toLowerCase()}module.exports=r;
},{}],144:[function(require,module,exports) {
"use strict";var e=require("./hyphenate"),r=/^ms-/;function t(t){return e(t).replace(r,"-ms-")}module.exports=t;
},{"./hyphenate":177}],181:[function(require,module,exports) {
"use strict";var e=/-(.)/g;function r(r){return r.replace(e,function(e,r){return r.toUpperCase()})}module.exports=r;
},{}],145:[function(require,module,exports) {
"use strict";var e=require("./camelize"),r=/^-ms-/;function s(s){return e(s.replace(r,"ms-"))}module.exports=s;
},{"./camelize":181}],33:[function(require,module,exports) {
"use strict";function _(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(_){}}}_(),module.exports=require("./cjs/react-dom.production.min.js");
},{"./cjs/react-dom.production.min.js":41,"./cjs/react-dom.development.js":38}],39:[function(require,module,exports) {
!function(){"use strict";var e={}.hasOwnProperty;function n(){for(var r=[],o=0;o<arguments.length;o++){var f=arguments[o];if(f){var i=typeof f;if("string"===i||"number"===i)r.push(f);else if(Array.isArray(f))r.push(n.apply(null,f));else if("object"===i)for(var t in f)e.call(f,t)&&f[t]&&r.push(t)}}return r.join(" ")}"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return n}):window.classNames=n}();
},{}],5:[function(require,module,exports) {

},{}],46:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=0,e=[],t=exports.transaction=function(t){if(r++,t(),0===--r){var o=new Set(e);e=[];var a=!0,i=!1,n=void 0;try{for(var u,s=o.values()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){(0,u.value)()}}catch(r){i=!0,n=r}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}},o=exports.pushToRefresh=function(t){if(!(r>0))throw Error("Nieprawidłowe odgałęzienie programu");e.push(t)};
},{}],122:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done)&&(e.push(o.value),!r||e.length!==r);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return e}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}();function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var n=exports.EventEmitter=function(){function n(){e(this,n),this._list=new Map}return r(n,[{key:"on",value:function(t){var r=this,e={};return this._list.set(e,t),function(){r._list.delete(e)}}},{key:"emit",value:function(t){var r=[],e=!0,n=!1,i=void 0;try{for(var a,o=this._list.values()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;r.push(l)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}var u=!0,f=!1,v=void 0;try{for(var y,c=r[Symbol.iterator]();!(u=(y=c.next()).done);u=!0){(0,y.value)(t)}}catch(t){f=!0,v=t}finally{try{!u&&c.return&&c.return()}finally{if(f)throw v}}}},{key:"count",value:function(){return this._list.size}},{key:"remove",value:function(r){var e=[],n=!0,i=!1,a=void 0;try{for(var o,l=this._list.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=t(o.value,2),f=u[0];r===u[1]&&e.push(f)}}catch(t){i=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}var v=!0,y=!1,c=void 0;try{for(var s,h=e[Symbol.iterator]();!(v=(s=h.next()).done);v=!0){var d=s.value;this._list.delete(d)}}catch(t){y=!0,c=t}finally{try{!v&&h.return&&h.return()}finally{if(y)throw c}}}}]),n}();
},{}],78:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Subscription=void 0;var n=function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),t=require("../transaction"),e=require("./EventEmitter");function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var o=exports.Subscription=function(){function o(){i(this,o),this._subscription=new e.EventEmitter,this._up=new e.EventEmitter,this._down=new e.EventEmitter}return n(o,[{key:"notify",value:function(){var n=this;(0,t.transaction)(function(){n._subscription.emit()})}},{key:"onUp",value:function(n){return this._up.on(n)}},{key:"onDown",value:function(n){return this._down.on(n)}},{key:"onDownRemove",value:function(n){this._down.remove(n)}},{key:"bind",value:function(n){var t=this,e=this._subscription.on(n);return 1===this._subscription.count()&&this._up.emit(),function(){e(),0===t._subscription.count()&&t._down.emit()}}}]),o}();
},{"../transaction":46,"./EventEmitter":122}],45:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Connection=void 0;var n=function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}(),t=require("./Utils/Subscription");function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var i=exports.Connection=function(){function t(n,i){var o=this;e(this,t),this.disconnect=function(){o._connect=!0,o._disconnect()},this._connect=!0,this._getValue=i,this._notifyCallbacks=[],this._disconnect=n.bind(function(){var n=!0,t=!1,e=void 0;try{for(var i,r=o._notifyCallbacks[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){(0,i.value)()}}catch(n){t=!0,e=n}finally{try{!n&&r.return&&r.return()}finally{if(t)throw e}}})}return n(t,[{key:"onNotify",value:function(n){this._notifyCallbacks.push(n)}},{key:"getValue",value:function(){if(this._connect)return this._getValue();throw Error("Connection is disconnect")}}]),t}();
},{"./Utils/Subscription":78}],220:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueLayzy=void 0;var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),t=require("../Utils/EventEmitter");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=exports.ValueLayzy=function(){function a(e){n(this,a),this._callbacks=e,this._value=null,this._onNew=new t.EventEmitter}return e(a,[{key:"getValue",value:function(){var e=this._value;if(e)return e.value;var t=this._callbacks.create();return this._value={value:t},this._onNew.emit(t),t}},{key:"clear",value:function(){if(this._value){var e=this._callbacks.drop;e&&e(this._value.value)}this._value=null}},{key:"onNew",value:function(e){return this._onNew.on(e)}}]),a}();
},{"../Utils/EventEmitter":122}],212:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.map=void 0;var n=require("../Utils/Subscription"),e=require("../Connection"),t=require("./ValueLayzy"),r=exports.map=function(e,r){var o=new t.ValueLayzy({create:function(){var o=e();return{subscription:new n.Subscription,connection:o,result:new t.ValueLayzy({create:function(){return r(o.getValue())},drop:null})}},drop:function(n){return n.connection.disconnect()}});return o.onNew(function(n){n.connection.onNotify(function(){n.result.clear(),n.subscription.notify()}),n.subscription.onDown(function(){o.clear()})}),[function(){return o.getValue().subscription},function(){return o.getValue().result.getValue()}]};
},{"../Utils/Subscription":78,"../Connection":45,"./ValueLayzy":220}],213:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.switchMap=void 0;var t=require("../Utils/Subscription"),n=require("../Connection"),e=require("./ValueLayzy"),i=exports.switchMap=function(n,i){var o=function(t){return i(t.getValue())},r=new e.ValueLayzy({create:function(){var e=n();return{subscription:new t.Subscription,self:e,target:o(e)}},drop:function(t){t.self.disconnect(),t.target.disconnect()}});return r.onNew(function(t){t.self.onNotify(function(){var n=o(t.self);n.onNotify(function(){t.subscription.notify()}),t.target.disconnect(),t.target=n,t.subscription.notify()}),t.target.onNotify(function(){t.subscription.notify()}),t.subscription.onDown(function(){r.clear()})}),[function(){return r.getValue().subscription},function(){return r.getValue().target.getValue()}]};
},{"../Utils/Subscription":78,"../Connection":45,"./ValueLayzy":220}],214:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.combine=void 0;var n=require("../Utils/Subscription"),r=require("../Connection"),e=require("./ValueLayzy"),t=exports.combine=function(r,t){var o=new e.ValueLayzy({create:function(){var o=r.map(function(n){return n()});return{subscription:new n.Subscription,connections:o,result:new e.ValueLayzy({create:function(){return t(o.map(function(n){return n.getValue()}))},drop:null})}},drop:function(n){var r=!0,e=!1,t=void 0;try{for(var o,i=n.connections[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){o.value.disconnect()}}catch(n){e=!0,t=n}finally{try{!r&&i.return&&i.return()}finally{if(e)throw t}}}});return o.onNew(function(n){n.subscription.onDown(function(){o.clear()});var r=function(){n.result.clear(),n.subscription.notify()},e=!0,t=!1,i=void 0;try{for(var u,c=n.connections[Symbol.iterator]();!(e=(u=c.next()).done);e=!0){u.value.onNotify(r)}}catch(n){t=!0,i=n}finally{try{!e&&c.return&&c.return()}finally{if(t)throw i}}}),[function(){return o.getValue().subscription},function(){return o.getValue().result.getValue()}]};
},{"../Utils/Subscription":78,"../Connection":45,"./ValueLayzy":220}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Computed=void 0;var n=function(){function n(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}(),e=function(){return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,e){var r=[],t=!0,i=!1,u=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);t=!0);}catch(n){i=!0,u=n}finally{try{!t&&a.return&&a.return()}finally{if(i)throw u}}return r}(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=require("../Utils/Subscription"),t=require("../Connection"),i=require("../transaction"),u=require("../Value"),o=require("./Operator.Map"),a=require("./Operator.SwitchMap"),c=require("./Operator.Combine");function f(n){if(Array.isArray(n)){for(var e=0,r=Array(n.length);e<n.length;e++)r[e]=n[e];return r}return Array.from(n)}function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(n,r){var t=n.map(function(n){return function(){return n.bind()}}),i=(0,c.combine)(t,r),u=e(i,2),o=u[0],a=u[1];return new p(o,a)},p=function(){function u(n,e){l(this,u),this._getSubscription=n,this._getValue=e}return n(u,[{key:"map",value:function(n){var r=this,t=(0,o.map)(function(){return r.bind()},n),i=e(t,2);return new u(i[0],i[1])}},{key:"switchMap",value:function(n){var r=this,t=(0,a.switchMap)(function(){return r.bind()},function(e){return n(e).bind()}),i=e(t,2);return new u(i[0],i[1])}},{key:"distinctUntilChanged",value:function(){return this}},{key:"getValueSnapshot",value:function(){var n=this.bind(),e=n.getValue();return n.disconnect(),e}},{key:"bind",value:function(){return new t.Connection(this._getSubscription(),this._getValue)}},{key:"connect",value:function(n){var e=new t.Connection(this._getSubscription(),this._getValue);return e.onNotify(function(){(0,i.pushToRefresh)(n)}),e}}],[{key:"of",value:function(n){var e=new r.Subscription;return new u(function(){return e},function(){return n})}},{key:"combine",value:function(n,e,r){return s([n,e],function(n){return r.apply(void 0,f(n))})}},{key:"combine3",value:function(n,e,r,t){return s([n,e,r],function(n){return t.apply(void 0,f(n))})}},{key:"combineArray",value:function(n,e){return s(n,e)}}]),u}();exports.Computed=p;
},{"../Utils/Subscription":78,"../Connection":45,"../transaction":46,"../Value":44,"./Operator.Map":212,"./Operator.SwitchMap":213,"./Operator.Combine":214}],44:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Value=void 0;var n=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),e=require("./Utils/Subscription"),t=require("./Computed"),i=require("./transaction");function u(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var r=exports.Value=function(){function r(n,t){u(this,r),this._value=n,this._subscription=new e.Subscription,t&&this._connect(t)}return n(r,[{key:"_connect",value:function(n){var e=this;this._subscription.onUp(function(){var t=n(function(n){e.setValue(n)});e._subscription.onDown(function n(){t(),e._subscription.onDownRemove(n)})})}},{key:"setValue",value:function(n){var e=this;(0,i.transaction)(function(){e._value=n,e._subscription.notify()})}},{key:"getValue",value:function(){return this._value}},{key:"asComputed",value:function(){var n=this;return new t.Computed(function(){return n._subscription},function(){return n._value})}}]),r}();
},{"./Utils/Subscription":78,"./Computed":48,"./transaction":46}],47:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueDebounce=void 0;var e=function(){function e(e,t){for(var u=0;u<t.length;u++){var n=t[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,u,n){return u&&e(t.prototype,u),n&&e(t,n),t}}(),t=require("../Computed"),u=require("../Value");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=exports.ValueDebounce=function(){function t(e,r){n(this,t),this._value=new u.Value(e),this._timeout=r,this._timer=null}return e(t,[{key:"setValue",value:function(e){var t=this;null!==this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t._value.setValue(e)},this._timeout)}},{key:"asComputed",value:function(){return this._value.asComputed()}}]),t}();
},{"../Computed":48,"../Value":44}],40:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValueDebounce=exports.transaction=exports.Connection=exports.Computed=exports.Value=void 0;var e=require("./Value"),o=require("./Computed"),t=require("./Connection"),r=require("./transaction"),n=require("./Extra/ValueDebounce");exports.Value=e.Value,exports.Computed=o.Computed,exports.Connection=t.Connection,exports.transaction=r.transaction,exports.ValueDebounce=n.ValueDebounce;
},{"./Value":44,"./Computed":48,"./Connection":45,"./transaction":46,"./Extra/ValueDebounce":47}],6:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseComponent=void 0;var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("react"),n=o(t),r=require("computed-values");function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="undefined"==typeof window,l=exports.BaseComponent=function(t){function o(e){i(this,o);var t=u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));t._refresh=function(){t.forceUpdate()},t._connections=[],t._propsValue=new r.Value(e),t.propsComputed=t._propsValue.asComputed();var n=t.render.bind(t);return t.render=function(){var e=t._connections;t._connections=[];var r=n(),o=!0,i=!1,u=void 0;try{for(var c,a=e[Symbol.iterator]();!(o=(c=a.next()).done);o=!0){(0,c.value)()}}catch(e){i=!0,u=e}finally{try{!o&&a.return&&a.return()}finally{if(i)throw u}}return r},t}return c(o,n.Component),e(o,[{key:"componentDidCatch",value:function(e,t){}},{key:"componentWillReceiveProps",value:function(e){this._propsValue.setValue(e)}},{key:"componentWillUnmount",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this._connections[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){(0,r.value)()}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}}]),e(o,[{key:"getFromComputed",value:function(e){var t=e.connect(this._refresh);return a?t.disconnect():this._connections.push(function(){return t.disconnect()}),t.getValue()}}]),o}();
},{"react":32,"computed-values":40}],8:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("react"),r=a(t),n=require("computed-values"),o=require("../BaseComponent");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=new n.Value(44),s=new n.Value(1);setInterval(function(){c.setValue(c.getValue()+1)},500),setInterval(function(){s.setValue(s.getValue()+1)},3e3);var p=function(t){function n(){var e,t,r;u(this,n);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=r=i(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.counter$=c.asComputed(),r.char$=s.asComputed().map(function(e){return".".repeat(Math.min(e,30))}),i(r,t)}return l(n,o.BaseComponent),e(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.messageId,o=this.getFromComputed(this.counter$),a=this.getFromComputed(this.char$);return r.createElement("div",{className:t},r.createElement("p",null,n," ",o),r.createElement("p",null,a))}}]),n}();exports.default=p;
},{"react":32,"computed-values":40,"../BaseComponent":6}],60:[function(require,module,exports) {
"use strict";Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(r){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<e;){var i=t[o];if(r.call(n,i,o,t))return o;o++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(r){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<e;){var i=t[o];if(r.call(n,i,o,t))return i;o++}}});
},{}],119:[function(require,module,exports) {
var global = (1,eval)("this");
var e,l=(0,eval)("this");if(Object.defineProperty(exports,"__esModule",{value:!0}),void 0!==l)e=l;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=exports.globalScope=e;
},{}],120:[function(require,module,exports) {
!function(e){var t=setTimeout;function n(){}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(e){return void f(t.promise,e)}r(t.promise,o)}else(1===e._state?r:f)(t.promise,e._value)})):e._deferreds.push(t)}function r(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void c((i=n,r=t,function(){i.apply(r,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){f(e,t)}var i,r}function f(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,r(t,e))},function(e){n||(n=!0,f(t,e))})}catch(e){if(n)return;n=!0,f(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var o=new this.constructor(n);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,o)),o},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){if(0===t.length)return e([]);var o=t.length;function i(r,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(e){i(r,e)},n)}t[r]=f,0==--o&&e(t)}catch(e){n(e)}}for(var r=0;r<t.length;r++)i(r,t[r])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var o=0,i=e.length;o<i;o++)e[o].then(t,n)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},o._setImmediateFn=function(e){o._immediateFn=e},o._setUnhandledRejectionFn=function(e){o._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=o:e.Promise||(e.Promise=o)}(this);
},{}],80:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.attachDummyErrorHandler=exports.Deferred=exports.PromiseImpl=void 0;var e=require("../utils/globalScope"),r=exports.PromiseImpl=e.globalScope.Promise||require("promise-polyfill"),t=function(){function e(){var e=this;this.resolve=null,this.reject=null,this.promise=new r(function(r,t){e.resolve=r,e.reject=t})}return e.prototype.wrapCallback=function(e){var r=this;return function(t,i){t?r.reject(t):r.resolve(i),"function"==typeof e&&(o(r.promise),1===e.length?e(t):e(t,i))}},e}();exports.Deferred=t;var o=exports.attachDummyErrorHandler=function(e){e.catch(function(){})};
},{"../utils/globalScope":119,"promise-polyfill":120}],79:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.createSubscribe=t,exports.async=n;var r=require("../utils/promise");function t(e,r){var t=new o(e,r);return t.subscribe.bind(t)}var o=function(){function e(e,t){var o=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=r.PromiseImpl.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(o)}).catch(function(e){o.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(r){r.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(r){r.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,r,t){var o,n=this;if(void 0===e&&void 0===r&&void 0===t)throw new Error("Missing Observer.");void 0===(o=i(e,["next","error","complete"])?e:{next:e,error:r,complete:t}).next&&(o.next=s),void 0===o.error&&(o.error=s),void 0===o.complete&&(o.complete=s);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{n.finalError?o.error(n.finalError):o.complete()}catch(e){}}),this.observers.push(o),c},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,e)},e.prototype.sendOne=function(e,r){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[e])try{r(t.observers[e])}catch(e){"undefined"!=typeof console&&console.error}})},e.prototype.close=function(e){var r=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},e}();function n(e,t){return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];r.PromiseImpl.resolve(!0).then(function(){e.apply(void 0,o)}).catch(function(e){t&&t(e)})}}function i(r,t){if("object"!==(void 0===r?"undefined":e(r))||null===r)return!1;for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i in r&&"function"==typeof r[i])return!0}return!1}function s(){}
},{"../utils/promise":80}],82:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.patchCapture=e;var r="FirebaseError",t=Error.captureStackTrace;function e(r){var e=t;return t=r,e}var o=function(){return function(e,o){if(this.code=e,this.message=o,t)t(this,i.prototype.create);else{var s=Error.apply(this,arguments);this.name=r,Object.defineProperty(this,"stack",{get:function(){return s.stack}})}}}();exports.FirebaseError=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name=r;var i=function(){function r(r,t,e){this.service=r,this.serviceName=t,this.errors=e,this.pattern=/\{\$([^}]+)}/g}return r.prototype.create=function(r,t){void 0===t&&(t={});var e,i=this.errors[r],s=this.service+"/"+r;e=void 0===i?"Error":i.replace(this.pattern,function(r,e){var o=t[e];return void 0!==o?o.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+s+").";var a=new o(s,e);for(var n in t)t.hasOwnProperty(n)&&"_"!==n.slice(-1)&&(a[n]=t[n]);return a},r}();exports.ErrorFactory=i;
},{}],81:[function(require,module,exports) {
"use strict";function e(e){return t(void 0,e)}function t(e,r){if(!(r instanceof Object))return r;switch(r.constructor){case Date:return new Date(r.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return r}for(var n in r)r.hasOwnProperty(n)&&(e[n]=t(e[n],r[n]));return e}function r(e,t,r){e[t]=r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepCopy=e,exports.deepExtend=t,exports.patchProperty=r;
},{}],61:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFirebaseNamespace=p;var e=require("./subscribe"),t=require("./errors"),r=require("../utils/promise"),n=require("../utils/deep_copy"),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o="[DEFAULT]",a=[],s=function(){function e(e,t,i){this.firebase_=i,this.isDeleted_=!1,this.services_={},this.name_=t,this.options_=(0,n.deepCopy)(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return r.PromiseImpl.resolve(null)},addAuthTokenListener:function(e){a.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){a=a.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new r.PromiseImpl(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(r){Object.keys(e.services_[r]).forEach(function(n){t.push(e.services_[r][n])})}),r.PromiseImpl.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=o),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var r=t!==o?t:void 0,n=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),r);this.services_[e][t]=n}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;(0,n.deepExtend)(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(a.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),a=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&c("app-deleted",{name:this.name_})},e}();function p(){var a={},u={},d={},l={__esModule:!0,initializeApp:function(e,t){void 0===t?t=o:"string"==typeof t&&""!==t||c("bad-app-name",{name:t+""});i(a,t)&&c("duplicate-app",{name:t});var r=new s(e,t,l);return a[t]=r,m(r,"create"),r},app:f,apps:null,Promise:r.PromiseImpl,SDK_VERSION:"4.4.0",INTERNAL:{registerService:function(e,t,r,i,o){u[e]&&c("duplicate-service",{name:e});u[e]=t,i&&(d[e]=i,h().forEach(function(e){i("create",e)}));var a=function(t){return void 0===t&&(t=f()),"function"!=typeof t[e]&&c("invalid-app-argument",{name:e}),t[e]()};void 0!==r&&(0,n.deepExtend)(a,r);return l[e]=a,s.prototype[e]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this._getService.bind(this,e).apply(this,o?t:[])},a},createFirebaseNamespace:p,extendNamespace:function(e){(0,n.deepExtend)(l,e)},createSubscribe:e.createSubscribe,ErrorFactory:t.ErrorFactory,removeApp:function(e){m(a[e],"delete"),delete a[e]},factories:u,useAsService:v,Promise:r.PromiseImpl,deepExtend:n.deepExtend}};function f(e){return i(a,e=e||o)||c("no-app",{name:e}),a[e]}function h(){return Object.keys(a).map(function(e){return a[e]})}function m(e,t){Object.keys(u).forEach(function(r){var n=v(e,r);null!==n&&d[n]&&d[n](t,e)})}function v(e,t){if("serverAuth"===t)return null;var r=t;e.options;return r}return(0,n.patchProperty)(l,"default",l),Object.defineProperty(l,"apps",{get:h}),(0,n.patchProperty)(f,"App",s),l}function c(e,t){throw d.create(e,t)}s.prototype.name&&s.prototype.options||s.prototype.delete;var u={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},d=new t.ErrorFactory("app","Firebase",u);
},{"./subscribe":79,"./errors":82,"../utils/promise":80,"../utils/deep_copy":81}],55:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./utils/shims");var e=require("./app/firebase_app"),r=(0,e.createFirebaseNamespace)();exports.default=r,module.exports=exports.default;
},{"./utils/shims":60,"./app/firebase_app":61}],56:[function(require,module,exports) {
var global = (1,eval)("this");
var t=(0,eval)("this"),e=require("./app");(function(){(function(){var t,n=n||{},i=this,r=function(t){return void 0!==t},o=function(t){return"string"==typeof t},a=function(t){return"boolean"==typeof t},s=function(){},u=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},h=function(t){return null===t},c=function(t){return"array"==u(t)},l=function(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length},f=function(t){return"function"==u(t)},d=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},p=function(t,e,n){return t.call.apply(t.bind,arguments)},v=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},m=function(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)},g=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},b=Date.now||function(){return+new Date},y=function(t,e){function n(){}n.prototype=e.prototype,t.Vc=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Ng=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}},w=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,w);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))};y(w,Error),w.prototype.name="CustomError";var I=function(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")},T=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},k=function(t){return R.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(E,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(A,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(S,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(N,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(P,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(C,"&#0;")),t):t},E=/&/g,A=/</g,S=/>/g,N=/"/g,P=/'/g,C=/\x00/g,R=/[\x00&<>"']/,O=function(t,e){return-1!=t.indexOf(e)},D=function(t,e){return t<e?-1:t>e?1:0},_=function(t,e){e.unshift(t),w.call(this,I.apply(null,e)),e.shift()};y(_,w),_.prototype.name="AssertionError";var L=function(t,e,n,i){var r="Assertion failed";if(n){r+=": "+n;var o=i}else t&&(r+=": "+t,o=e);throw new _(""+r,o||[])},x=function(t,e,n){return t||L("",null,e,Array.prototype.slice.call(arguments,2)),t},U=function(t,e){throw new _("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))},M=function(t,e,n){return"number"==typeof t||L("Expected number but got %s: %s.",[u(t),t],e,Array.prototype.slice.call(arguments,2)),t},V=function(t,e,n){f(t)||L("Expected function but got %s: %s.",[u(t),t],e,Array.prototype.slice.call(arguments,2))},j=function(){this.Uc="",this.gf=F};j.prototype.qb=!0,j.prototype.ob=function(){return this.Uc},j.prototype.toString=function(){return"Const{"+this.Uc+"}"};var W=function(t){return t instanceof j&&t.constructor===j&&t.gf===F?t.Uc:(U("expected object of type Const, got '"+t+"'"),"type_error:Const")},F={},K=function(t){var e=new j;return e.Uc=t,e};K("");var X=function(){this.Mc="",this.hf=J};X.prototype.qb=!0,X.prototype.ob=function(){return this.Mc},X.prototype.toString=function(){return"TrustedResourceUrl{"+this.Mc+"}"};var q,H=function(t){return t instanceof X&&t.constructor===X&&t.hf===J?t.Mc:(U("expected object of type TrustedResourceUrl, got '"+t+"' of type "+u(t)),"type_error:TrustedResourceUrl")},B=function(t,e){return t=G(t,e),(e=new X).Mc=t,e},G=function(t,e){var n=W(t);if(!z.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return n.replace(Y,function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof j?W(t):encodeURIComponent(String(t))})},Y=/%{(\w+)}/g,z=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,J={},$=Array.prototype.indexOf?function(t,e,n){return x(null!=t.length),Array.prototype.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,o(t))return o(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Z=Array.prototype.forEach?function(t,e,n){x(null!=t.length),Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=o(t)?t.split(""):t,a=0;a<i;a++)a in r&&e.call(n,r[a],a,t)},Q=Array.prototype.map?function(t,e,n){return x(null!=t.length),Array.prototype.map.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=Array(i),a=o(t)?t.split(""):t,s=0;s<i;s++)s in a&&(r[s]=e.call(n,a[s],s,t));return r},tt=Array.prototype.some?function(t,e,n){return x(null!=t.length),Array.prototype.some.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=o(t)?t.split(""):t,a=0;a<i;a++)if(a in r&&e.call(n,r[a],a,t))return!0;return!1},et=function(t,e){return 0<=$(t,e)},nt=function(t,e){var n;return(n=0<=(e=$(t,e)))&&it(t,e),n},it=function(t,e){return x(null!=t.length),1==Array.prototype.splice.call(t,e,1).length},rt=function(t,e){!function(t,e){for(var n=o(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,function(n,i){e.call(void 0,n,i,t)&&it(t,i)&&0})},ot=function(t){return Array.prototype.concat.apply([],arguments)},at=function(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]};t:{var st=i.navigator;if(st){var ut=st.userAgent;if(ut){q=ut;break t}}q=""}var ht=function(t){return O(q,t)},ct=function(t,e){for(var n in t)e.call(void 0,t[n],n,t)},lt=function(t){var e,n=[],i=0;for(e in t)n[i++]=t[e];return n},ft=function(t){var e,n=[],i=0;for(e in t)n[i++]=e;return n},dt=function(t){for(var e in t)return!1;return!0},pt=function(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0},vt=function(t){var e,n={};for(e in t)n[e]=t[e];return n},mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),gt=function(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}},bt=function(t){return bt[" "](t),t};bt[" "]=s;var yt,wt,It=ht("Opera"),Tt=ht("Trident")||ht("MSIE"),kt=ht("Edge"),Et=kt||Tt,At=ht("Gecko")&&!(O(q.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),St=O(q.toLowerCase(),"webkit")&&!ht("Edge"),Nt=function(){var t=i.document;return t?t.documentMode:void 0};t:{var Pt="",Ct=(wt=q,At?/rv\:([^\);]+)(\)|;)/.exec(wt):kt?/Edge\/([\d\.]+)/.exec(wt):Tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(wt):St?/WebKit\/(\S+)/.exec(wt):It?/(?:Version)[ \/]?(\S+)/.exec(wt):void 0);if(Ct&&(Pt=Ct?Ct[1]:""),Tt){var Rt=Nt();if(null!=Rt&&Rt>parseFloat(Pt)){yt=String(Rt);break t}}yt=Pt}var Ot,Dt=yt,_t={},Lt=function(t){return function(t,e){var n=_t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,function(){for(var e=0,n=T(String(Dt)).split("."),i=T(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var a=n[o]||"",s=i[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})},xt=i.document;Ot=xt&&Tt?Nt()||("CSS1Compat"==xt.compatMode?parseInt(Dt,10):5):void 0;var Ut,Mt=null,Vt=null,jt=function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=Vt[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}Wt();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}},Wt=function(){if(!Mt){Mt={},Vt={};for(var t=0;65>t;t++)Mt[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Vt[Mt[t]]=t,62<=t&&(Vt["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}},Ft=function(t,e){this.Da=-1,this.Da=64,this.rc=i.Uint8Array?new Uint8Array(this.Da):Array(this.Da),this.Yc=this.rb=0,this.l=[],this.$f=t,this.Ee=e,this.Bg=i.Int32Array?new Int32Array(64):Array(64),r(Ut)||(Ut=i.Int32Array?new Int32Array(Bt):Bt),this.reset()};y(Ft,function(){this.Da=-1});for(var Kt=[],Xt=0;63>Xt;Xt++)Kt[Xt]=0;var qt=ot(128,Kt);Ft.prototype.reset=function(){this.Yc=this.rb=0,this.l=i.Int32Array?new Int32Array(this.Ee):at(this.Ee)};var Ht=function(t){var e=t.rc;x(e.length==t.Da);for(var n=t.Bg,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.l[0],r=0|t.l[1];var s=0|t.l[2],u=0|t.l[3],h=0|t.l[4],c=0|t.l[5],l=0|t.l[6];for(o=0|t.l[7],e=0;64>e;e++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))|0)+((a=(a=h&c^~h&l)+(0|Ut[e])|0)+(0|n[e])|0)|0,o=l,l=c,c=h,h=u+a|0,u=s,s=r,r=i,i=a+f|0}t.l[0]=t.l[0]+i|0,t.l[1]=t.l[1]+r|0,t.l[2]=t.l[2]+s|0,t.l[3]=t.l[3]+u|0,t.l[4]=t.l[4]+h|0,t.l[5]=t.l[5]+c|0,t.l[6]=t.l[6]+l|0,t.l[7]=t.l[7]+o|0};Ft.prototype.update=function(t,e){r(e)||(e=t.length);var n=0,i=this.rb;if(o(t))for(;n<e;)this.rc[i++]=t.charCodeAt(n++),i==this.Da&&(Ht(this),i=0);else{if(!l(t))throw Error("message must be string or array");for(;n<e;){var a=t[n++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");this.rc[i++]=a,i==this.Da&&(Ht(this),i=0)}}this.rb=i,this.Yc+=e},Ft.prototype.digest=function(){var t=[],e=8*this.Yc;56>this.rb?this.update(qt,56-this.rb):this.update(qt,this.Da-(this.rb-56));for(var n=63;56<=n;n--)this.rc[n]=255&e,e/=256;for(Ht(this),n=e=0;n<this.$f;n++)for(var i=24;0<=i;i-=8)t[e++]=this.l[n]>>i&255;return t};var Bt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Gt=function(){Ft.call(this,8,Yt)};y(Gt,Ft);var Yt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],zt=Object.freeze||function(t){return t},Jt=function(){this.Ma=this.Ma,this.Jc=this.Jc};Jt.prototype.Ma=!1,Jt.prototype.isDisposed=function(){return this.Ma},Jt.prototype.lb=function(){if(this.Jc)for(;this.Jc.length;)this.Jc.shift()()};var $t=!Tt||9<=Number(Ot),Zt=Tt&&!Lt("9");!St||Lt("528"),At&&Lt("1.9b")||Tt&&Lt("8")||It&&Lt("9.5")||St&&Lt("528"),At&&!Lt("8")||Tt&&Lt("9");var Qt=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return i.addEventListener("test",s,e),i.removeEventListener("test",s,e),t}(),te=function(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Wa=!1,this.Se=!0};te.prototype.stopPropagation=function(){this.Wa=!0},te.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Se=!1};var ee=function(t,e){te.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.P=null,t&&this.init(t,e)};y(ee,te);var ne=zt({2:"touch",3:"pen",4:"mouse"});ee.prototype.init=function(t,e){var n=this.type=t.type,i=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(At){t:{try{bt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,null===i?(this.offsetX=St||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=St||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=o(t.pointerType)?t.pointerType:ne[t.pointerType]||"",this.state=t.state,this.P=t,t.defaultPrevented&&this.preventDefault()},ee.prototype.stopPropagation=function(){ee.Vc.stopPropagation.call(this),this.P.stopPropagation?this.P.stopPropagation():this.P.cancelBubble=!0},ee.prototype.preventDefault=function(){ee.Vc.preventDefault.call(this);var t=this.P;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Zt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},ee.prototype.Ef=function(){return this.P};var ie="closure_listenable_"+(1e6*Math.random()|0),re=0,oe=function(t){t.Bb=!0,t.listener=null,t.Nc=null,t.src=null,t.wc=null},ae=function(t){this.src=t,this.I={},this.kc=0};ae.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.I[o])||(t=this.I[o]=[],this.kc++);var a=ue(t,e,i,r);return-1<a?(e=t[a],n||(e.qc=!1)):((e=new function(t,e,n,i,r){this.listener=t,this.Nc=null,this.src=e,this.type=n,this.capture=!!i,this.wc=r,this.key=++re,this.Bb=this.qc=!1}(e,this.src,o,!!i,r)).qc=n,t.push(e)),e},ae.prototype.remove=function(t,e,n,i){if(!((t=t.toString())in this.I))return!1;var r=this.I[t];return-1<(e=ue(r,e,n,i))&&(oe(r[e]),it(r,e),0==r.length&&(delete this.I[t],this.kc--),!0)};var se=function(t,e){var n=e.type;n in t.I&&nt(t.I[n],e)&&(oe(e),0==t.I[n].length&&(delete t.I[n],t.kc--))};ae.prototype.td=function(t,e,n,i){var r=-1;return(t=this.I[t.toString()])&&(r=ue(t,e,n,i)),-1<r?t[r]:null},ae.prototype.hasListener=function(t,e){var n=r(t),i=n?t.toString():"",o=r(e);return function(t,e){for(var n in t)if(e.call(void 0,t[n],n,t))return!0;return!1}(this.I,function(t){for(var r=0;r<t.length;++r)if(!(n&&t[r].type!=i||o&&t[r].capture!=e))return!0;return!1})};var ue=function(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.Bb&&o.listener==e&&o.capture==!!n&&o.wc==i)return r}return-1},he="closure_lm_"+(1e6*Math.random()|0),ce={},le=function(t,e,n,i,r){if(i&&i.once)pe(t,e,n,i,r);else if(c(e))for(var o=0;o<e.length;o++)le(t,e[o],n,i,r);else n=ke(n),t&&t[ie]?t.listen(e,n,d(i)?!!i.capture:!!i,r):fe(t,e,n,!1,i,r)},fe=function(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a=d(r)?!!r.capture:!!r,s=Ie(t);if(s||(t[he]=s=new ae(t)),!(n=s.add(e,n,i,a,o)).Nc){if(i=de(),n.Nc=i,i.src=t,i.listener=n,t.addEventListener)Qt||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else{if(!t.attachEvent)throw Error("addEventListener and attachEvent are unavailable.");t.attachEvent(ge(e.toString()),i)}0}},de=function(){var t=we,e=$t?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e},pe=function(t,e,n,i,r){if(c(e))for(var o=0;o<e.length;o++)pe(t,e[o],n,i,r);else n=ke(n),t&&t[ie]?fi(t,e,n,d(i)?!!i.capture:!!i,r):fe(t,e,n,!0,i,r)},ve=function(t,e,n,i,r){if(c(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,i,r);else i=d(i)?!!i.capture:!!i,n=ke(n),t&&t[ie]?t.ga.remove(String(e),n,i,r):t&&(t=Ie(t))&&(e=t.td(e,n,i,r))&&me(e)},me=function(t){if("number"!=typeof t&&t&&!t.Bb){var e=t.src;if(e&&e[ie])se(e.ga,t);else{var n=t.type,i=t.Nc;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent&&e.detachEvent(ge(n),i),0,(n=Ie(e))?(se(n,t),0==n.kc&&(n.src=null,e[he]=null)):oe(t)}}},ge=function(t){return t in ce?ce[t]:ce[t]="on"+t},be=function(t,e,n,i){var r=!0;if((t=Ie(t))&&(e=t.I[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Bb&&(o=ye(o,i),r=r&&!1!==o)}return r},ye=function(t,e){var n=t.listener,i=t.wc||t.src;return t.qc&&me(t),n.call(i,e)},we=function(t,e){if(t.Bb)return!0;if(!$t){if(!e)t:{e=["window","event"];for(var n=i,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ee(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var o=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){o=!0}(o||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],o=e.currentTarget;o;o=o.parentNode)r.push(o);for(t=t.type,o=r.length-1;!e.Wa&&0<=o;o--){e.currentTarget=r[o];var a=be(r[o],t,!0,e);n=n&&a}for(o=0;!e.Wa&&o<r.length;o++)e.currentTarget=r[o],a=be(r[o],t,!1,e),n=n&&a}return n}return ye(t,new ee(e,this))},Ie=function(t){return(t=t[he])instanceof ae?t:null},Te="__closure_events_fn_"+(1e9*Math.random()>>>0),ke=function(t){return x(t,"Listener can not be null."),f(t)?t:(x(t.handleEvent,"An object listener must have handleEvent method."),t[Te]||(t[Te]=function(e){return t.handleEvent(e)}),t[Te])},Ee=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/,Ae=function(){this.xa="",this.ff=Ce};Ae.prototype.qb=!0,Ae.prototype.ob=function(){return this.xa},Ae.prototype.toString=function(){return"SafeUrl{"+this.xa+"}"};var Se=function(t){return t instanceof Ae&&t.constructor===Ae&&t.ff===Ce?t.xa:(U("expected object of type SafeUrl, got '"+t+"' of type "+u(t)),"type_error:SafeUrl")},Ne=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Pe=function(t){return t instanceof Ae?t:(t=t.qb?t.ob():String(t),Ne.test(t)||(t="about:invalid#zClosurez"),Re(t))},Ce={},Re=function(t){var e=new Ae;return e.xa=t,e};Re("about:blank");var Oe=function(t){var e=[];return _e(new De,t,e),e.join("")},De=function(){this.Oc=void 0},_e=function(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(c(e)){var i=e;e=i.length,n.push("[");for(var r="",o=0;o<e;o++)n.push(r),r=i[o],_e(t,t.Oc?t.Oc.call(i,String(o),r):r,n),r=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in n.push("{"),o="",e)Object.prototype.hasOwnProperty.call(e,i)&&("function"!=typeof(r=e[i])&&(n.push(o),Ue(i,n),n.push(":"),_e(t,t.Oc?t.Oc.call(e,i,r):r,n),o=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Ue(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}},Le={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},xe=/\uffff/.test("￿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Ue=function(t,e){e.push('"',t.replace(xe,function(t){var e=Le[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Le[t]=e),e}),'"')},Me=function(){};Me.prototype.ie=null;var Ve,je=function(t){return t.ie||(t.ie=t.Cd())},We=function(){};y(We,Me),We.prototype.sc=function(){var t=Fe(this);return t?new ActiveXObject(t):new XMLHttpRequest},We.prototype.Cd=function(){var t={};return Fe(this)&&(t[0]=!0,t[1]=!0),t};var Fe=function(t){if(!t.De&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.De=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.De};Ve=new We;var Ke=function(){};y(Ke,Me),Ke.prototype.sc=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xe;throw Error("Unsupported browser")},Ke.prototype.Cd=function(){return{}};var Xe=function(){this.oa=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseText="",this.status=-1,this.statusText=this.responseXML=null,this.oa.onload=m(this.If,this),this.oa.onerror=m(this.ye,this),this.oa.onprogress=m(this.Jf,this),this.oa.ontimeout=m(this.Kf,this)};(t=Xe.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.oa.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.oa.send(t)}else this.oa.send()},t.abort=function(){this.oa.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.oa.contentType:""},t.If=function(){this.status=200,this.responseText=this.oa.responseText,qe(this,4)},t.ye=function(){this.status=500,this.responseText="",qe(this,4)},t.Kf=function(){this.ye()},t.Jf=function(){this.status=200,qe(this,1)};var qe=function(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()};Xe.prototype.getAllResponseHeaders=function(){return"content-type: "+this.oa.contentType};var He=function(t,e,n){this.Vf=n,this.tf=t,this.kg=e,this.Ic=0,this.xc=null};He.prototype.get=function(){if(0<this.Ic){this.Ic--;var t=this.xc;this.xc=t.next,t.next=null}else t=this.tf();return t},He.prototype.put=function(t){this.kg(t),this.Ic<this.Vf&&(this.Ic++,t.next=this.xc,this.xc=t)};var Be,Ge=function(t){i.setTimeout(function(){throw t},0)},Ye=function(){this.cd=this.hb=null},ze=new He(function(){return new Je},function(t){t.reset()},100);Ye.prototype.add=function(t,e){var n=ze.get();n.set(t,e),this.cd?this.cd.next=n:(x(!this.hb),this.hb=n),this.cd=n},Ye.prototype.remove=function(){var t=null;return this.hb&&(t=this.hb,this.hb=this.hb.next,this.hb||(this.cd=null),t.next=null),t};var Je=function(){this.next=this.scope=this.rd=null};Je.prototype.set=function(t,e){this.rd=t,this.scope=e,this.next=null},Je.prototype.reset=function(){this.next=this.scope=this.rd=null};var $e,Ze=function(t,e){$e||Qe(),tn||($e(),tn=!0),en.add(t,e)},Qe=function(){if(-1!=String(i.Promise).indexOf("[native code]")){var t=i.Promise.resolve(void 0);$e=function(){t.then(nn)}}else $e=function(){var t=nn;!f(i.setImmediate)||i.Window&&i.Window.prototype&&!ht("Edge")&&i.Window.prototype.setImmediate==i.setImmediate?(Be||(Be=function(){var t=i.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},o=n;return e.port1.onmessage=function(){if(r(n.next)){var t=(n=n.next).me;n.me=null,t()}},function(t){o.next={me:t},o=o.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){i.setTimeout(t,0)}}()),Be(t)):i.setImmediate(t)}},tn=!1,en=new Ye,nn=function(){for(var t;t=en.remove();){try{t.rd.call(t.scope)}catch(t){Ge(t)}ze.put(t)}tn=!1},rn=function(t){return d(t)?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):void 0===t?"undefined":null===t?"null":typeof t},on=function(t){return(t=t&&t.ownerDocument)&&(t.defaultView||t.parentWindow)||i},an=!Tt||9<=Number(Ot);!At&&!Tt||Tt&&9<=Number(Ot)||At&&Lt("1.9.1"),Tt&&Lt("9");var sn=function(){this.xa="",this.ef=un};sn.prototype.qb=!0,sn.prototype.ob=function(){return this.xa},sn.prototype.toString=function(){return"SafeHtml{"+this.xa+"}"};var un={};sn.prototype.Qf=function(t){return this.xa=t,this};var hn=function(t){var e=document;return o(t)?e.getElementById(t):t},cn=function(t,e){ct(e,function(e,n){e&&e.qb&&(e=e.ob()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ln.hasOwnProperty(n)?t.setAttribute(ln[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})},ln={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},fn=function(t,e,n){function i(n){n&&e.appendChild(o(n)?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var a=n[r];!l(a)||d(a)&&0<a.nodeType?i(a):Z(dn(a)?at(a):a,i)}},dn=function(t){if(t&&"number"==typeof t.length){if(d(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1},pn=function(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0},vn=function(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}},mn=function(t,e){if(this.aa=0,this.za=void 0,this.kb=this.ua=this.w=null,this.vc=this.pd=!1,t!=s)try{var n=this;t.call(e,function(t){Nn(n,2,t)},function(t){if(!(t instanceof Un))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Nn(n,3,t)})}catch(t){Nn(this,3,t)}},gn=function(){this.next=this.context=this.tb=this.Ua=this.child=null,this.Hb=!1};gn.prototype.reset=function(){this.context=this.tb=this.Ua=this.child=null,this.Hb=!1};var bn=new He(function(){return new gn},function(t){t.reset()},100),yn=function(t,e,n){var i=bn.get();return i.Ua=t,i.tb=e,i.context=n,i},wn=function(t){if(t instanceof mn)return t;var e=new mn(s);return Nn(e,2,t),e},In=function(t){return new mn(function(e,n){n(t)})},Tn=function(t,e,n){Pn(t,e,n,null)||Ze(g(e,t))};mn.prototype.then=function(t,e,n){return null!=t&&V(t,"opt_onFulfilled should be a function."),null!=e&&V(e,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),Sn(this,f(t)?t:null,f(e)?e:null,n)},pn(mn);var kn=function(t,e){return(e=yn(e,e,void 0)).Hb=!0,An(t,e),t};mn.prototype.g=function(t,e){return Sn(this,null,t,e)},mn.prototype.cancel=function(t){0==this.aa&&Ze(function(){var e=new Un(t);En(this,e)},this)};var En=function(t,e){if(0==t.aa)if(t.w){var n=t.w;if(n.ua){for(var i=0,r=null,o=null,a=n.ua;a&&(a.Hb||(i++,a.child==t&&(r=a),!(r&&1<i)));a=a.next)r||(o=a);r&&(0==n.aa&&1==i?En(n,e):(o?(i=o,x(n.ua),x(null!=i),i.next==n.kb&&(n.kb=i),i.next=i.next.next):On(n),Dn(n,r,3,e)))}t.w=null}else Nn(t,3,e)},An=function(t,e){t.ua||2!=t.aa&&3!=t.aa||Rn(t),x(null!=e.Ua),t.kb?t.kb.next=e:t.ua=e,t.kb=e},Sn=function(t,e,n,i){var o=yn(null,null,null);return o.child=new mn(function(t,a){o.Ua=e?function(n){try{var r=e.call(i,n);t(r)}catch(t){a(t)}}:t,o.tb=n?function(e){try{var o=n.call(i,e);!r(o)&&e instanceof Un?a(e):t(o)}catch(t){a(t)}}:a}),o.child.w=t,An(t,o),o.child};mn.prototype.yg=function(t){x(1==this.aa),this.aa=0,Nn(this,2,t)},mn.prototype.zg=function(t){x(1==this.aa),this.aa=0,Nn(this,3,t)};var Nn=function(t,e,n){0==t.aa&&(t===n&&(e=3,n=new TypeError("Promise cannot resolve to itself")),t.aa=1,Pn(n,t.yg,t.zg,t)||(t.za=n,t.aa=e,t.w=null,Rn(t),3!=e||n instanceof Un||Ln(t,n)))},Pn=function(t,e,n,i){if(t instanceof mn)return null!=e&&V(e,"opt_onFulfilled should be a function."),null!=n&&V(n,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),An(t,yn(e||s,n||null,i)),!0;if(vn(t))return t.then(e,n,i),!0;if(d(t))try{var r=t.then;if(f(r))return Cn(t,r,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1},Cn=function(t,e,n,i,r){var o=!1,a=function(t){o||(o=!0,i.call(r,t))};try{e.call(t,function(t){o||(o=!0,n.call(r,t))},a)}catch(t){a(t)}},Rn=function(t){t.pd||(t.pd=!0,Ze(t.yf,t))},On=function(t){var e=null;return t.ua&&(e=t.ua,t.ua=e.next,e.next=null),t.ua||(t.kb=null),null!=e&&x(null!=e.Ua),e};mn.prototype.yf=function(){for(var t;t=On(this);)Dn(this,t,this.aa,this.za);this.pd=!1};var Dn=function(t,e,n,i){if(3==n&&e.tb&&!e.Hb)for(;t&&t.vc;t=t.w)t.vc=!1;if(e.child)e.child.w=null,_n(e,n,i);else try{e.Hb?e.Ua.call(e.context):_n(e,n,i)}catch(t){xn.call(null,t)}bn.put(e)},_n=function(t,e,n){2==e?t.Ua.call(t.context,n):t.tb&&t.tb.call(t.context,n)},Ln=function(t,e){t.vc=!0,Ze(function(){t.vc&&xn.call(null,e)})},xn=Ge,Un=function(t){w.call(this,t)};y(Un,w),Un.prototype.name="cancel";var Mn=function(t,e){this.Rc=[],this.Le=t,this.qe=e||null,this.Pb=this.nb=!1,this.za=void 0,this.ae=this.ge=this.gd=!1,this.Zc=0,this.w=null,this.hd=0};Mn.prototype.cancel=function(t){if(this.nb)this.za instanceof Mn&&this.za.cancel();else{if(this.w){var e=this.w;delete this.w,t?e.cancel(t):(e.hd--,0>=e.hd&&e.cancel())}this.Le?this.Le.call(this.qe,this):this.ae=!0,this.nb||Wn(this,new Bn)}},Mn.prototype.oe=function(t,e){this.gd=!1,Vn(this,t,e)};var Vn=function(t,e,n){t.nb=!0,t.za=n,t.Pb=!e,qn(t)},jn=function(t){if(t.nb){if(!t.ae)throw new Hn;t.ae=!1}};Mn.prototype.callback=function(t){jn(this),Fn(t),Vn(this,!0,t)};var Wn=function(t,e){jn(t),Fn(e),Vn(t,!1,e)},Fn=function(t){x(!(t instanceof Mn),"An execution sequence may not be initiated with a blocking Deferred.")},Kn=function(t,e,n,i){x(!t.ge,"Blocking Deferreds can not be re-used"),t.Rc.push([e,n,i]),t.nb&&qn(t)};Mn.prototype.then=function(t,e,n){var i,r,o=new mn(function(t,e){i=t,r=e});return Kn(this,i,function(t){t instanceof Bn?o.cancel():r(t)}),o.then(t,e,n)},pn(Mn);var Xn=function(t){return tt(t.Rc,function(t){return f(t[1])})},qn=function(t){if(t.Zc&&t.nb&&Xn(t)){var e=t.Zc,n=Yn[e];n&&(i.clearTimeout(n.Qb),delete Yn[e]),t.Zc=0}t.w&&(t.w.hd--,delete t.w),e=t.za;for(var o=n=!1;t.Rc.length&&!t.gd;){var a=t.Rc.shift(),s=a[0],u=a[1];if(a=a[2],s=t.Pb?u:s)try{var h=s.call(a||t.qe,e);r(h)&&(t.Pb=t.Pb&&(h==e||h instanceof Error),t.za=e=h),(vn(e)||"function"==typeof i.Promise&&e instanceof i.Promise)&&(o=!0,t.gd=!0)}catch(i){e=i,t.Pb=!0,Xn(t)||(n=!0)}}t.za=e,o&&(h=m(t.oe,t,!0),o=m(t.oe,t,!1),e instanceof Mn?(Kn(e,h,o),e.ge=!0):e.then(h,o)),n&&(e=new Gn(e),Yn[e.Qb]=e,t.Zc=e.Qb)},Hn=function(){w.call(this)};y(Hn,w),Hn.prototype.message="Deferred has already fired",Hn.prototype.name="AlreadyCalledError";var Bn=function(){w.call(this)};y(Bn,w),Bn.prototype.message="Deferred was canceled",Bn.prototype.name="CanceledError";var Gn=function(t){this.Qb=i.setTimeout(m(this.xg,this),0),this.ba=t};Gn.prototype.xg=function(){throw x(Yn[this.Qb],"Cannot throw an error that is not scheduled."),delete Yn[this.Qb],this.ba};var Yn={},zn=function(t){var e={},n=e.document||document,i=H(t),r=document.createElement("SCRIPT"),o={Te:r,jc:void 0},a=new Mn($n,o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Zn(r,!0),Wn(a,new Qn(1,"Timeout reached for loading script "+i))},u),o.jc=s),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Zn(r,e.Og||!1,s),a.callback(null))},r.onerror=function(){Zn(r,!0,s),Wn(a,new Qn(0,"Error while loading script "+i))},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),cn(r,o),function(t,e){var n=on(t);void 0!==n.HTMLScriptElement&&void 0!==n.Element&&x(t&&(t instanceof n.HTMLScriptElement||!(t instanceof n.Element)),"Argument is not a HTMLScriptElement (or a non-Element mock); got: %s",rn(t)),t.src=H(e)}(r,t),Jn(n).appendChild(r),a},Jn=function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement},$n=function(){if(this&&this.Te){var t=this.Te;t&&"SCRIPT"==t.tagName&&Zn(t,!0,this.jc)}},Zn=function(t,e,n){null!=n&&i.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)},Qn=function(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),w.call(this,n),this.code=t};y(Qn,w);var ti=function(t,e,n,i,r){this.reset(t,e,n,i,r)};ti.prototype.se=null;ti.prototype.reset=function(t,e,n,i,r){"number"==typeof r||0,i||b(),this.Vb=t,this.Zf=e,delete this.se},ti.prototype.Ue=function(t){this.Vb=t};var ei=function(t){this.Je=t,this.ze=this.kd=this.Vb=this.w=null},ni=function(t,e){this.name=t,this.value=e};ni.prototype.toString=function(){return this.name};var ii=new ni("SEVERE",1e3),ri=new ni("INFO",800),oi=new ni("CONFIG",700),ai=new ni("FINE",500);ei.prototype.getName=function(){return this.Je},ei.prototype.getParent=function(){return this.w},ei.prototype.Ue=function(t){this.Vb=t};var si=function(t){return t.Vb?t.Vb:t.w?si(t.w):(U("Root logger has no level set."),null)};ei.prototype.log=function(t,e,n){if(t.value>=si(this).value)for(f(e)&&(e=e()),t=new ti(t,String(e),this.Je),n&&(t.se=n),n="log:"+t.Zf,(e=i.console)&&e.timeStamp&&e.timeStamp(n),(e=i.msWriteProfilerMark)&&e(n),n=this;n;){var r=n,o=t;if(r.ze)for(var a=0;e=r.ze[a];a++)e(o);n=n.getParent()}},ei.prototype.info=function(t,e){this.log(ri,t,e)},ei.prototype.config=function(t,e){this.log(oi,t,e)};var ui={},hi=null,ci=function(t){var e;if(hi||(hi=new ei(""),ui[""]=hi,hi.Ue(oi)),!(e=ui[t])){e=new ei(t);var n=t.lastIndexOf("."),i=t.substr(n+1);(n=ci(t.substr(0,n))).kd||(n.kd={}),n.kd[i]=e,e.w=n,ui[t]=e}return e},li=function(){Jt.call(this),this.ga=new ae(this),this.kf=this,this.Kd=null};y(li,Jt),li.prototype[ie]=!0,(t=li.prototype).addEventListener=function(t,e,n,i){le(this,t,e,n,i)},t.removeEventListener=function(t,e,n,i){ve(this,t,e,n,i)},t.dispatchEvent=function(t){pi(this);var e=this.Kd;if(e)for(var n=[],i=1;e;e=e.Kd)n.push(e),x(1e3>++i,"infinite loop");if(e=this.kf,i=t.type||t,o(t))t=new te(t,e);else if(t instanceof te)t.target=t.target||e;else{var r=t;t=new te(i,e),gt(t,r)}if(r=!0,n)for(var a=n.length-1;!t.Wa&&0<=a;a--){var s=t.currentTarget=n[a];r=di(s,i,!0,t)&&r}if(t.Wa||(s=t.currentTarget=e,r=di(s,i,!0,t)&&r,t.Wa||(r=di(s,i,!1,t)&&r)),n)for(a=0;!t.Wa&&a<n.length;a++)s=t.currentTarget=n[a],r=di(s,i,!1,t)&&r;return r},t.lb=function(){if(li.Vc.lb.call(this),this.ga){var t,e=this.ga;for(t in e.I){for(var n=e.I[t],i=0;i<n.length;i++)0,oe(n[i]);delete e.I[t],e.kc--}}this.Kd=null},t.listen=function(t,e,n,i){return pi(this),this.ga.add(String(t),e,!1,n,i)};var fi=function(t,e,n,i,r){t.ga.add(String(e),n,!0,i,r)},di=function(t,e,n,i){if(!(e=t.ga.I[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Bb&&a.capture==n){var s=a.listener,u=a.wc||a.src;a.qc&&se(t.ga,a),r=!1!==s.call(u,i)&&r}}return r&&0!=i.Se};li.prototype.td=function(t,e,n,i){return this.ga.td(String(t),e,n,i)},li.prototype.hasListener=function(t,e){return this.ga.hasListener(r(t)?String(t):void 0,e)};var pi=function(t){x(t.ga,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},vi="StopIteration"in i?i.StopIteration:{message:"StopIteration",stack:""},mi=function(){};mi.prototype.next=function(){throw vi},mi.prototype.jf=function(){return this};var gi=function(t,e){t&&t.log(ai,e,void 0)},bi=function(t,e){this.ja={},this.B=[],this.gb=this.u=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else t&&this.addAll(t)};(t=bi.prototype).ha=function(){yi(this);for(var t=[],e=0;e<this.B.length;e++)t.push(this.ja[this.B[e]]);return t},t.va=function(){return yi(this),this.B.concat()},t.Jb=function(t){return wi(this.ja,t)},t.clear=function(){this.ja={},this.gb=this.u=this.B.length=0},t.remove=function(t){return!!wi(this.ja,t)&&(delete this.ja[t],this.u--,this.gb++,this.B.length>2*this.u&&yi(this),!0)};var yi=function(t){if(t.u!=t.B.length){for(var e=0,n=0;e<t.B.length;){var i=t.B[e];wi(t.ja,i)&&(t.B[n++]=i),e++}t.B.length=n}if(t.u!=t.B.length){var r={};for(n=e=0;e<t.B.length;)i=t.B[e],wi(r,i)||(t.B[n++]=i,r[i]=1),e++;t.B.length=n}};(t=bi.prototype).get=function(t,e){return wi(this.ja,t)?this.ja[t]:e},t.set=function(t,e){wi(this.ja,t)||(this.u++,this.B.push(t),this.gb++),this.ja[t]=e},t.addAll=function(t){if(t instanceof bi){var e=t.va();t=t.ha()}else e=ft(t),t=lt(t);for(var n=0;n<e.length;n++)this.set(e[n],t[n])},t.forEach=function(t,e){for(var n=this.va(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}},t.clone=function(){return new bi(this)},t.jf=function(t){yi(this);var e=0,n=this.gb,i=this,r=new mi;return r.next=function(){if(n!=i.gb)throw Error("The map has changed since the iterator was created");if(e>=i.B.length)throw vi;var r=i.B[e++];return t?r:i.ja[r]},r};var wi=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Ii=function(t){if(t.ha&&"function"==typeof t.ha)return t.ha();if(o(t))return t.split("");if(l(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}return lt(t)},Ti=function(t){if(t.va&&"function"==typeof t.va)return t.va();if(!t.ha||"function"!=typeof t.ha){if(l(t)||o(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}return ft(t)}},ki=function(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(l(t)||o(t))Z(t,e,n);else for(var i=Ti(t),r=Ii(t),a=r.length,s=0;s<a;s++)e.call(n,r[s],i&&i[s],t)},Ei=function(t,e,n){if(f(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)},Ai=function(t){var e=null;return new mn(function(n,i){-1==(e=Ei(function(){n(void 0)},t))&&i(Error("Failed to schedule timer."))}).g(function(t){throw i.clearTimeout(e),t})},Si=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,Ni=function(t){li.call(this),this.headers=new bi,this.ed=t||null,this.Ca=!1,this.dd=this.b=null,this.Ub=this.Ie=this.Fc="",this.Qa=this.zd=this.Ac=this.od=!1,this.Db=0,this.Wc=null,this.Pc="",this.$c=this.fg=this.df=!1};y(Ni,li);var Pi=Ni.prototype,Ci=ci("goog.net.XhrIo");Pi.R=Ci;var Ri=/^https?$/i,Oi=["POST","PUT"];Ni.prototype.send=function(t,e,n,r){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Fc+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Fc=t,this.Ub="",this.Ie=e,this.od=!1,this.Ca=!0,this.b=this.ed?this.ed.sc():Ve.sc(),this.dd=this.ed?je(this.ed):je(Ve),this.b.onreadystatechange=m(this.Pe,this),this.fg&&"onprogress"in this.b&&(this.b.onprogress=m(function(t){this.Oe(t,!0)},this),this.b.upload&&(this.b.upload.onprogress=m(this.Oe,this)));try{gi(this.R,Fi(this,"Opening Xhr")),this.zd=!0,this.b.open(e,String(t),!0),this.zd=!1}catch(t){return gi(this.R,Fi(this,"Error opening Xhr: "+t.message)),void this.ba(5,t)}t=n||"";var a=this.headers.clone();r&&ki(r,function(t,e){a.set(e,t)}),r=function(t){t:{for(var e=_i,n=t.length,i=o(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:o(t)?t.charAt(e):t[e]}(a.va()),n=i.FormData&&t instanceof i.FormData,!et(Oi,e)||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.b.setRequestHeader(e,t)},this),this.Pc&&(this.b.responseType=this.Pc),"withCredentials"in this.b&&this.b.withCredentials!==this.df&&(this.b.withCredentials=this.df);try{Vi(this),0<this.Db&&(this.$c=Di(this.b),gi(this.R,Fi(this,"Will abort after "+this.Db+"ms if incomplete, xhr2 "+this.$c)),this.$c?(this.b.timeout=this.Db,this.b.ontimeout=m(this.jc,this)):this.Wc=Ei(this.jc,this.Db,this)),gi(this.R,Fi(this,"Sending request")),this.Ac=!0,this.b.send(t),this.Ac=!1}catch(t){gi(this.R,Fi(this,"Send error: "+t.message)),this.ba(5,t)}};var Di=function(t){return Tt&&Lt(9)&&"number"==typeof t.timeout&&r(t.ontimeout)},_i=function(t){return"content-type"==t.toLowerCase()};Ni.prototype.jc=function(){void 0!==n&&this.b&&(this.Ub="Timed out after "+this.Db+"ms, aborting",gi(this.R,Fi(this,this.Ub)),this.dispatchEvent("timeout"),this.abort(8))},Ni.prototype.ba=function(t,e){this.Ca=!1,this.b&&(this.Qa=!0,this.b.abort(),this.Qa=!1),this.Ub=e,Li(this),Mi(this)};var Li=function(t){t.od||(t.od=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))};Ni.prototype.abort=function(){this.b&&this.Ca&&(gi(this.R,Fi(this,"Aborting")),this.Ca=!1,this.Qa=!0,this.b.abort(),this.Qa=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Mi(this))},Ni.prototype.lb=function(){this.b&&(this.Ca&&(this.Ca=!1,this.Qa=!0,this.b.abort(),this.Qa=!1),Mi(this,!0)),Ni.Vc.lb.call(this)},Ni.prototype.Pe=function(){this.isDisposed()||(this.zd||this.Ac||this.Qa?xi(this):this.bg())},Ni.prototype.bg=function(){xi(this)};var xi=function(t){if(t.Ca&&void 0!==n)if(t.dd[1]&&4==ji(t)&&2==Wi(t))gi(t.R,Fi(t,"Local request error detected and ignored"));else if(t.Ac&&4==ji(t))Ei(t.Pe,0,t);else if(t.dispatchEvent("readystatechange"),4==ji(t)){gi(t.R,Fi(t,"Request complete")),t.Ca=!1;try{var e,r=Wi(t);t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break t;default:o=!1}if(!(e=o)){var a;if(a=0===r){var s=String(t.Fc).match(Si)[1]||null;if(!s&&i.self&&i.self.location){var u=i.self.location.protocol;s=u.substr(0,u.length-1)}a=!Ri.test(s?s.toLowerCase():"")}e=a}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var h=2<ji(t)?t.b.statusText:""}catch(e){gi(t.R,"Can not get status: "+e.message),h=""}t.Ub=h+" ["+Wi(t)+"]",Li(t)}}finally{Mi(t)}}};Ni.prototype.Oe=function(t,e){x("progress"===t.type,"goog.net.EventType.PROGRESS is of the same type as raw XHR progress."),this.dispatchEvent(Ui(t,"progress")),this.dispatchEvent(Ui(t,e?"downloadprogress":"uploadprogress"))};var Ui=function(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}},Mi=function(t,e){if(t.b){Vi(t);var n=t.b,i=t.dd[0]?s:null;t.b=null,t.dd=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.R)&&t.log(ii,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}},Vi=function(t){t.b&&t.$c&&(t.b.ontimeout=null),t.Wc&&(i.clearTimeout(t.Wc),t.Wc=null)},ji=function(t){return t.b?t.b.readyState:0},Wi=function(t){try{return 2<ji(t)?t.b.status:-1}catch(t){return-1}};Ni.prototype.getResponse=function(){try{if(!this.b)return null;if("response"in this.b)return this.b.response;switch(this.Pc){case"":case"text":return this.b.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.b)return this.b.mozResponseArrayBuffer}var t=this.R;return t&&t.log(ii,"Response type "+this.Pc+" is not supported on this browser",void 0),null}catch(t){return gi(this.R,"Can not get response: "+t.message),null}},Ni.prototype.getResponseHeader=function(t){if(this.b&&4==ji(this))return null===(t=this.b.getResponseHeader(t))?void 0:t},Ni.prototype.getAllResponseHeaders=function(){return this.b&&4==ji(this)?this.b.getAllResponseHeaders():""};var Fi=function(t,e){return e+" ["+t.Ie+" "+t.Fc+" "+Wi(t)+"]"},Ki=function(t,e){if(this.pa=this.eb=this.qa="",this.vb=null,this.Pa=this.Ga="",this.da=this.Uf=!1,t instanceof Ki){this.da=r(e)?e:t.da,Xi(this,t.qa);var n=t.eb;Ji(this),this.eb=n,qi(this,t.pa),Hi(this,t.vb),Bi(this,t.Ga),Gi(this,t.ea.clone()),t=t.Pa,Ji(this),this.Pa=t}else t&&(n=String(t).match(Si))?(this.da=!!e,Xi(this,n[1]||"",!0),t=n[2]||"",Ji(this),this.eb=Qi(t),qi(this,n[3]||"",!0),Hi(this,n[4]),Bi(this,n[5]||"",!0),Gi(this,n[6]||"",!0),t=n[7]||"",Ji(this),this.Pa=Qi(t)):(this.da=!!e,this.ea=new sr(null,0,this.da))};Ki.prototype.toString=function(){var t=[],e=this.qa;e&&t.push(tr(e,nr,!0),":");var n=this.pa;return(n||"file"==e)&&(t.push("//"),(e=this.eb)&&t.push(tr(e,nr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.vb)&&t.push(":",String(n))),(n=this.Ga)&&(this.pa&&"/"!=n.charAt(0)&&t.push("/"),t.push(tr(n,"/"==n.charAt(0)?rr:ir,!0))),(n=this.ea.toString())&&t.push("?",n),(n=this.Pa)&&t.push("#",tr(n,ar)),t.join("")},Ki.prototype.resolve=function(t){var e=this.clone(),n=!!t.qa;if(n?Xi(e,t.qa):n=!!t.eb,n){var i=t.eb;Ji(e),e.eb=i}else n=!!t.pa;if(n?qi(e,t.pa):n=null!=t.vb,i=t.Ga,n)Hi(e,t.vb);else if(n=!!t.Ga){if("/"!=i.charAt(0))if(this.pa&&!this.Ga)i="/"+i;else{var r=e.Ga.lastIndexOf("/");-1!=r&&(i=e.Ga.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(O(r,"./")||O(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r}return n?Bi(e,i):n=""!==t.ea.toString(),n?Gi(e,t.ea.clone()):n=!!t.Pa,n&&(t=t.Pa,Ji(e),e.Pa=t),e},Ki.prototype.clone=function(){return new Ki(this)};var Xi=function(t,e,n){Ji(t),t.qa=n?Qi(e,!0):e,t.qa&&(t.qa=t.qa.replace(/:$/,""))},qi=function(t,e,n){Ji(t),t.pa=n?Qi(e,!0):e},Hi=function(t,e){if(Ji(t),e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.vb=e}else t.vb=null},Bi=function(t,e,n){Ji(t),t.Ga=n?Qi(e,!0):e},Gi=function(t,e,n){Ji(t),e instanceof sr?(t.ea=e,t.ea.Zd(t.da)):(n||(e=tr(e,or)),t.ea=new sr(e,0,t.da))},Yi=function(t,e,n){Ji(t),t.ea.set(e,n)},zi=function(t,e){return t.ea.get(e)};Ki.prototype.removeParameter=function(t){return Ji(this),this.ea.remove(t),this};var Ji=function(t){if(t.Uf)throw Error("Tried to modify a read-only Uri")};Ki.prototype.Zd=function(t){return this.da=t,this.ea&&this.ea.Zd(t),this};var $i=function(t){return t instanceof Ki?t.clone():new Ki(t,void 0)},Zi=function(t,e){var n=new Ki(null,void 0);return Xi(n,"https"),t&&qi(n,t),e&&Bi(n,e),n},Qi=function(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""},tr=function(t,e,n){return o(t)?(t=encodeURI(t).replace(e,er),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null},er=function(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)},nr=/[#\/\?@]/g,ir=/[\#\?:]/g,rr=/[\#\?]/g,or=/[\#\?@]/g,ar=/#/g,sr=function(t,e,n){this.u=this.s=null,this.V=t||null,this.da=!!n},ur=function(t){t.s||(t.s=new bi,t.u=0,t.V&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.V,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))},hr=function(t){var e=Ti(t);if(void 0===e)throw Error("Keys are undefined");var n=new sr(null,0,void 0);t=Ii(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];c(o)?cr(n,r,o):n.add(r,o)}return n};(t=sr.prototype).add=function(t,e){ur(this),this.V=null,t=this.ca(t);var n=this.s.get(t);return n||this.s.set(t,n=[]),n.push(e),this.u=M(this.u)+1,this},t.remove=function(t){return ur(this),t=this.ca(t),!!this.s.Jb(t)&&(this.V=null,this.u=M(this.u)-this.s.get(t).length,this.s.remove(t))},t.clear=function(){this.s=this.V=null,this.u=0},t.Jb=function(t){return ur(this),t=this.ca(t),this.s.Jb(t)},t.forEach=function(t,e){ur(this),this.s.forEach(function(n,i){Z(n,function(n){t.call(e,n,i,this)},this)},this)},t.va=function(){ur(this);for(var t=this.s.ha(),e=this.s.va(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.ha=function(t){ur(this);var e=[];if(o(t))this.Jb(t)&&(e=ot(e,this.s.get(this.ca(t))));else{t=this.s.ha();for(var n=0;n<t.length;n++)e=ot(e,t[n])}return e},t.set=function(t,e){return ur(this),this.V=null,t=this.ca(t),this.Jb(t)&&(this.u=M(this.u)-this.s.get(t).length),this.s.set(t,[e]),this.u=M(this.u)+1,this},t.get=function(t,e){return 0<(t=t?this.ha(t):[]).length?String(t[0]):e};var cr=function(t,e,n){t.remove(e),0<n.length&&(t.V=null,t.s.set(t.ca(e),at(n)),t.u=M(t.u)+n.length)};(t=sr.prototype).toString=function(){if(this.V)return this.V;if(!this.s)return"";for(var t=[],e=this.s.va(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.ha(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}}return this.V=t.join("&")},t.clone=function(){var t=new sr;return t.V=this.V,this.s&&(t.s=this.s.clone(),t.u=this.u),t},t.ca=function(t){return t=String(t),this.da&&(t=t.toLowerCase()),t},t.Zd=function(t){t&&!this.da&&(ur(this),this.V=null,this.s.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),cr(this,n,t))},this)),this.da=t},t.extend=function(t){for(var e=0;e<arguments.length;e++)ki(arguments[e],function(t,e){this.add(e,t)},this)};var lr,fr={Jg:{qd:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Vd:"https://securetoken.googleapis.com/v1/token",id:"p"},Kg:{qd:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Vd:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},Lg:{qd:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Vd:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}},dr=function(t){for(var e in fr)if(fr[e].id===t)return{firebaseEndpoint:(t=fr[e]).qd,secureTokenEndpoint:t.Vd};return null};lr=dr("__EID__")?"__EID__":void 0;var pr=function(){var t=Rr();return Tt&&!!Ot&&11==Ot||/Edge\/\d+/.test(t)},vr=function(){return i.window&&i.window.location.href||""},mr=function(t,e){e=e||i.window;var n="about:blank";t&&(n=Se(Pe(t))),e.location.href=n},gr=function(t,e){var n,i=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?i.push(n):c(t[n])?pt(t[n],e[n])||i.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<gr(t[n],e[n]).length&&i.push(n):t[n]!==e[n]&&i.push(n):i.push(n);for(n in e)n in t||i.push(n);return i},br=function(t){return!!((t=(t||Rr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))},yr=function(t){t=t||i.window;try{t.close()}catch(t){}},wr=function(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<r?r:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),i&&(e.target=i,O(n,"crios/")&&(e.target="_blank")),"Firefox"==Nr(Rr())&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(i=e)||(i={}),t=window,e=n instanceof Ae?n:Pe(void 0!==n.href?n.href:String(n)),n=i.target||n.target,r=[],i)switch(s){case"width":case"height":case"top":case"left":r.push(s+"="+i[s]);break;case"target":case"noreferrer":break;default:r.push(s+"="+(i[s]?1:0))}var s=r.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&t.navigator&&t.navigator.standalone&&n&&"_self"!=n?(s=t.document.createElement("A"),void 0!==(r=on(s)).HTMLAnchorElement&&void 0!==r.Location&&void 0!==r.Element&&x(s&&(s instanceof r.HTMLAnchorElement||!(s instanceof r.Location||s instanceof r.Element)),"Argument is not a HTMLAnchorElement (or a non-Element mock); got: %s",rn(s)),e instanceof Ae||e instanceof Ae||(e=e.qb?e.ob():String(e),x(Ne.test(e))||(e="about:invalid#zClosurez"),e=Re(e)),s.href=Se(e),s.setAttribute("target",n),i.noreferrer&&s.setAttribute("rel","noreferrer"),(i=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,t,1),s.dispatchEvent(i),s={}):i.noreferrer?(s=t.open("",n,s),i=Se(e),s&&(Et&&O(i,";")&&(i="'"+i.replace(/'/g,"%27")+"'"),s.opener=null,t=K("b/12014412, meta tag with sanitized URL"),i='<META HTTP-EQUIV="refresh" content="0; url='+k(i)+'">',function(t,e,n){o(t)||L("Expected string but got %s: %s.",[u(t),t],e,Array.prototype.slice.call(arguments,2))}(W(t),"must provide justification"),x(!/^[\s\xa0]*$/.test(W(t)),"must provide non-empty justification"),s.document.write(function(t){return t instanceof sn&&t.constructor===sn&&t.ef===un?t.xa:(U("expected object of type SafeHtml, got '"+t+"' of type "+u(t)),"type_error:SafeHtml")}((new sn).Qf(i))),s.document.close())):s=t.open(Se(e),n,s),s)try{s.focus()}catch(t){}return s},Ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tr=function(){var t=null;return new mn(function(e){"complete"==i.document.readyState?e():(t=function(){e()},pe(window,"load",t))}).g(function(e){throw ve(window,"load",t),e})},kr=function(t){return t=t||Rr(),!("file:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))},Er=function(){var t=i.window;try{return!(!t||t==t.top)}catch(t){return!1}},Ar=function(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":"Browser"},Sr=function(){var t=Ar();return"ReactNative"===t||"Node"===t},Nr=function(t){var e=t.toLowerCase();return O(e,"opera/")||O(e,"opr/")||O(e,"opios/")?"Opera":O(e,"iemobile")?"IEMobile":O(e,"msie")||O(e,"trident/")?"IE":O(e,"edge/")?"Edge":O(e,"firefox/")?"Firefox":O(e,"silk/")?"Silk":O(e,"blackberry")?"Blackberry":O(e,"webos")?"Webos":!O(e,"safari/")||O(e,"chrome/")||O(e,"crios/")||O(e,"android")?!O(e,"chrome/")&&!O(e,"crios/")||O(e,"edge/")?O(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"},Pr={Eg:"FirebaseCore-web",Gg:"FirebaseUI-web"},Cr=function(t,e){e=e||[];var n,i=[],r={};for(n in Pr)r[Pr[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),("Browser"===(i=Ar())?Nr(Rr()):i)+"/JsCore/"+t+"/"+e.join(",")},Rr=function(){return i.navigator&&i.navigator.userAgent||""},Or=function(t,e){t=t.split("."),e=e||i;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e},Dr=function(){try{var t=i.localStorage,e=Wr();if(t)return t.setItem(e,"1"),t.removeItem(e),!pr()||!!i.indexedDB}catch(t){}return!1},_r=function(){return(Lr()||"chrome-extension:"===xr()||kr())&&!Sr()&&Dr()},Lr=function(){return"http:"===xr()||"https:"===xr()},xr=function(){return i.location&&i.location.protocol||null},Ur=function(t){return t=t||Rr(),!br(t)&&"Firefox"!=Nr(t)},Mr=function(t){return void 0===t?null:Oe(t)},Vr=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n},jr=function(t){if(null!==t)return JSON.parse(t)},Wr=function(t){return t||""+Math.floor(1e9*Math.random()).toString()},Fr=function(t){return t=t||Rr(),"Safari"!=Nr(t)&&!t.toLowerCase().match(/iphone|ipad|ipod/)},Kr=function(){var t=i.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null},Xr=function(){var t=i.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine},qr=function(t,e,n,i){if(t>e)throw Error("Short delay should be less than long delay!");this.tg=t,this.Yf=e,t=n||Rr(),i=i||Ar(),this.Tf=br(t)||"ReactNative"===i};qr.prototype.get=function(){return this.Tf?this.Yf:this.tg};var Hr,Br=function(){var t=i.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState},Gr={};try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Yr.abcd}catch(wt){Hr=!1}var zr=function(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n},Jr=function(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&zr(t,n,e[n])},$r=function(t){var e={};return Jr(e,t),e},Zr=function(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)zr(e,n,Zr(t[n]));return e},Qr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),to=["client_id","response_type","scope","redirect_uri","state"],eo={Fg:{Ec:"locale",Zb:500,Yb:600,providerId:"facebook.com",Td:to},Hg:{Ec:null,Zb:500,Yb:620,providerId:"github.com",Td:to},Ig:{Ec:"hl",Zb:515,Yb:680,providerId:"google.com",Td:to},Mg:{Ec:"lang",Zb:485,Yb:705,providerId:"twitter.com",Td:Qr}},no=function(t){for(var e in eo)if(eo[e].providerId==t)return eo[e];return null},io=function(t,e){this.code="auth/"+t,this.message=e||oo[t]||""};y(io,Error),io.prototype.G=function(){return{code:this.code,message:this.message}},io.prototype.toJSON=function(){return this.G()};var ro=function(t){var e=t&&t.code;return e?new io(e.substring(5),t.message):null},oo={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"The user's credential is no longer valid. The user must sign in again.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The SMS quota for this project has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ao=function(t,e,n,i,r){if(this.ma=t,this.W=e||null,this.Eb=n||null,this.Xd=i||null,this.ba=r||null,!this.Eb&&!this.ba)throw new io("invalid-auth-event");if(this.Eb&&this.ba)throw new io("invalid-auth-event");if(this.Eb&&!this.Xd)throw new io("invalid-auth-event")};ao.prototype.uc=function(){return this.Xd},ao.prototype.getError=function(){return this.ba},ao.prototype.G=function(){return{type:this.ma,eventId:this.W,urlResponse:this.Eb,sessionId:this.Xd,error:this.ba&&this.ba.G()}};var so=function(t){return(t=t||{}).type?new ao(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&ro(t.error)):null},uo=function(t){var e="unauthorized-domain",n=void 0,i=$i(t);t=i.pa,"chrome-extension"==(i=i.qa)?n=I("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=I("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",io.call(this,e,n)};y(uo,io);var ho=function(t){this.Wf=t.sub,b(),this.Mb=t.email||null,this.gg=t.provider_id||null,this.mf=!!t.is_anonymous||"anonymous"==this.gg};ho.prototype.getEmail=function(){return this.Mb},ho.prototype.isAnonymous=function(){return this.mf};var co=function(t,e){return t.then(function(t){if(t.idToken){t:{var n=t.idToken.split(".");if(3==n.length){for(var i=(4-(n=n[1]).length%4)%4,r=0;r<i;r++)n+=".";try{var o=JSON.parse(function(t){var e="";return jt(t,function(t){e+=String.fromCharCode(t)}),e}(n));if(o.sub&&o.iss&&o.aud&&o.exp){var a=new ho(o);break t}}catch(t){}}a=null}if(!a||e!=a.Wf)throw new io("user-mismatch");return t}throw new io("user-mismatch")}).g(function(t){throw t&&t.code&&"auth/user-not-found"==t.code?new io("user-mismatch"):t})},lo=function(t,e){if(e.idToken||e.accessToken)e.idToken&&zr(this,"idToken",e.idToken),e.accessToken&&zr(this,"accessToken",e.accessToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new io("internal-error","failed to construct a credential");zr(this,"accessToken",e.oauthToken),zr(this,"secret",e.oauthTokenSecret)}zr(this,"providerId",t)};lo.prototype.Ob=function(t){return ta(t,fo(this))},lo.prototype.Gc=function(t,e){var n=fo(this);return n.idToken=e,ea(t,n)},lo.prototype.Gd=function(t,e){var n=fo(this);return co(na(t,n),e)};var fo=function(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,{postBody:hr(e).toString(),requestUri:"http://localhost"}};lo.prototype.G=function(){var t={providerId:this.providerId};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),t};var po=function(t,e){this.jg=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.pe={},this.Ed=(no(t)||{}).Ec||null,this.nd=null};po.prototype.setCustomParameters=function(t){return this.pe=vt(t),this};var vo=function(t){po.call(this,t,to),this.Ud=[]};y(vo,po),vo.prototype.addScope=function(t){return et(this.Ud,t)||this.Ud.push(t),this},vo.prototype.xe=function(){return at(this.Ud)},vo.prototype.credential=function(t,e){if(!t&&!e)throw new io("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,{idToken:t||null,accessToken:e||null})};var mo=function(){vo.call(this,"facebook.com")};y(mo,vo),zr(mo,"PROVIDER_ID","facebook.com");var go=function(t){if(!t)throw new io("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new mo).credential(null,e)},bo=function(){vo.call(this,"github.com")};y(bo,vo),zr(bo,"PROVIDER_ID","github.com");var yo=function(t){if(!t)throw new io("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential(null,e)},wo=function(){vo.call(this,"google.com"),this.addScope("profile")};y(wo,vo),zr(wo,"PROVIDER_ID","google.com");var Io=function(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new wo).credential(n,e)},To=function(){po.call(this,"twitter.com",Qr)};y(To,po),zr(To,"PROVIDER_ID","twitter.com");var ko=function(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new io("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n)},Eo=function(t,e){this.Mb=t,this.Ld=e,zr(this,"providerId","password")};Eo.prototype.Ob=function(t){return Pa(t,Ea,{email:this.Mb,password:this.Ld})},Eo.prototype.Gc=function(t,e){return Pa(t,ba,{idToken:e,email:this.Mb,password:this.Ld})},Eo.prototype.Gd=function(t,e){return co(this.Ob(t),e)},Eo.prototype.G=function(){return{email:this.Mb,password:this.Ld}};var Ao=function(){Jr(this,{providerId:"password",isOAuthProvider:!1})};Jr(Ao,{PROVIDER_ID:"password"});var So=function(t){if(!(t.verificationId&&t.ad||t.ic&&t.phoneNumber))throw new io("internal-error");this.S=t,zr(this,"providerId","phone")};So.prototype.Ob=function(t){return t.verifyPhoneNumber(No(this))},So.prototype.Gc=function(t,e){var n=No(this);return n.idToken=e,Pa(t,Sa,n)},So.prototype.Gd=function(t,e){var n=No(this);return n.operation="REAUTH",t=Pa(t,Na,n),co(t,e)},So.prototype.G=function(){var t={providerId:"phone"};return this.S.verificationId&&(t.verificationId=this.S.verificationId),this.S.ad&&(t.verificationCode=this.S.ad),this.S.ic&&(t.temporaryProof=this.S.ic),this.S.phoneNumber&&(t.phoneNumber=this.S.phoneNumber),t};var No=function(t){return t.S.ic&&t.S.phoneNumber?{temporaryProof:t.S.ic,phoneNumber:t.S.phoneNumber}:{sessionInfo:t.S.verificationId,code:t.S.ad}},Po=function(t){try{this.qf=t||e.auth()}catch(t){throw new io("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})};Po.prototype.verifyPhoneNumber=function(t,e){var n=this.qf.f;return wn(e.verify()).then(function(i){if(!o(i))throw new io("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return Pa(n,ma,{phoneNumber:t,recaptchaToken:i});default:throw new io("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};var Co=function(t,e){if(!t)throw new io("missing-verification-id");if(!e)throw new io("missing-verification-code");return new So({verificationId:t,ad:e})};Jr(Po,{PROVIDER_ID:"phone"});var Ro=function(t){if(t.temporaryProof&&t.phoneNumber)return new So({ic:t.temporaryProof,phoneNumber:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret;t=t&&t.oauthIdToken;try{switch(e){case"google.com":return Io(t,n);case"facebook.com":return go(n);case"github.com":return yo(n);case"twitter.com":return ko(n,i);default:return new vo(e).credential(t,n)}}catch(t){return null}},Oo=function(t){if(!t.isOAuthProvider)throw new io("invalid-oauth-provider")},Do=function(t,e,n){io.call(this,t,n),(t=e||{}).email&&zr(this,"email",t.email),t.phoneNumber&&zr(this,"phoneNumber",t.phoneNumber),t.credential&&zr(this,"credential",t.credential)};y(Do,io),Do.prototype.G=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber);var e=this.credential&&this.credential.G();return e&&gt(t,e),t},Do.prototype.toJSON=function(){return this.G()};var _o=function(t){if(t.code){var e=t.code||"";0==e.indexOf("auth/")&&(e=e.substring(5));var n={credential:Ro(t)};if(t.email)n.email=t.email;else{if(!t.phoneNumber)return new io(e,t.message||void 0);n.phoneNumber=t.phoneNumber}return new Do(e,n,t.message)}return null},Lo=function(t){this.Dg=t};y(Lo,Me),Lo.prototype.sc=function(){return new this.Dg},Lo.prototype.Cd=function(){return{}};var xo,Uo=function(t,n,r){var o="Node"==Ar();if(!(o=i.XMLHttpRequest||o&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest))throw new io("internal-error","The XMLHttpRequest compatibility library was not found.");this.m=t,t=n||{},this.pg=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.qg=t.secureTokenTimeout||Mo,this.Qc=vt(t.secureTokenHeaders||Vo),this.Af=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.Bf=t.firebaseTimeout||jo,this.mb=vt(t.firebaseHeaders||Wo),r&&(this.mb["X-Client-Version"]=r,this.Qc["X-Client-Version"]=r),this.sf=new Ke,this.Cg=new Lo(o)},Mo=new qr(3e4,6e4),Vo={"Content-Type":"application/x-www-form-urlencoded"},jo=new qr(3e4,6e4),Wo={"Content-Type":"application/json"},Fo=function(t,e){e?t.mb["X-Firebase-Locale"]=e:delete t.mb["X-Firebase-Locale"]},Ko=function(t,e){e?(t.mb["X-Client-Version"]=e,t.Qc["X-Client-Version"]=e):(delete t.mb["X-Client-Version"],delete t.Qc["X-Client-Version"])},Xo=function(t,e,n,i,r,o,a){Xr()?(function(){var t=Rr();return!((t="Chrome"!=Nr(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Tt&&Ot&&!(9<Ot))}()?t=m(t.sg,t):(xo||(xo=new mn(function(t,e){Bo(t,e)})),t=m(t.rg,t)),t(e,n,i,r,o,a)):n&&n(null)};Uo.prototype.sg=function(t,e,n,i,r,o){var a="Node"==Ar(),s=Sr()?a?new Ni(this.Cg):new Ni:new Ni(this.sf);if(o){s.Db=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}s.listen("complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.b?t.b.responseText:""}catch(e){return gi(t.R,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)}),fi(s,"ready",function(){u&&clearTimeout(u),this.Ma||(this.Ma=!0,this.lb())}),fi(s,"timeout",function(){u&&clearTimeout(u),this.Ma||(this.Ma=!0,this.lb()),e&&e(null)}),s.send(t,n,i,r)};var qo=K("https://apis.google.com/js/client.js?onload=%{onload}"),Ho="__fcb"+Math.floor(1e6*Math.random()).toString(),Bo=function(t,e){if(((window.gapi||{}).client||{}).request)t();else{i[Ho]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))};var n=B(qo,{onload:Ho});!function(t,e){Kn(t,null,e,void 0)}(zn(n),function(){e(Error("CORS_UNSUPPORTED"))})}};Uo.prototype.rg=function(t,e,n,i,r){var o=this;xo.then(function(){window.gapi.client.setApiKey(o.m);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).g(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})};var Go=function(t){if(!Ee.test(t.email))throw new io("invalid-email")},Yo=function(t){"email"in t&&Go(t)},zo=function(t){if(!t.idToken)throw new io("internal-error")},Jo=function(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new io("internal-error")}else{if(!t.sessionInfo)throw new io("missing-verification-id");if(!t.code)throw new io("missing-verification-code")}};Uo.prototype.signInAnonymously=function(){return Pa(this,ya,{})},Uo.prototype.updateEmail=function(t,e){return Pa(this,ga,{idToken:t,email:e})},Uo.prototype.updatePassword=function(t,e){return Pa(this,ba,{idToken:t,password:e})};var $o={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};Uo.prototype.updateProfile=function(t,e){var n={idToken:t},i=[];return ct($o,function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)}),i.length&&(n.deleteAttribute=i),Pa(this,ga,n)},Uo.prototype.sendPasswordResetEmail=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),Pa(this,fa,t)},Uo.prototype.sendEmailVerification=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Pa(this,la,t)},Uo.prototype.verifyPhoneNumber=function(t){return Pa(this,Aa,t)};var Zo=function(t){if(!t.requestUri||!t.sessionId&&!t.postBody)throw new io("internal-error")},Qo=function(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=_o(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=_o(t)):"EMAIL_EXISTS"==t.errorMessage&&(t.code="email-already-in-use",e=_o(t)),e)throw e;if(!t.idToken)throw new io("internal-error")},ta=function(t,e){return e.returnIdpCredential=!0,Pa(t,wa,e)},ea=function(t,e){return e.returnIdpCredential=!0,Pa(t,Ta,e)},na=function(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Pa(t,Ia,e)},ia=function(t){if(!t.oobCode)throw new io("invalid-action-code")};Uo.prototype.confirmPasswordReset=function(t,e){return Pa(this,va,{oobCode:t,newPassword:e})},Uo.prototype.checkActionCode=function(t){return Pa(this,oa,{oobCode:t})},Uo.prototype.applyActionCode=function(t){return Pa(this,ra,{oobCode:t})};var ra={endpoint:"setAccountInfo",D:ia,cb:"email"},oa={endpoint:"resetPassword",D:ia,$:function(t){if(!t.email||!t.requestType)throw new io("internal-error")}},aa={endpoint:"signupNewUser",D:function(t){if(Go(t),!t.password)throw new io("weak-password")},$:zo,Aa:!0},sa={endpoint:"createAuthUri"},ua={endpoint:"deleteAccount",ab:["idToken"]},ha={endpoint:"setAccountInfo",ab:["idToken","deleteProvider"],D:function(t){if(!c(t.deleteProvider))throw new io("internal-error")}},ca={endpoint:"getAccountInfo"},la={endpoint:"getOobConfirmationCode",ab:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new io("internal-error")},cb:"email"},fa={endpoint:"getOobConfirmationCode",ab:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new io("internal-error");Go(t)},cb:"email"},da={he:!0,endpoint:"getProjectConfig",Ce:"GET"},pa={he:!0,endpoint:"getRecaptchaParam",Ce:"GET",$:function(t){if(!t.recaptchaSiteKey)throw new io("internal-error")}},va={endpoint:"resetPassword",D:ia,cb:"email"},ma={endpoint:"sendVerificationCode",ab:["phoneNumber","recaptchaToken"],cb:"sessionInfo"},ga={endpoint:"setAccountInfo",ab:["idToken"],D:Yo,Aa:!0},ba={endpoint:"setAccountInfo",ab:["idToken"],D:function(t){if(Yo(t),!t.password)throw new io("weak-password")},$:zo,Aa:!0},ya={endpoint:"signupNewUser",$:zo,Aa:!0},wa={endpoint:"verifyAssertion",D:Zo,$:Qo,Aa:!0},Ia={endpoint:"verifyAssertion",D:Zo,$:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new io("user-not-found");if(!t.idToken)throw new io("internal-error")},Aa:!0},Ta={endpoint:"verifyAssertion",D:function(t){if(Zo(t),!t.idToken)throw new io("internal-error")},$:Qo,Aa:!0},ka={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new io("invalid-custom-token")},$:zo,Aa:!0},Ea={endpoint:"verifyPassword",D:function(t){if(Go(t),!t.password)throw new io("wrong-password")},$:zo,Aa:!0},Aa={endpoint:"verifyPhoneNumber",D:Jo,$:zo},Sa={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new io("internal-error");Jo(t)},$:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",_o(t);zo(t)}},Na={vf:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Jo,$:zo},Pa=function(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(void 0===i||null===i||""===i)return!1}return!0}(n,e.ab))return In(new io("internal-error"));var i,r=e.Ce||"POST";return wn(n).then(e.D).then(function(){return e.Aa&&(n.returnSecureToken=!0),function(t,e,n,i,r,o){var a=$i(t.Af+e);Yi(a,"key",t.m),o&&Yi(a,"cb",b().toString());var s="GET"==n;if(s)for(var u in i)i.hasOwnProperty(u)&&Yi(a,u,i[u]);return new mn(function(e,o){Xo(t,a.toString(),function(t){t?t.error?o(Ca(t,r||{})):e(t):o(new io("network-request-failed"))},n,s?void 0:Oe(Vr(i)),t.mb,t.Bf.get())})}(t,e.endpoint,r,n,e.vf,e.he||!1)}).then(function(t){return i=t}).then(e.$).then(function(){if(!e.cb)return i;if(!(e.cb in i))throw new io("internal-error");return i[e.cb]})},Ca=function(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=i[n]?new io(i[n]):null)return n;for(var r in n=t.error&&t.error.message||"",gt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new io(i[r],e);return!e&&t&&(e=Mr(t)),new io("internal-error",e)},Ra=function(t){this.Ag=t,this.zc=null,this.Id=Oa(this)},Oa=function(t){return Ua().then(function(){return new mn(function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.Ag,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(i){t.zc=i,t.zc.restyle({setHideOnLeave:!1});var r=setTimeout(function(){n(Error("Network Error"))},La.get()),o=function(){clearTimeout(r),e()};i.ping(o).then(o,function(){n(Error("Network Error"))})})})})};Ra.prototype.sendMessage=function(t){var e=this;return this.Id.then(function(){return new mn(function(n){e.zc.send(t.type,t,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})};var Da=K("https://apis.google.com/js/api.js?onload=%{onload}"),_a=new qr(3e4,6e4),La=new qr(5e3,15e3),xa=null,Ua=function(){return xa||(xa=new mn(function(t,e){if(Xr()){var n=function(){Kr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:_a.get()})};if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();i[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},r=B(Da,{onload:r}),wn(zn(r)).g(function(){e(Error("Network Error"))})}}else e(Error("Network Error"))}).g(function(t){throw xa=null,t}))},Ma=function(t,e,n){this.A=t,this.m=e,this.o=n,this.fb=null,this.Ba=Zi(this.A,"/__/auth/iframe"),Yi(this.Ba,"apiKey",this.m),Yi(this.Ba,"appName",this.o),this.O=null,this.M=[]};Ma.prototype.$d=function(t){return this.fb=t,this},Ma.prototype.Yd=function(t){return this.O=t,this},Ma.prototype.toString=function(){return this.fb?Yi(this.Ba,"v",this.fb):this.Ba.removeParameter("v"),this.O?Yi(this.Ba,"eid",this.O):this.Ba.removeParameter("eid"),this.M.length?Yi(this.Ba,"fw",this.M.join(",")):this.Ba.removeParameter("fw"),this.Ba.toString()};var Va=function(t,e,n,i,r){this.A=t,this.m=e,this.o=n,this.pf=i,this.fb=this.W=this.Sd=null,this.xb=r,this.O=null};Va.prototype.$d=function(t){return this.fb=t,this},Va.prototype.Yd=function(t){return this.O=t,this},Va.prototype.toString=function(){var t=Zi(this.A,"/__/auth/handler");if(Yi(t,"apiKey",this.m),Yi(t,"appName",this.o),Yi(t,"authType",this.pf),this.xb.isOAuthProvider){var n=this.xb;try{var i=e.app(this.o).auth().ia}catch(t){i=null}for(var r in n.nd=i,Yi(t,"providerId",this.xb.providerId),n=this.xb,i=Vr(n.pe))i[r]=i[r].toString();r=n.jg,i=vt(i);for(var o=0;o<r.length;o++){var a=r[o];a in i&&delete i[a]}n.Ed&&n.nd&&!i[n.Ed]&&(i[n.Ed]=n.nd),dt(i)||Yi(t,"customParameters",Mr(i))}if("function"==typeof this.xb.xe&&((n=this.xb.xe()).length&&Yi(t,"scopes",n.join(","))),this.Sd?Yi(t,"redirectUrl",this.Sd):t.removeParameter("redirectUrl"),this.W?Yi(t,"eventId",this.W):t.removeParameter("eventId"),this.fb?Yi(t,"v",this.fb):t.removeParameter("v"),this.nc)for(var s in this.nc)this.nc.hasOwnProperty(s)&&!zi(t,s)&&Yi(t,s,this.nc[s]);return this.O?Yi(t,"eid",this.O):t.removeParameter("eid"),(s=ja(this.o)).length&&Yi(t,"fw",s.join(",")),t.toString()};var ja=function(t){try{return at(e.app(t).auth().M)}catch(t){return[]}},Wa=function(t,e,n,i,r){this.A=t,this.m=e,this.o=n,this.La=i||null,this.O=r||null,this.f=this.yd=this.ve=null,this.ta=[],this.Bc=this.wa=null},Fa=function(t){var e=vr();return function(t){return Pa(t,da,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=$i(e),i=n.qa;n=n.pa;for(var r=0;r<t.length;r++){var o=t[r],a=n,s=i;if(0==o.indexOf("chrome-extension://")?a=$i(o).pa==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Ir.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new uo(vr())})};(t=Wa.prototype).Sb=function(){if(this.Bc)return this.Bc;var t=this;return this.Bc=Tr().then(function(){if(!t.yd){var e=t.La,n=t.O,i=ja(t.o);(e=new Ma(t.A,t.m,t.o).$d(e).Yd(n)).M=at(i||[]),t.yd=e.toString()}t.yc=new Ra(t.yd),qa(t)})},t.fc=function(t,e,n){var i=new io("popup-closed-by-user"),r=new io("web-storage-unsupported"),o=this,a=!1;return this.Ra().then(function(){Ha(o).then(function(n){n||(t&&yr(t),e(r),a=!0)})}).g(function(){}).then(function(){if(!a)return function(t){return new mn(function(e){var n=function(){Ai(2e3).then(function(){if(t&&!t.closed)return n();e()})};return n()})}(t)}).then(function(){if(!a)return Ai(n).then(function(){e(i)})})},t.Ve=function(){var t=Rr();return!Ur(t)&&!Fr(t)},t.Ae=function(){return!1},t.$b=function(t,e,n,i,r,o,a){if(!t)return In(new io("popup-blocked"));if(a&&!Ur())return this.Ra().g(function(e){yr(t),r(e)}),i(),wn();this.wa||(this.wa=Fa(Ka(this)));var s=this;return this.wa.then(function(){var e=s.Ra().g(function(e){throw yr(t),r(e),e});return i(),e}).then(function(){if(Oo(n),!a){var i=Xa(s.A,s.m,s.o,e,n,null,o,s.La,void 0,s.O);mr(i,t)}}).g(function(t){throw"auth/network-request-failed"==t.code&&(s.wa=null),t})};var Ka=function(t){return t.f||(t.ve=t.La?Cr(t.La,ja(t.o)):null,t.f=new Uo(t.m,dr(t.O),t.ve)),t.f};Wa.prototype.ac=function(t,e,n){this.wa||(this.wa=Fa(Ka(this)));var i=this;return this.wa.then(function(){Oo(e);var r=Xa(i.A,i.m,i.o,t,e,vr(),n,i.La,void 0,i.O);mr(r)}).g(function(t){throw"auth/network-request-failed"==t.code&&(i.wa=null),t})},Wa.prototype.Ra=function(){var t=this;return this.Sb().then(function(){return t.yc.Id}).g(function(){throw t.wa=null,new io("network-request-failed")})},Wa.prototype.Ze=function(){return!0};var Xa=function(t,e,n,i,r,o,a,s,u,h){return(t=new Va(t,e,n,i,r)).Sd=o,t.W=a,(o=t.$d(s)).nc=vt(u||null),o.Yd(h).toString()},qa=function(t){if(!t.yc)throw Error("IfcHandler must be initialized!");!function(t,e){t.Id.then(function(){t.zc.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.yc,function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=so(e.authEvent),n=0;n<t.ta.length;n++)i=t.ta[n](e)||i;return(n={}).status=i?"ACK":"ERROR",wn(n)}return n.status="ERROR",wn(n)})},Ha=function(t){var e={type:"webStorageSupport"};return t.Sb().then(function(){return t.yc.sendMessage(e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})};Wa.prototype.ib=function(t){this.ta.push(t)},Wa.prototype.dc=function(t){rt(this.ta,function(e){return e==t})};var Ba=function(t,e,n,r,o,a){if(zr(this,"type","recaptcha"),this.bd=this.Ib=null,this.Kb=!1,this.ne=e,this.Fa=n||{theme:"light",type:"image"},this.J=[],this.Fa.sitekey)throw new io("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.Cc="invisible"===this.Fa.size,!hn(e)||!this.Cc&&hn(e).hasChildNodes())throw new io("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.f=new Uo(t,a||null,o||null),this.Gf=r||function(){return null};var s=this;this.Xc=[];var u=this.Fa.callback;this.Fa.callback=function(t){if(s.Lb(t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Or(u,i);"function"==typeof e&&e(t)}};var h=this.Fa["expired-callback"];this.Fa["expired-callback"]=function(){if(s.Lb(null),"function"==typeof h)h();else if("string"==typeof h){var t=Or(h,i);"function"==typeof t&&t()}}};Ba.prototype.Lb=function(t){for(var e=0;e<this.Xc.length;e++)try{this.Xc[e](t)}catch(t){}};Ba.prototype.c=function(t){var e=this;return this.J.push(t),kn(t,function(){nt(e.J,t)}),t},Ba.prototype.Tb=function(){var t=this;return this.Ib?this.Ib:this.Ib=this.c(wn().then(function(){if(Lr())return Tr();throw new io("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return za($a(),t.Gf())}).then(function(){return Pa(t.f,pa,{})}).then(function(e){t.Fa.sitekey=e.recaptchaSiteKey}).g(function(e){throw t.Ib=null,e}))},Ba.prototype.render=function(){Ga(this);var t=this;return this.c(this.Tb().then(function(){if(null===t.bd){var e=t.ne;if(!t.Cc){var n=hn(e);e=function(t,e,n){var i=arguments,r=document,a=String(i[0]),s=i[1];if(!an&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',k(s.name),'"'),s.type){a.push(' type="',k(s.type),'"');var u={};gt(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=r.createElement(a),s&&(o(s)?a.className=s:c(s)?a.className=s.join(" "):cn(a,s)),2<i.length&&fn(r,a,i),a}("DIV"),n.appendChild(e)}t.bd=grecaptcha.render(e,t.Fa)}return t.bd}))},Ba.prototype.verify=function(){Ga(this);var t=this;return this.c(this.render().then(function(e){return new mn(function(n){var i=grecaptcha.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){rt(t.Xc,function(t){return t==e})}(t,r),n(e))};t.Xc.push(r),t.Cc&&grecaptcha.execute(t.bd)}})}))};var Ga=function(t){if(t.Kb)throw new io("internal-error","RecaptchaVerifier instance has been destroyed.")};Ba.prototype.clear=function(){Ga(this),this.Kb=!0,$a().ld--;for(var t=0;t<this.J.length;t++)this.J[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.Cc){t=hn(this.ne);for(var e;e=t.firstChild;)t.removeChild(e)}};var Ya=K("https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),za=function(t,e){return new mn(function(n,r){if(Xr())if(!i.grecaptcha||e!==t.Be&&!t.ld){i[t.jd]=function(){if(i.grecaptcha){t.Be=e;var o=i.grecaptcha.render;i.grecaptcha.render=function(e,n){return e=o(e,n),t.ld++,e},n()}else r(new io("internal-error"));delete i[t.jd]};var o=B(Ya,{onload:t.jd,hl:e||""});wn(zn(o)).g(function(){r(new io("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else n();else r(new io("network-request-failed"))})},Ja=null,$a=function(){return Ja||(Ja=new function(){this.ld=i.grecaptcha?1/0:0,this.Be=null,this.jd="__rcb"+Math.floor(1e6*Math.random()).toString()}),Ja},Za=function(t,n,i){try{this.i=i||e.app()}catch(t){throw new io("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.i.options||!this.i.options.apiKey)throw new io("invalid-api-key");i=this.i.options.apiKey;var r=this,o=null;try{o=at(this.i.auth().M)}catch(t){}o=e.SDK_VERSION?Cr(e.SDK_VERSION,o):null,Ba.call(this,i,t,n,function(){try{var t=r.i.auth().ia}catch(e){t=null}return t},o,dr(lr))};y(Za,Ba);var Qa=function(t){if(this.F=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.F)throw new io("internal-error","The React Native compatibility library was not found.")};(t=Qa.prototype).get=function(t){return wn(this.F.getItem(t)).then(function(t){return t&&jr(t)})},t.set=function(t,e){return wn(this.F.setItem(t,Mr(e)))},t.remove=function(t){return wn(this.F.removeItem(t))},t.jb=function(){},t.$a=function(){};var ts=function(){this.F={}};(t=ts.prototype).get=function(t){return wn(this.F[t])},t.set=function(t,e){return this.F[t]=e,wn()},t.remove=function(t){return delete this.F[t],wn()},t.jb=function(){},t.$a=function(){};var es=function(){if(!ns()){if("Node"==Ar())throw new io("internal-error","The LocalStorage compatibility library was not found.");throw new io("web-storage-unsupported")}this.F=i.localStorage||e.INTERNAL.node.localStorage},ns=function(){var t="Node"==Ar();if(!(t=i.localStorage||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}};(t=es.prototype).get=function(t){var e=this;return wn().then(function(){var n=e.F.getItem(t);return jr(n)})},t.set=function(t,e){var n=this;return wn().then(function(){var i=Mr(e);null===i?n.remove(t):n.F.setItem(t,i)})},t.remove=function(t){var e=this;return wn().then(function(){e.F.removeItem(t)})},t.jb=function(t){i.window&&le(i.window,"storage",t)},t.$a=function(t){i.window&&ve(i.window,"storage",t)};var is=function(){this.F={}};(t=is.prototype).get=function(){return wn(null)},t.set=function(){return wn()},t.remove=function(){return wn()},t.jb=function(){},t.$a=function(){};var rs=function(){if(!os()){if("Node"==Ar())throw new io("internal-error","The SessionStorage compatibility library was not found.");throw new io("web-storage-unsupported")}this.F=i.sessionStorage||e.INTERNAL.node.sessionStorage},os=function(){var t="Node"==Ar();if(!(t=i.sessionStorage||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}};(t=rs.prototype).get=function(t){var e=this;return wn().then(function(){var n=e.F.getItem(t);return jr(n)})},t.set=function(t,e){var n=this;return wn().then(function(){var i=Mr(e);null===i?n.remove(t):n.F.setItem(t,i)})},t.remove=function(t){var e=this;return wn().then(function(){e.F.removeItem(t)})},t.jb=function(){},t.$a=function(){};var as,ss=function(t,e,n,r,o,a){if(!window.indexedDB)throw new io("web-storage-unsupported");this.wf=t,this.Hd=e,this.md=n,this.cf=r,this.gb=o,this.Y={},this.gc=[],this.Wb=0,this.Of=a||i.indexedDB},us=function(t){return t.Fe||(t.Fe=function(t){return new mn(function(e,n){var i=t.Of.open(t.wf,t.gb);i.onerror=function(t){n(Error(t.target.errorCode))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore(t.Hd,{keyPath:t.md})}catch(t){n(t)}},i.onsuccess=function(t){e(t.target.result)}})}(t)),t.Fe},hs=function(t,e){return e.objectStore(t.Hd)},cs=function(t,e,n){return e.transaction([t.Hd],n?"readwrite":"readonly")},ls=function(t){return new mn(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(Error(t.target.errorCode))}})};(t=ss.prototype).set=function(t,e){var n,i=!1,r=this;return kn(us(this).then(function(e){return e=hs(r,cs(r,n=e,!0)),ls(e.get(t))}).then(function(o){var a=hs(r,cs(r,n,!0));return o?(o.value=e,ls(a.put(o))):(r.Wb++,i=!0,(o={})[r.md]=t,o[r.cf]=e,ls(a.add(o)))}).then(function(){r.Y[t]=e}),function(){i&&r.Wb--})},t.get=function(t){var e=this;return us(this).then(function(n){return ls(hs(e,cs(e,n,!1)).get(t))}).then(function(t){return t&&t.value})},t.remove=function(t){var e=!1,n=this;return kn(us(this).then(function(i){return e=!0,n.Wb++,ls(hs(n,cs(n,i,!0)).delete(t))}).then(function(){delete n.Y[t]}),function(){e&&n.Wb--})},t.wg=function(){var t=this;return us(this).then(function(e){var n=hs(t,cs(t,e,!1));return n.getAll?ls(n.getAll()):new mn(function(t,e){var i=[],r=n.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){e(Error(t.target.errorCode))}})}).then(function(e){var n={},i=[];if(0==t.Wb){for(i=0;i<e.length;i++)n[e[i][t.md]]=e[i][t.cf];i=gr(t.Y,n),t.Y=n}return i})},t.jb=function(t){0==this.gc.length&&this.be(),this.gc.push(t)},t.$a=function(t){rt(this.gc,function(e){return e==t}),0==this.gc.length&&this.Tc()},t.be=function(){var t=this;this.Tc();var e=function(){return t.Nd=Ai(800).then(m(t.wg,t)).then(function(e){0<e.length&&Z(t.gc,function(t){t(e)})}).then(e).g(function(t){"STOP_EVENT"!=t.message&&e()}),t.Nd};e()},t.Tc=function(){this.Nd&&this.Nd.cancel("STOP_EVENT")};var fs,ds={C:es,de:rs},ps={C:es,de:rs},vs={C:Qa,de:is},ms=function(t){this.Bd(t)};ms.prototype.Bd=function(t){var e=t.url;if(void 0===e)throw new io("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new io("invalid-continue-uri");this.rf=e,this.fe=this.oc=null,this.Ge=!1;var n=t.android;if(n&&"object"==typeof n){e=n.packageName;var i=n.installApp;if(n=n.minimumVersion,"string"==typeof e&&e.length){if(this.oc=e,void 0!==i&&"boolean"!=typeof i)throw new io("argument-error","installApp property must be a boolean when specified.");if(this.Ge=!!i,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new io("argument-error","minimumVersion property must be a non empty string when specified.");this.fe=n||null}else{if(void 0!==e)throw new io("argument-error","packageName property must be a non empty string when specified.");if(void 0!==i||void 0!==n)throw new io("missing-android-pkg-name")}}else if(void 0!==n)throw new io("argument-error","android property must be a non null object when specified.");if(this.xd=null,(e=t.iOS)&&"object"==typeof e){if("string"==typeof(e=e.bundleId)&&e.length)this.xd=e;else if(void 0!==e)throw new io("argument-error","bundleId property must be a non empty string when specified.")}else if(void 0!==e)throw new io("argument-error","iOS property must be a non null object when specified.");if(void 0!==(t=t.handleCodeInApp)&&"boolean"!=typeof t)throw new io("argument-error","handleCodeInApp property must be a boolean when specified.");if((this.le=!!t)&&!this.xd&&!this.oc)throw new io("argument-error","handleCodeInApp property can't be true when no mobile application is provided.")};var gs=function(t){var e={};for(var n in e.continueUrl=t.rf,e.canHandleCodeInApp=t.le,(e.androidPackageName=t.oc)&&(e.androidMinimumVersion=t.fe,e.androidInstallApp=t.Ge),e.iOSBundleId=t.xd,e)null===e[n]&&delete e[n];return e},bs=function(t,e){this.uf=e,zr(this,"verificationId",t)};bs.prototype.confirm=function(t){return t=Co(this.verificationId,t),this.uf(t)};var ys=function(t,e,n,i){return new Po(t).verifyPhoneNumber(e,n).then(function(t){return new bs(t,i)})},ws=function(t,e,n,i,r,o){if(this.dg=t,this.lg=e,this.Hf=n,this.Hc=i,this.ee=r,this.mg=!!o,this.ub=null,this.Sa=this.Hc,this.ee<this.Hc)throw Error("Proactive refresh lower bound greater than upper bound!")};ws.prototype.start=function(){this.Sa=this.Hc,Is(this,!0)};var Is=function(t,e){t.stop(),t.ub=Ai(function(t,e){return e?(t.Sa=t.Hc,t.Hf()):(e=t.Sa,t.Sa*=2,t.Sa>t.ee&&(t.Sa=t.ee),e)}(t,e)).then(function(){return t.mg?wn():function(){var t=i.document,e=null;return Br()||!t?wn():new mn(function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).g(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.dg()}).then(function(){Is(t,!0)}).g(function(e){t.lg(e)&&Is(t,!1)})};ws.prototype.stop=function(){this.ub&&(this.ub.cancel(),this.ub=null)};var Ts=function(t){var e={};e["facebook.com"]=Es,e["google.com"]=Ss,e["github.com"]=As,e["twitter.com"]=Ns;var n=t&&t.providerId;return n?e[n]?new e[n](t):new ks(t):null},ks=function(t){var e=jr(t.rawUserInfo||"{}");if(!(t=t.providerId))throw Error("Invalid additional user info!");zr(this,"profile",Zr(e||{})),zr(this,"providerId",t)},Es=function(t){if(ks.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider id!")};y(Es,ks);var As=function(t){if(ks.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider id!");zr(this,"username",this.profile&&this.profile.login||null)};y(As,ks);var Ss=function(t){if(ks.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider id!")};y(Ss,ks);var Ns=function(t){if(ks.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider id!");zr(this,"username",t.screenName||null)};y(Ns,ks);var Ps,Cs={LOCAL:"local",NONE:"none",SESSION:"session"},Rs=function(t,e,n,i){this.Ke=t,this.Wd=e,this.ng=n,this.ec=i,this.X={},fs||(fs=new function(){this.re={Browser:ds,Node:ps,ReactNative:vs}[Ar()]}),t=fs;try{if(pr()){as||(as=new ss("firebaseLocalStorageDb","firebaseLocalStorage","fbase_key","value",1));var r=as}else r=new t.re.C;this.Qe=r}catch(t){this.Qe=new ts,this.ec=!0}try{this.Ye=new t.re.de}catch(t){this.Ye=new ts}this.Nf=new ts,this.ce=m(this.We,this),this.Y={}},Os=function(){return Ps||(Ps=new Rs("firebase",":",!(Fr(Rr())||!Er()),Ur())),Ps},Ds=function(t,e){switch(e){case"session":return t.Ye;case"none":return t.Nf;default:return t.Qe}};(t=Rs.prototype).ca=function(t,e){return this.Ke+this.Wd+t.name+(e?this.Wd+e:"")},t.get=function(t,e){return Ds(this,t.C).get(this.ca(t,e))},t.remove=function(t,e){return e=this.ca(t,e),"local"!=t.C||this.ec||(this.Y[e]=null),Ds(this,t.C).remove(e)},t.set=function(t,e,n){var i=this.ca(t,n),r=this,o=Ds(this,t.C);return o.set(i,e).then(function(){return o.get(i)}).then(function(e){"local"!=t.C||r.ec||(r.Y[i]=e)})},t.addListener=function(t,e,n){t=this.ca(t,e),this.ec||(this.Y[t]=i.localStorage.getItem(t)),dt(this.X)&&this.be(),this.X[t]||(this.X[t]=[]),this.X[t].push(n)},t.removeListener=function(t,e,n){t=this.ca(t,e),this.X[t]&&(rt(this.X[t],function(t){return t==n}),0==this.X[t].length&&delete this.X[t]),dt(this.X)&&this.Tc()},t.be=function(){Ds(this,"local").jb(this.ce),this.ec||pr()||_s(this)};var _s=function(t){Ls(t),t.Fd=setInterval(function(){for(var e in t.X){var n=i.localStorage.getItem(e),r=t.Y[e];n!=r&&(t.Y[e]=n,n=new ee({type:"storage",key:e,target:window,oldValue:r,newValue:n,Md:!0}),t.We(n))}},1e3)},Ls=function(t){t.Fd&&(clearInterval(t.Fd),t.Fd=null)};Rs.prototype.Tc=function(){Ds(this,"local").$a(this.ce),Ls(this)},Rs.prototype.We=function(t){if(t&&t.Ef){var e=t.P.key;if(0==e.indexOf(this.Ke+this.Wd)&&this.X[e]){if(void 0!==t.P.Md?Ds(this,"local").$a(this.ce):Ls(this),this.ng){var n=i.localStorage.getItem(e),r=t.P.newValue;if(r!==n)null!==r?i.localStorage.setItem(e,r):i.localStorage.removeItem(e);else if(this.Y[e]===r&&void 0===t.P.Md)return}var o=this;n=function(){void 0===t.P.Md&&o.Y[e]===i.localStorage.getItem(e)||(o.Y[e]=i.localStorage.getItem(e),o.je(e))},Tt&&Ot&&10==Ot&&i.localStorage.getItem(e)!==t.P.newValue&&t.P.newValue!==t.P.oldValue?setTimeout(n,10):n()}}else Z(t,m(this.je,this))},Rs.prototype.je=function(t){this.X[t]&&Z(this.X[t],function(t){t()})};var xs=function(t,e){this.j=t,this.h=e||Os()},Us={name:"authEvent",C:"local"};xs.prototype.ib=function(t){this.h.addListener(Us,this.j,t)},xs.prototype.dc=function(t){this.h.removeListener(Us,this.j,t)};var Ms=function(t){this.h=t||Os()},Vs={name:"sessionId",C:"session"};Ms.prototype.uc=function(t){return this.h.get(Vs,t)};var js=function(t,e,n,i,r,o,a){this.A=t,this.m=e,this.o=n,this.La=i||null,this.O=a||null,this.Xe=e+":"+n,this.og=new Ms,this.we=new xs(this.Xe),this.Ad=null,this.ta=[],this.Sf=r||500,this.hg=o||2e3,this.Rb=this.Kc=null},Ws=function(t){return new io("invalid-cordova-configuration",t)};js.prototype.Ra=function(){return this.Tb?this.Tb:this.Tb=(kr(void 0)?Tr().then(function(){return new mn(function(t,e){var n=i.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):In(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Or("universalLinks.subscribe",i))throw Ws("cordova-universal-links-plugin is not installed");if(void 0===Or("BuildInfo.packageName",i))throw Ws("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",i))throw Ws("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",i))throw Ws("cordova-plugin-inappbrowser is not installed")},function(){throw new io("cordova-not-ready")})};var Fs=function(t){var e=new Gt;return e.update(t),function(t){return Q(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(e.digest())};(t=js.prototype).fc=function(t,e){return e(new io("operation-not-supported-in-this-environment")),wn()},t.$b=function(){return In(new io("operation-not-supported-in-this-environment"))},t.Ze=function(){return!1},t.Ve=function(){return!0},t.Ae=function(){return!0},t.ac=function(t,e,n){if(this.Kc)return In(new io("redirect-operation-pending"));var r=this,o=i.document,a=null,s=null,u=null,h=null;return this.Kc=kn(wn().then(function(){return Oo(e),Xs(r)}).then(function(){return Ks(r,t,e,n)}).then(function(){return new mn(function(t,e){s=function(){var e=Or("cordova.plugins.browsertab.close",i);return t(),"function"==typeof e&&e(),r.Rb&&"function"==typeof r.Rb.close&&(r.Rb.close(),r.Rb=null),!1},r.ib(s),u=function(){a||(a=Ai(r.hg).then(function(){e(new io("redirect-cancelled-by-user"))}))},h=function(){Br()&&u()},o.addEventListener("resume",u,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)}).g(function(t){return qs(r).then(function(){throw t})})}),function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),s&&r.dc(s),r.Kc=null})};var Ks=function(t,e,n,r){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new ao(e,r,null,o,new io("no-auth-event")),s=Or("BuildInfo.packageName",i);if("string"!=typeof s)throw new io("invalid-cordova-configuration");var u=Or("BuildInfo.displayName",i),h={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=s;else{if(!Rr().toLowerCase().match(/android/))return In(new io("operation-not-supported-in-this-environment"));h.apn=s}u&&(h.appDisplayName=u),o=Fs(o),h.sessionId=o;var c=Xa(t.A,t.m,t.o,e,n,null,r,t.La,h,t.O);return t.Ra().then(function(){var e=t.Xe;return t.og.h.set(Us,a.G(),e)}).then(function(){var e=Or("cordova.plugins.browsertab.isAvailable",i);if("function"!=typeof e)throw new io("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",i)))throw new io("invalid-cordova-configuration");n(c)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",i)))throw new io("invalid-cordova-configuration");e=n;var r=Rr();r=!(!r.match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!r.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),t.Rb=e(c,r?"_blank":"_system","location=yes")}})})};js.prototype.Lb=function(t){for(var e=0;e<this.ta.length;e++)try{this.ta[e](t)}catch(t){}};var Xs=function(t){return t.Ad||(t.Ad=t.Ra().then(function(){return new mn(function(e){var n=function(i){return e(i),t.dc(n),!1};t.ib(n),Hs(t)})})),t.Ad},qs=function(t){var e=null;return function(t){return t.h.get(Us,t.j).then(function(t){return so(t)})}(t.we).then(function(n){return e=n,(n=t.we).h.remove(Us,n.j)}).then(function(){return e})},Hs=function(t){var e=Or("universalLinks.subscribe",i);if("function"!=typeof e)throw new io("invalid-cordova-configuration");var n=new ao("unknown",null,null,null,new io("no-auth-event")),r=!1,o=Ai(t.Sf).then(function(){return qs(t).then(function(){r||t.Lb(n)})}),a=function(e){r=!0,o&&o.cancel(),qs(t).then(function(i){var r=n;if(i&&e&&e.url){r=null;var o=e.url,a=$i(o),s=zi(a,"link"),u=zi($i(s),"link");a=zi(a,"deep_link_id"),-1!=(o=zi($i(a),"link")||a||u||s||o).indexOf("/__/auth/callback")&&(r=$i(o),r=(r="object"==typeof(r=jr(zi(r,"firebaseError")||null))?ro(r):null)?new ao(i.ma,i.W,null,null,r):new ao(i.ma,i.W,o,i.uc())),r=r||n}t.Lb(r)})},s=i.handleOpenURL;i.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",i).toLowerCase()+"://")&&a({url:t}),"function"==typeof s)try{s(t)}catch(t){}},e(null,a)};js.prototype.ib=function(t){this.ta.push(t),Xs(this).g(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new ao("unknown",null,null,null,new io("no-auth-event")),t(e))})},js.prototype.dc=function(t){rt(this.ta,function(e){return e==t})};var Bs={name:"pendingRedirect",C:"session"},Gs=function(t){return t.h.remove(Bs,t.j)},Ys=function(t,e,n){this.A=t,this.m=e,this.o=n,this.hc=[],this.sb=!1,this.fd=m(this.vd,this),this.Xa=new nu(this),this.Od=new su(this),this.Xb=new function(t){this.j=t,this.h=Os()}(this.m+":"+this.o),this.Ia={},this.Ia.unknown=this.Xa,this.Ia.signInViaRedirect=this.Xa,this.Ia.linkViaRedirect=this.Xa,this.Ia.reauthViaRedirect=this.Xa,this.Ia.signInViaPopup=this.Od,this.Ia.linkViaPopup=this.Od,this.Ia.reauthViaPopup=this.Od,this.Z=zs(this.A,this.m,this.o,lr)},zs=function(t,n,i,r){var o=e.SDK_VERSION||null;return kr()?new js(t,n,i,o,void 0,void 0,r):new Wa(t,n,i,o,r)};Ys.prototype.reset=function(){this.sb=!1,this.Z.dc(this.fd),this.Z=zs(this.A,this.m,this.o)},Ys.prototype.Sb=function(){var t=this;this.sb||(this.sb=!0,this.Z.ib(this.fd));var e=this.Z;return this.Z.Ra().g(function(n){throw t.Z==e&&t.reset(),n})};var Js=function(t){t.Z.Ve()&&t.Sb().g(function(e){var n=new ao("unknown",null,null,null,new io("operation-not-supported-in-this-environment"));Qs(e)&&t.vd(n)}),t.Z.Ae()||iu(t.Xa)};Ys.prototype.subscribe=function(t){if(et(this.hc,t)||this.hc.push(t),!this.sb){var e=this;(function(t){return t.h.get(Bs,t.j).then(function(t){return"pending"==t})})(this.Xb).then(function(t){t?Gs(e.Xb).then(function(){e.Sb().g(function(t){var n=new ao("unknown",null,null,null,new io("operation-not-supported-in-this-environment"));Qs(t)&&e.vd(n)})}):Js(e)}).g(function(){Js(e)})}},Ys.prototype.unsubscribe=function(t){rt(this.hc,function(e){return e==t})},Ys.prototype.vd=function(t){if(!t)throw new io("invalid-auth-event");for(var e=!1,n=0;n<this.hc.length;n++){var i=this.hc[n];if(i.ke(t.ma,t.W)){(e=this.Ia[t.ma])&&e.Re(t,i),e=!0;break}}return iu(this.Xa),e};var $s=new qr(2e3,1e4),Zs=new qr(3e4,6e4);Ys.prototype.getRedirectResult=function(){return this.Xa.getRedirectResult()},Ys.prototype.$b=function(t,e,n,i,r){var o=this;return this.Z.$b(t,e,n,function(){o.sb||(o.sb=!0,o.Z.ib(o.fd))},function(){o.reset()},i,r)};var Qs=function(t){return!(!t||"auth/cordova-not-ready"!=t.code)};Ys.prototype.ac=function(t,e,n){var i,r=this;return function(t){return t.h.set(Bs,"pending",t.j)}(this.Xb).then(function(){return r.Z.ac(t,e,n).g(function(t){if(Qs(t))throw new io("operation-not-supported-in-this-environment");return i=t,Gs(r.Xb).then(function(){throw i})}).then(function(){return r.Z.Ze()?new mn(function(){}):Gs(r.Xb).then(function(){return r.getRedirectResult()}).then(function(){}).g(function(){})})})},Ys.prototype.fc=function(t,e,n,i){return this.Z.fc(n,function(n){t.bb(e,null,n,i)},$s.get())};var tu={},eu=function(t,e,n){var i=e+":"+n;return tu[i]||(tu[i]=new Ys(t,e,n)),tu[i]},nu=function(t){this.h=t,this.Ab=null,this.cc=[],this.bc=[],this.yb=null,this.Rd=!1};nu.prototype.reset=function(){this.Ab=null,this.yb&&(this.yb.cancel(),this.yb=null)},nu.prototype.Re=function(t,e){if(!t)return In(new io("invalid-auth-event"));this.reset(),this.Rd=!0;var n=t.ma,i=t.W,r=t.getError()&&"auth/web-storage-unsupported"==t.getError().code,o=t.getError()&&"auth/operation-not-supported-in-this-environment"==t.getError().code;return"unknown"!=n||r||o?t=t.ba?this.Pd(t,e):e.Nb(n,i)?this.Qd(t,e):In(new io("invalid-auth-event")):(ou(this,!1,null,null),t=wn()),t};var iu=function(t){t.Rd||(t.Rd=!0,ou(t,!1,null,null))};nu.prototype.Pd=function(t){return ou(this,!0,null,t.getError()),wn()},nu.prototype.Qd=function(t,e){var n=this;e=e.Nb(t.ma,t.W);var i=t.Eb,r=t.uc(),o=!!t.ma.match(/Redirect$/);return e(i,r).then(function(t){ou(n,o,t,null)}).g(function(t){ou(n,o,null,t)})};var ru=function(t,e){if(t.Ab=function(){return wn(e)},t.cc.length)for(var n=0;n<t.cc.length;n++)t.cc[n](e)},ou=function(t,e,n,i){e?i?function(t,e){if(t.Ab=function(){return In(e)},t.bc.length)for(var n=0;n<t.bc.length;n++)t.bc[n](e)}(t,i):ru(t,n):ru(t,{user:null}),t.cc=[],t.bc=[]};nu.prototype.getRedirectResult=function(){var t=this;return new mn(function(e,n){t.Ab?t.Ab().then(e,n):(t.cc.push(e),t.bc.push(n),au(t))})};var au=function(t){var e=new io("timeout");t.yb&&t.yb.cancel(),t.yb=Ai(Zs.get()).then(function(){t.Ab||ou(t,!0,null,e)})},su=function(t){this.h=t};su.prototype.Re=function(t,e){if(!t)return In(new io("invalid-auth-event"));var n=t.ma,i=t.W;return t.ba?this.Pd(t,e):e.Nb(n,i)?this.Qd(t,e):In(new io("invalid-auth-event"))},su.prototype.Pd=function(t,e){return e.bb(t.ma,null,t.getError(),t.W),wn()},su.prototype.Qd=function(t,e){var n=t.W,i=t.ma;return e.Nb(i,n)(t.Eb,t=t.uc()).then(function(t){e.bb(i,t,null,n)}).g(function(t){e.bb(i,null,t,n)})};var uu=function(t){this.f=t,this.Ja=this.fa=null,this.Na=0};uu.prototype.G=function(){return{apiKey:this.f.m,refreshToken:this.fa,accessToken:this.Ja,expirationTime:this.Na}};var hu=function(t,e){var n=e.idToken,i=e.refreshToken;e=cu(e.expiresIn),t.Ja=n,t.Na=e,t.fa=i},cu=function(t){return b()+1e3*parseInt(t,10)},lu=function(t,e){return function(t,e){return new mn(function(n,i){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Xo(t,t.pg+"?key="+encodeURIComponent(t.m),function(t){t?t.error?i(Ca(t)):t.access_token&&t.refresh_token?n(t):i(new io("internal-error")):i(new io("network-request-failed"))},"POST",hr(e).toString(),t.Qc,t.qg.get()):i(new io("internal-error"))})}(t.f,e).then(function(e){return t.Ja=e.access_token,t.Na=cu(e.expires_in),t.fa=e.refresh_token,{accessToken:t.Ja,expirationTime:t.Na,refreshToken:t.fa}}).g(function(e){throw"auth/user-token-expired"==e.code&&(t.fa=null),e})};uu.prototype.getToken=function(t){return t=!!t,this.Ja&&!this.fa?In(new io("user-token-expired")):t||!this.Ja||b()>this.Na-3e4?this.fa?lu(this,{grant_type:"refresh_token",refresh_token:this.fa}):wn(null):wn({accessToken:this.Ja,expirationTime:this.Na,refreshToken:this.fa})};var fu=function(t,e){for(var n in te.call(this,t),e)this[n]=e[n]};y(fu,te);var du=function(t,n,i){this.J=[],this.m=t.apiKey,this.o=t.appName,this.A=t.authDomain||null,t=e.SDK_VERSION?Cr(e.SDK_VERSION):null,this.f=new Uo(this.m,dr(lr),t),this.ra=new uu(this.f),Iu(this,n.idToken),hu(this.ra,n),zr(this,"refreshToken",this.ra.fa),Eu(this,i||{}),li.call(this),this.Lc=!1,this.A&&_r()&&(this.v=eu(this.A,this.m,this.o)),this.Sc=[],this.sa=null,this.wb=bu(this),this.Gb=m(this.wd,this);var r=this;this.ia=null,this.Ne=function(t){r.Cb(t.languageCode)},this.Dd=null,this.M=[],this.Me=function(t){vu(r,t.Cf)},this.sd=null};y(du,li),du.prototype.Cb=function(t){this.ia=t,Fo(this.f,t)};var pu=function(t,e){t.Dd&&ve(t.Dd,"languageCodeChanged",t.Ne),(t.Dd=e)&&le(e,"languageCodeChanged",t.Ne)},vu=function(t,n){t.M=n,Ko(t.f,e.SDK_VERSION?Cr(e.SDK_VERSION,t.M):null)},mu=function(t,e){t.sd&&ve(t.sd,"frameworkChanged",t.Me),(t.sd=e)&&le(e,"frameworkChanged",t.Me)};du.prototype.wd=function(){this.wb.ub&&(this.wb.stop(),this.wb.start())};var gu=function(t){try{return e.app(t.o).auth()}catch(e){throw new io("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.o+"'!")}},bu=function(t){return new ws(function(){return t.getIdToken(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.ra.Na-b()-3e5;return 0<e?e:0},3e4,96e4,!1)},yu=function(t){t.Kb||t.wb.ub||(t.wb.start(),ve(t,"tokenChanged",t.Gb),le(t,"tokenChanged",t.Gb))},wu=function(t){ve(t,"tokenChanged",t.Gb),t.wb.stop()},Iu=function(t,e){t.He=e,zr(t,"_lat",e)},Tu=function(t){for(var e=[],n=0;n<t.Sc.length;n++)e.push(t.Sc[n](t));return function(t){return new mn(function(e){var n=t.length,i=[];if(n)for(var r,o=function(t,r,o){n--,i[t]=r?{Df:!0,value:o}:{Df:!1,reason:o},0==n&&e(i)},a=0;a<t.length;a++)r=t[a],Tn(r,g(o,a,!0),g(o,a,!1));else e(i)})}(e).then(function(){return t})},ku=function(t){t.v&&!t.Lc&&(t.Lc=!0,t.v.subscribe(t))},Eu=function(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,providerData:[]})};zr(du.prototype,"providerId","firebase");var Au=function(){},Su=function(t){return wn().then(function(){if(t.Kb)throw new io("app-deleted")})},Nu=function(t){return Q(t.providerData,function(t){return t.providerId})},Pu=function(t,e){e&&(Cu(t,e.providerId),t.providerData.push(e))},Cu=function(t,e){rt(t.providerData,function(t){return t.providerId==e})},Ru=function(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&zr(t,e,n)};du.prototype.copy=function(t){var e=this;e!=t&&(Jr(this,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),Z(t.providerData,function(t){Pu(e,t)}),this.ra=t.ra,zr(this,"refreshToken",this.ra.fa))},du.prototype.reload=function(){var t=this;return this.c(Su(this).then(function(){return Ou(t).then(function(){return Tu(t)}).then(Au)}))};var Ou=function(t){return t.getIdToken().then(function(e){var n=t.isAnonymous;return _u(t,e).then(function(){return n||Ru(t,"isAnonymous",!1),e})})};du.prototype.getIdToken=function(t){var e=this;return this.c(Su(this).then(function(){return e.ra.getToken(t)}).then(function(t){if(!t)throw new io("internal-error");return t.accessToken!=e.He&&(Iu(e,t.accessToken),e.Ta()),Ru(e,"refreshToken",t.refreshToken),t.accessToken}))},du.prototype.getToken=function(t){return Gr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]||(Gr["firebase.User.prototype.getToken is deprecated. Please use firebase.User.prototype.getIdToken instead."]=!0,"undefined"!=typeof console&&console.warn),this.getIdToken(t)};var Du=function(t,e){e.idToken&&t.He!=e.idToken&&(hu(t.ra,e),t.Ta(),Iu(t,e.idToken),Ru(t,"refreshToken",t.ra.fa))};du.prototype.Ta=function(){this.dispatchEvent(new fu("tokenChanged"))};var _u=function(t,e){return Pa(t.f,ca,{idToken:e}).then(m(t.eg,t))};du.prototype.eg=function(t){if(!(t=t.users)||!t.length)throw new io("internal-error");t=t[0],Eu(this,{uid:t.localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber});for(var e=Lu(t),n=0;n<e.length;n++)Pu(this,e[n]);Ru(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))};var Lu=function(t){return(t=t.providerUserInfo)&&t.length?Q(t,function(t){return new function(t,e,n,i,r,o){Jr(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]};du.prototype.reauthenticateAndRetrieveDataWithCredential=function(t){var e=this,n=null;return this.c(t.Gd(this.f,this.uid).then(function(t){return Du(e,t),n=Uu(e,t,"reauthenticate"),e.sa=null,e.reload()}).then(function(){return n}),!0)},du.prototype.reauthenticateWithCredential=function(t){return this.reauthenticateAndRetrieveDataWithCredential(t).then(function(){})};var xu=function(t,e){return Ou(t).then(function(){if(et(Nu(t),e))return Tu(t).then(function(){throw new io("provider-already-linked")})})};du.prototype.linkAndRetrieveDataWithCredential=function(t){var e=this,n=null;return this.c(xu(this,t.providerId).then(function(){return e.getIdToken()}).then(function(n){return t.Gc(e.f,n)}).then(function(t){return n=Uu(e,t,"link"),Mu(e,t)}).then(function(){return n}))},du.prototype.linkWithCredential=function(t){return this.linkAndRetrieveDataWithCredential(t).then(function(t){return t.user})},du.prototype.linkWithPhoneNumber=function(t,e){var n=this;return this.c(xu(this,"phone").then(function(){return ys(gu(n),t,e,m(n.linkAndRetrieveDataWithCredential,n))}))},du.prototype.reauthenticateWithPhoneNumber=function(t,e){var n=this;return this.c(wn().then(function(){return ys(gu(n),t,e,m(n.reauthenticateAndRetrieveDataWithCredential,n))}),!0)};var Uu=function(t,e,n){var i=Ro(e);return e=Ts(e),$r({user:t,credential:i,additionalUserInfo:e,operationType:n})},Mu=function(t,e){return Du(t,e),t.reload().then(function(){return t})};(t=du.prototype).updateEmail=function(t){var e=this;return this.c(this.getIdToken().then(function(n){return e.f.updateEmail(n,t)}).then(function(t){return Du(e,t),e.reload()}))},t.updatePhoneNumber=function(t){var e=this;return this.c(this.getIdToken().then(function(n){return t.Gc(e.f,n)}).then(function(t){return Du(e,t),e.reload()}))},t.updatePassword=function(t){var e=this;return this.c(this.getIdToken().then(function(n){return e.f.updatePassword(n,t)}).then(function(t){return Du(e,t),e.reload()}))},t.updateProfile=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Su(this);var e=this;return this.c(this.getIdToken().then(function(n){return e.f.updateProfile(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Du(e,t),Ru(e,"displayName",t.displayName||null),Ru(e,"photoURL",t.photoUrl||null),Z(e.providerData,function(t){"password"===t.providerId&&(zr(t,"displayName",e.displayName),zr(t,"photoURL",e.photoURL))}),Tu(e)}).then(Au))},t.unlink=function(t){var e=this;return this.c(Ou(this).then(function(n){return et(Nu(e),t)?function(t,e,n){return Pa(t,ha,{idToken:e,deleteProvider:n})}(e.f,n,[t]).then(function(t){var n={};return Z(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),Z(Nu(e),function(t){n[t]||Cu(e,t)}),n[Po.PROVIDER_ID]||zr(e,"phoneNumber",null),Tu(e)}):Tu(e).then(function(){throw new io("no-such-provider")})}))},t.delete=function(){var t=this;return this.c(this.getIdToken().then(function(e){return Pa(t.f,ua,{idToken:e})}).then(function(){t.dispatchEvent(new fu("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");pu(t,null),mu(t,null),t.J=[],t.Kb=!0,wu(t),zr(t,"refreshToken",null),t.v&&t.v.unsubscribe(t)})},t.ke=function(t,e){return!!("linkViaPopup"==t&&(this.la||null)==e&&this.ka||"reauthViaPopup"==t&&(this.la||null)==e&&this.ka||"linkViaRedirect"==t&&(this.Ha||null)==e||"reauthViaRedirect"==t&&(this.Ha||null)==e)},t.bb=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.la||null)||(n&&this.Va?this.Va(n):e&&!n&&this.ka&&this.ka(e),this.K&&(this.K.cancel(),this.K=null),delete this.ka,delete this.Va)},t.Nb=function(t,e){return"linkViaPopup"==t&&e==(this.la||null)?m(this.te,this):"reauthViaPopup"==t&&e==(this.la||null)?m(this.ue,this):"linkViaRedirect"==t&&(this.Ha||null)==e?m(this.te,this):"reauthViaRedirect"==t&&(this.Ha||null)==e?m(this.ue,this):null},t.tc=function(){return Wr(this.uid+":::")},t.linkWithPopup=function(t){var e=this;return Vu(this,"linkViaPopup",t,function(){return xu(e,t.providerId).then(function(){return Tu(e)})},!1)},t.reauthenticateWithPopup=function(t){return Vu(this,"reauthViaPopup",t,function(){return wn()},!0)};var Vu=function(t,n,i,r,o){if(!_r())return In(new io("operation-not-supported-in-this-environment"));if(t.sa&&!o)return In(t.sa);var a=no(i.providerId),s=t.tc(),u=null;(!Ur()||Er())&&t.A&&i.isOAuthProvider&&(u=Xa(t.A,t.m,t.o,n,i,null,s,e.SDK_VERSION||null));var h=wr(u,a&&a.Zb,a&&a.Yb);return r=r().then(function(){if(Wu(t),!o)return t.getIdToken().then(function(){})}).then(function(){return t.v.$b(h,n,i,s,!!u)}).then(function(){return new mn(function(e,i){t.bb(n,null,new io("cancelled-popup-request"),t.la||null),t.ka=e,t.Va=i,t.la=s,t.K=t.v.fc(t,n,h,s)})}).then(function(t){return h&&yr(h),t?$r(t):null}).g(function(t){throw h&&yr(h),t}),t.c(r,o)};du.prototype.linkWithRedirect=function(t){var e=this;return ju(this,"linkViaRedirect",t,function(){return xu(e,t.providerId)},!1)},du.prototype.reauthenticateWithRedirect=function(t){return ju(this,"reauthViaRedirect",t,function(){return wn()},!0)};var ju=function(t,e,n,i,r){if(!_r())return In(new io("operation-not-supported-in-this-environment"));if(t.sa&&!r)return In(t.sa);var o=null,a=t.tc();return i=i().then(function(){if(Wu(t),!r)return t.getIdToken().then(function(){})}).then(function(){return t.Ha=a,Tu(t)}).then(function(e){return t.Ya&&(e=(e=t.Ya).h.set(Xu,t.G(),e.j)),e}).then(function(){return t.v.ac(e,n,a)}).g(function(e){if(o=e,t.Ya)return qu(t.Ya);throw o}).then(function(){if(o)throw o}),t.c(i,r)},Wu=function(t){if(!t.v||!t.Lc){if(t.v&&!t.Lc)throw new io("internal-error");throw new io("auth-domain-config-required")}};du.prototype.te=function(t,e){var n=this;this.K&&(this.K.cancel(),this.K=null);var i=null,r=this.getIdToken().then(function(i){return ea(n.f,{requestUri:t,sessionId:e,idToken:i})}).then(function(t){return i=Uu(n,t,"link"),Mu(n,t)}).then(function(){return i});return this.c(r)},du.prototype.ue=function(t,e){var n=this;this.K&&(this.K.cancel(),this.K=null);var i=null,r=wn().then(function(){return co(na(n.f,{requestUri:t,sessionId:e}),n.uid)}).then(function(t){return i=Uu(n,t,"reauthenticate"),Du(n,t),n.sa=null,n.reload()}).then(function(){return i});return this.c(r,!0)},du.prototype.sendEmailVerification=function(t){var e=this,n=null;return this.c(this.getIdToken().then(function(e){return n=e,void 0===t||dt(t)?{}:gs(new ms(t))}).then(function(t){return e.f.sendEmailVerification(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},du.prototype.c=function(t,e){var n=this,i=Fu(this,t,e);return this.J.push(i),kn(i,function(){nt(n.J,i)}),i};var Fu=function(t,e,n){return t.sa&&!n?(e.cancel(),In(t.sa)):e.g(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.sa||t.dispatchEvent(new fu("userInvalidated")),t.sa=e),e})};du.prototype.toJSON=function(){return this.G()},du.prototype.G=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.m,appName:this.o,authDomain:this.A,stsTokenManager:this.ra.G(),redirectEventId:this.Ha||null};return Z(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),t};var Ku=function(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n.idToken=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-b())/1e3;var i=new du(e,n,t);return t.providerData&&Z(t.providerData,function(t){t&&Pu(i,$r(t))}),t.redirectEventId&&(i.Ha=t.redirectEventId),i},Xu={name:"redirectUser",C:"session"},qu=function(t){return t.h.remove(Xu,t.j)},Hu=function(t,e){this.j=t,this.h=e||Os(),this.N=null,this.Jd=this.Bd(),this.h.addListener(Yu("local"),this.j,m(this.ug,this))};Hu.prototype.ug=function(){var t=this,e=Yu("local");Zu(this,function(){return wn().then(function(){return t.N&&"local"!=t.N.C?t.h.get(e,t.j):null}).then(function(n){if(n)return Bu(t,"local").then(function(){t.N=e})})})};var Bu=function(t,e){var n,i=[];for(n in Cs)Cs[n]!==e&&i.push(t.h.remove(Yu(Cs[n]),t.j));return i.push(t.h.remove(Gu,t.j)),function(t){return new mn(function(e,n){var i=t.length,r=[];if(i)for(var o,a=function(t,n){i--,r[t]=n,0==i&&e(r)},s=function(t){n(t)},u=0;u<t.length;u++)o=t[u],Tn(o,g(a,u),s);else e(r)})}(i)};Hu.prototype.Bd=function(){var t=this,e=Yu("local"),n=Yu("session"),i=Yu("none");return this.h.get(n,this.j).then(function(r){return r?n:t.h.get(i,t.j).then(function(n){return n?i:t.h.get(e,t.j).then(function(n){return n?e:t.h.get(Gu,t.j).then(function(t){return t?Yu(t):e})})})}).then(function(e){return t.N=e,Bu(t,e.C)}).g(function(){t.N||(t.N=e)})};var Gu={name:"persistence",C:"session"},Yu=function(t){return{name:"authUser",C:t}};Hu.prototype.setPersistence=function(t){var e=null,n=this;return function(t){var e=new io("invalid-persistence-type"),n=new io("unsupported-persistence-type");t:{for(i in Cs)if(Cs[i]==t){var i=!0;break t}i=!1}if(!i||"string"!=typeof t)throw e;switch(Ar()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),Zu(this,function(){return t!=n.N.C?n.h.get(n.N,n.j).then(function(i){return e=i,Bu(n,t)}).then(function(){if(n.N=Yu(t),e)return n.h.set(n.N,e,n.j)}):wn()})};var zu=function(t,e){return Zu(t,function(){return t.h.set(t.N,e.G(),t.j)})},Ju=function(t){return Zu(t,function(){return t.h.remove(t.N,t.j)})},$u=function(t,e){return Zu(t,function(){return t.h.get(t.N,t.j).then(function(t){return t&&e&&(t.authDomain=e),Ku(t||{})})})},Zu=function(t,e){return t.Jd=t.Jd.then(e,e),t.Jd},Qu=function(t){if(this.Ea=!1,zr(this,"app",t),!this.i().options||!this.i().options.apiKey)throw new io("invalid-api-key");t=e.SDK_VERSION?Cr(e.SDK_VERSION):null,this.f=new Uo(this.i().options&&this.i().options.apiKey,dr(lr),t),this.J=[],this.Ka=[],this.Fb=[],this.ag=e.INTERNAL.createSubscribe(m(this.Pf,this)),this.mc=void 0,this.cg=e.INTERNAL.createSubscribe(m(this.Rf,this)),ah(this,null),t=this.i().options.apiKey;var n=this.i().name;this.na=new Hu(t+":"+n),t=this.i().options.apiKey,n=this.i().name,this.zb=new function(t){this.j=t,this.h=Os()}(t+":"+n),this.pc=this.c(uh(this)),this.ya=this.c(hh(this)),this.Dc=!1,this.ud=m(this.vg,this),this.bf=m(this.pb,this),this.Gb=m(this.wd,this),this.$e=m(this.Lf,this),this.af=m(this.Mf,this),rh(this),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Xf,this),this.Oa=0,li.call(this),nh(this),this.M=[]};y(Qu,li);var th=function(t){te.call(this,"languageCodeChanged"),this.languageCode=t};y(th,te);var eh=function(t){te.call(this,"frameworkChanged"),this.Cf=t};y(eh,te),Qu.prototype.setPersistence=function(t){return t=this.na.setPersistence(t),this.c(t)},Qu.prototype.Cb=function(t){this.ia===t||this.Ea||(this.ia=t,Fo(this.f,this.ia),this.dispatchEvent(new th(this.ia)))},Qu.prototype.useDeviceLanguage=function(){var t=i.navigator;this.Cb(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},Qu.prototype.Xf=function(t){this.M.push(t),Ko(this.f,e.SDK_VERSION?Cr(e.SDK_VERSION,this.M):null),this.dispatchEvent(new eh(this.M))};var nh=function(t){Object.defineProperty(t,"lc",{get:function(){return this.ia},set:function(t){this.Cb(t)},enumerable:!1}),t.ia=null};Qu.prototype.toJSON=function(){return{apiKey:this.i().options.apiKey,authDomain:this.i().options.authDomain,appName:this.i().name,currentUser:lh(this)&&lh(this).G()}};var ih=function(t){return t.xf||In(new io("auth-domain-config-required"))},rh=function(t){var e=t.i().options.authDomain,n=t.i().options.apiKey;e&&_r()&&(t.xf=t.pc.then(function(){if(!t.Ea){if(t.v=eu(e,n,t.i().name),t.v.subscribe(t),lh(t)&&ku(lh(t)),t.Za){ku(t.Za);var i=t.Za;i.Cb(t.ia),pu(i,t),i=t.Za,vu(i,t.M),mu(i,t),t.Za=null}return t.v}}))};(t=Qu.prototype).ke=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.la==e&&!!this.ka;default:return!1}},t.bb=function(t,e,n,i){"signInViaPopup"==t&&this.la==i&&(n&&this.Va?this.Va(n):e&&!n&&this.ka&&this.ka(e),this.K&&(this.K.cancel(),this.K=null),delete this.ka,delete this.Va)},t.Nb=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.la==e&&this.ka?m(this.zf,this):null},t.zf=function(t,e){var n=this;t={requestUri:t,sessionId:e},this.K&&(this.K.cancel(),this.K=null);var i=null,r=null,o=ta(n.f,t).then(function(t){return i=Ro(t),r=Ts(t),t});return t=n.pc.then(function(){return o}).then(function(t){return oh(n,t)}).then(function(){return $r({user:lh(n),credential:i,additionalUserInfo:r,operationType:"signIn"})}),this.c(t)},t.tc=function(){return Wr()},t.signInWithPopup=function(t){if(!_r())return In(new io("operation-not-supported-in-this-environment"));var n=this,i=no(t.providerId),r=this.tc(),o=null;(!Ur()||Er())&&this.i().options.authDomain&&t.isOAuthProvider&&(o=Xa(this.i().options.authDomain,this.i().options.apiKey,this.i().name,"signInViaPopup",t,null,r,e.SDK_VERSION||null));var a=wr(o,i&&i.Zb,i&&i.Yb);return i=ih(this).then(function(e){return e.$b(a,"signInViaPopup",t,r,!!o)}).then(function(){return new mn(function(t,e){n.bb("signInViaPopup",null,new io("cancelled-popup-request"),n.la),n.ka=t,n.Va=e,n.la=r,n.K=n.v.fc(n,"signInViaPopup",a,r)})}).then(function(t){return a&&yr(a),t?$r(t):null}).g(function(t){throw a&&yr(a),t}),this.c(i)},t.signInWithRedirect=function(t){if(!_r())return In(new io("operation-not-supported-in-this-environment"));var e=this,n=ih(this).then(function(){return t=e.na,Zu(t,function(){return t.h.set(Gu,t.N.C,t.j)});var t}).then(function(){return e.v.ac("signInViaRedirect",t)});return this.c(n)},t.getRedirectResult=function(){if(!_r())return In(new io("operation-not-supported-in-this-environment"));var t=this,e=ih(this).then(function(){return t.v.getRedirectResult()}).then(function(t){return t?$r(t):null});return this.c(e)};var oh=function(t,e){var n={};return n.apiKey=t.i().options.apiKey,n.authDomain=t.i().options.authDomain,n.appName=t.i().name,t.pc.then(function(){return function(t,e,n,i){var r=new du(t,e);return n&&(r.Ya=n),i&&vu(r,i),r.reload().then(function(){return r})}(n,e,t.zb,at(t.M))}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(lh(t).copy(e),t.pb(e)):(ah(t,e),ku(e),t.pb(e))}).then(function(){t.Ta()})},ah=function(t,e){lh(t)&&(function(t,e){rt(t.Sc,function(t){return t==e})}(lh(t),t.bf),ve(lh(t),"tokenChanged",t.Gb),ve(lh(t),"userDeleted",t.$e),ve(lh(t),"userInvalidated",t.af),wu(lh(t))),e&&(e.Sc.push(t.bf),le(e,"tokenChanged",t.Gb),le(e,"userDeleted",t.$e),le(e,"userInvalidated",t.af),0<t.Oa&&yu(e)),zr(t,"currentUser",e),e&&(e.Cb(t.ia),pu(e,t),vu(e,t.M),mu(e,t))};Qu.prototype.signOut=function(){var t=this,e=this.ya.then(function(){return lh(t)?(ah(t,null),Ju(t.na).then(function(){t.Ta()})):wn()});return this.c(e)};var sh=function(t){var e=t.i().options.authDomain;return e=function(t,e){return t.h.get(Xu,t.j).then(function(t){return t&&e&&(t.authDomain=e),Ku(t||{})})}(t.zb,e).then(function(e){return(t.Za=e)&&(e.Ya=t.zb),qu(t.zb)}),t.c(e)},uh=function(t){var e=t.i().options.authDomain,n=sh(t).then(function(){return $u(t.na,e)}).then(function(e){return e?(e.Ya=t.zb,t.Za&&(t.Za.Ha||null)==(e.Ha||null)?e:e.reload().then(function(){return zu(t.na,e).then(function(){return e})}).g(function(n){return"auth/network-request-failed"==n.code?e:Ju(t.na)})):null}).then(function(e){ah(t,e||null)});return t.c(n)},hh=function(t){return t.pc.then(function(){return t.getRedirectResult()}).g(function(){}).then(function(){if(!t.Ea)return t.ud()}).g(function(){}).then(function(){if(!t.Ea){t.Dc=!0;var e=t.na;e.h.addListener(Yu("local"),e.j,t.ud)}})};(t=Qu.prototype).vg=function(){var t=this,e=this.i().options.authDomain;return $u(this.na,e).then(function(e){if(!t.Ea){var n;if(n=lh(t)&&e){n=lh(t).uid;var i=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==i&&null!==i&&""!==i&&n==i}if(n)return lh(t).copy(e),lh(t).getIdToken();(lh(t)||e)&&(ah(t,e),e&&(ku(e),e.Ya=t.zb),t.v&&t.v.subscribe(t),t.Ta())}})},t.pb=function(t){return zu(this.na,t)},t.wd=function(){this.Ta(),this.pb(lh(this))},t.Lf=function(){this.signOut()},t.Mf=function(){this.signOut()};var ch=function(t,e){var n=null,i=null;return t.c(e.then(function(e){return n=Ro(e),i=Ts(e),oh(t,e)}).then(function(){return $r({user:lh(t),credential:n,additionalUserInfo:i,operationType:"signIn"})}))};(t=Qu.prototype).Pf=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Rf=function(t){var e=this;dh(this,function(){t.next(lh(e))})},t.onIdTokenChanged=function(t,n,i){var r=this;return this.Dc&&e.Promise.resolve().then(function(){f(t)?t(lh(r)):f(t.next)&&t.next(lh(r))}),this.ag(t,n,i)},t.onAuthStateChanged=function(t,n,i){var r=this;return this.Dc&&e.Promise.resolve().then(function(){r.mc=r.getUid(),f(t)?t(lh(r)):f(t.next)&&t.next(lh(r))}),this.cg(t,n,i)},t.Ff=function(t){var e=this,n=this.ya.then(function(){return lh(e)?lh(e).getIdToken(t).then(function(t){return{accessToken:t}}):null});return this.c(n)},t.signInWithCustomToken=function(t){var e=this;return this.ya.then(function(){return ch(e,Pa(e.f,ka,{token:t}))}).then(function(t){return t=t.user,Ru(t,"isAnonymous",!1),e.pb(t)}).then(function(){return lh(e)})},t.signInWithEmailAndPassword=function(t,e){var n=this;return this.ya.then(function(){return ch(n,Pa(n.f,Ea,{email:t,password:e}))}).then(function(t){return t.user})},t.createUserWithEmailAndPassword=function(t,e){var n=this;return this.ya.then(function(){return ch(n,Pa(n.f,aa,{email:t,password:e}))}).then(function(t){return t.user})},t.signInWithCredential=function(t){return this.signInAndRetrieveDataWithCredential(t).then(function(t){return t.user})},t.signInAndRetrieveDataWithCredential=function(t){var e=this;return this.ya.then(function(){return ch(e,t.Ob(e.f))})},t.signInAnonymously=function(){var t=this;return this.ya.then(function(){var e=lh(t);return e&&e.isAnonymous?e:ch(t,t.f.signInAnonymously()).then(function(e){return e=e.user,Ru(e,"isAnonymous",!0),t.pb(e)}).then(function(){return lh(t)})})},t.i=function(){return this.app};var lh=function(t){return t.currentUser};Qu.prototype.getUid=function(){return lh(this)&&lh(this).uid||null};var fh=function(t){return lh(t)&&lh(t)._lat||null};(t=Qu.prototype).Ta=function(){if(this.Dc){for(var t=0;t<this.Ka.length;t++)this.Ka[t]&&this.Ka[t](fh(this));if(this.mc!==this.getUid()&&this.Fb.length)for(this.mc=this.getUid(),t=0;t<this.Fb.length;t++)this.Fb[t]&&this.Fb[t](fh(this))}},t.lf=function(t){this.addAuthTokenListener(t),this.Oa++,0<this.Oa&&lh(this)&&yu(lh(this))},t.ig=function(t){var e=this;Z(this.Ka,function(n){n==t&&e.Oa--}),0>this.Oa&&(this.Oa=0),0==this.Oa&&lh(this)&&wu(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.Ka.push(t),this.c(this.ya.then(function(){e.Ea||et(e.Ka,t)&&t(fh(e))}))},t.removeAuthTokenListener=function(t){rt(this.Ka,function(e){return e==t})};var dh=function(t,e){t.Fb.push(e),t.c(t.ya.then(function(){!t.Ea&&et(t.Fb,e)&&t.mc!==t.getUid()&&(t.mc=t.getUid(),e(fh(t)))}))};(t=Qu.prototype).delete=function(){this.Ea=!0;for(var t=0;t<this.J.length;t++)this.J[t].cancel("app-deleted");return this.J=[],this.na&&(t=this.na).h.removeListener(Yu("local"),t.j,this.ud),this.v&&this.v.unsubscribe(this),e.Promise.resolve()},t.c=function(t){var e=this;return this.J.push(t),kn(t,function(){nt(e.J,t)}),t},t.fetchProvidersForEmail=function(t){return this.c(function(t,e){return Pa(t,sa,{identifier:e,continueUri:Lr()?vr():"http://localhost"}).then(function(t){return t.allProviders||[]})}(this.f,t))},t.verifyPasswordResetCode=function(t){return this.checkActionCode(t).then(function(t){return t.data.email})},t.confirmPasswordReset=function(t,e){return this.c(this.f.confirmPasswordReset(t,e).then(function(){}))},t.checkActionCode=function(t){return this.c(this.f.checkActionCode(t).then(function(t){return new function(t){var e={},n=t.email,i=t.newEmail;if(t=t.requestType,!n||!t)throw Error("Invalid provider user info!");e.fromEmail=i||null,e.email=n,zr(this,"operation",t),zr(this,"data",Zr(e))}(t)}))},t.applyActionCode=function(t){return this.c(this.f.applyActionCode(t).then(function(){}))},t.sendPasswordResetEmail=function(t,e){var n=this;return this.c(wn().then(function(){return void 0===e||dt(e)?{}:gs(new ms(e))}).then(function(e){return n.f.sendPasswordResetEmail(t,e)}).then(function(){}))},t.signInWithPhoneNumber=function(t,e){return this.c(ys(this,t,e,m(this.signInAndRetrieveDataWithCredential,this)))};var ph=function(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new io("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].U(n[r])&&!o){if(e=e[r],0>r||r>=vh.length)throw new io("internal-error","Argument validator received an unsupported number of arguments.");n=vh[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.T+".";break t}i=null}}if(i)throw new io("argument-error",t+" failed: "+i)},vh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" "),mh=function(t,e){return{name:t||"",T:"a valid string",optional:!!e,U:o}},gh=function(){return{name:"opt_forceRefresh",T:"a boolean",optional:!0,U:a}},bh=function(t,e){return{name:t||"",T:"a valid object",optional:!!e,U:d}},yh=function(t,e){return{name:t||"",T:"a function",optional:!!e,U:f}},wh=function(t,e){return{name:t||"",T:"null",optional:!!e,U:h}},Ih=function(t){return{name:t?t+"Credential":"credential",T:t?"a valid "+t+" credential":"a valid credential",optional:!1,U:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.Ob||!n)}}},Th=function(){return{name:"applicationVerifier",T:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,U:function(t){return!!(t&&o(t.type)&&f(t.verify))}}},kh=function(t,e,n,i){return{name:n||"",T:t.T+" or "+e.T,optional:!!i,U:function(n){return t.U(n)||e.U(n)}}},Eh=function(t,e){for(var n in e){var i=e[n].name;t[i]=Sh(i,t[n],e[n].a)}},Ah=function(t,e,n,i){t[e]=Sh(e,n,i)},Sh=function(t,e,n){if(!n)return e;var i=Nh(t);for(var r in t=function(){var t=Array.prototype.slice.call(arguments);return ph(i,n,t),e.apply(this,t)},e)t[r]=e[r];for(r in e.prototype)t.prototype[r]=e.prototype[r];return t},Nh=function(t){return(t=t.split("."))[t.length-1]};Eh(Qu.prototype,{applyActionCode:{name:"applyActionCode",a:[mh("code")]},checkActionCode:{name:"checkActionCode",a:[mh("code")]},confirmPasswordReset:{name:"confirmPasswordReset",a:[mh("code"),mh("newPassword")]},createUserWithEmailAndPassword:{name:"createUserWithEmailAndPassword",a:[mh("email"),mh("password")]},fetchProvidersForEmail:{name:"fetchProvidersForEmail",a:[mh("email")]},getRedirectResult:{name:"getRedirectResult",a:[]},onAuthStateChanged:{name:"onAuthStateChanged",a:[kh(bh(),yh(),"nextOrObserver"),yh("opt_error",!0),yh("opt_completed",!0)]},onIdTokenChanged:{name:"onIdTokenChanged",a:[kh(bh(),yh(),"nextOrObserver"),yh("opt_error",!0),yh("opt_completed",!0)]},sendPasswordResetEmail:{name:"sendPasswordResetEmail",a:[mh("email"),kh(bh("opt_actionCodeSettings",!0),wh(null,!0),"opt_actionCodeSettings",!0)]},setPersistence:{name:"setPersistence",a:[mh("persistence")]},signInAndRetrieveDataWithCredential:{name:"signInAndRetrieveDataWithCredential",a:[Ih()]},signInAnonymously:{name:"signInAnonymously",a:[]},signInWithCredential:{name:"signInWithCredential",a:[Ih()]},signInWithCustomToken:{name:"signInWithCustomToken",a:[mh("token")]},signInWithEmailAndPassword:{name:"signInWithEmailAndPassword",a:[mh("email"),mh("password")]},signInWithPhoneNumber:{name:"signInWithPhoneNumber",a:[mh("phoneNumber"),Th()]},signInWithPopup:{name:"signInWithPopup",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},signInWithRedirect:{name:"signInWithRedirect",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},signOut:{name:"signOut",a:[]},toJSON:{name:"toJSON",a:[mh(null,!0)]},useDeviceLanguage:{name:"useDeviceLanguage",a:[]},verifyPasswordResetCode:{name:"verifyPasswordResetCode",a:[mh("code")]}}),function(t,e){for(var n in e){var i=e[n].name;if(i!==n){var r=e[n].nf;Object.defineProperty(t,i,{get:function(){return this[n]},set:function(t){ph(i,[r],[t],!0),this[n]=t},enumerable:!0})}}}(Qu.prototype,{lc:{name:"languageCode",nf:kh(mh(),wh(),"languageCode")}}),(Qu.Persistence=Cs).LOCAL="local",Qu.Persistence.SESSION="session",Qu.Persistence.NONE="none",Eh(du.prototype,{delete:{name:"delete",a:[]},getIdToken:{name:"getIdToken",a:[gh()]},getToken:{name:"getToken",a:[gh()]},linkAndRetrieveDataWithCredential:{name:"linkAndRetrieveDataWithCredential",a:[Ih()]},linkWithCredential:{name:"linkWithCredential",a:[Ih()]},linkWithPhoneNumber:{name:"linkWithPhoneNumber",a:[mh("phoneNumber"),Th()]},linkWithPopup:{name:"linkWithPopup",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},linkWithRedirect:{name:"linkWithRedirect",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reauthenticateAndRetrieveDataWithCredential:{name:"reauthenticateAndRetrieveDataWithCredential",a:[Ih()]},reauthenticateWithCredential:{name:"reauthenticateWithCredential",a:[Ih()]},reauthenticateWithPhoneNumber:{name:"reauthenticateWithPhoneNumber",a:[mh("phoneNumber"),Th()]},reauthenticateWithPopup:{name:"reauthenticateWithPopup",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reauthenticateWithRedirect:{name:"reauthenticateWithRedirect",a:[{name:"authProvider",T:"a valid Auth provider",optional:!1,U:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",a:[]},sendEmailVerification:{name:"sendEmailVerification",a:[kh(bh("opt_actionCodeSettings",!0),wh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",a:[mh(null,!0)]},unlink:{name:"unlink",a:[mh("provider")]},updateEmail:{name:"updateEmail",a:[mh("email")]},updatePassword:{name:"updatePassword",a:[mh("password")]},updatePhoneNumber:{name:"updatePhoneNumber",a:[Ih("phone")]},updateProfile:{name:"updateProfile",a:[bh("profile")]}}),Eh(mn.prototype,{g:{name:"catch"},then:{name:"then"}}),Eh(bs.prototype,{confirm:{name:"confirm",a:[mh("verificationCode")]}}),Ah(Ao,"credential",function(t,e){return new Eo(t,e)},[mh("email"),mh("password")]),Eh(mo.prototype,{addScope:{name:"addScope",a:[mh("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bh("customOAuthParameters")]}}),Ah(mo,"credential",go,[kh(mh(),bh(),"token")]),Eh(bo.prototype,{addScope:{name:"addScope",a:[mh("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bh("customOAuthParameters")]}}),Ah(bo,"credential",yo,[kh(mh(),bh(),"token")]),Eh(wo.prototype,{addScope:{name:"addScope",a:[mh("scope")]},setCustomParameters:{name:"setCustomParameters",a:[bh("customOAuthParameters")]}}),Ah(wo,"credential",Io,[kh(mh(),kh(bh(),wh()),"idToken"),kh(mh(),wh(),"accessToken",!0)]),Eh(To.prototype,{setCustomParameters:{name:"setCustomParameters",a:[bh("customOAuthParameters")]}}),Ah(To,"credential",ko,[kh(mh(),bh(),"token"),mh("secret",!0)]),Eh(vo.prototype,{addScope:{name:"addScope",a:[mh("scope")]},credential:{name:"credential",a:[kh(mh(),wh(),"idToken",!0),kh(mh(),wh(),"accessToken",!0)]},setCustomParameters:{name:"setCustomParameters",a:[bh("customOAuthParameters")]}}),Ah(Po,"credential",Co,[mh("verificationId"),mh("verificationCode")]),Eh(Po.prototype,{verifyPhoneNumber:{name:"verifyPhoneNumber",a:[mh("phoneNumber"),Th()]}}),Eh(io.prototype,{toJSON:{name:"toJSON",a:[mh(null,!0)]}}),Eh(Do.prototype,{toJSON:{name:"toJSON",a:[mh(null,!0)]}}),Eh(uo.prototype,{toJSON:{name:"toJSON",a:[mh(null,!0)]}}),Eh(Za.prototype,{clear:{name:"clear",a:[]},render:{name:"render",a:[]},verify:{name:"verify",a:[]}}),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={Auth:Qu,Error:io};Ah(t,"EmailAuthProvider",Ao,[]),Ah(t,"FacebookAuthProvider",mo,[]),Ah(t,"GithubAuthProvider",bo,[]),Ah(t,"GoogleAuthProvider",wo,[]),Ah(t,"TwitterAuthProvider",To,[]),Ah(t,"OAuthProvider",vo,[mh("providerId")]),Ah(t,"PhoneAuthProvider",Po,[{name:"auth",T:"an instance of Firebase Auth",optional:!0,U:function(t){return!!(t&&t instanceof Qu)}}]),Ah(t,"RecaptchaVerifier",Za,[kh(mh(),{name:"",T:"an HTML element",optional:!1,U:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),bh("recaptchaParameters",!0),{name:"app",T:"an instance of Firebase App",optional:!0,U:function(t){return!!(t&&t instanceof e.app.App)}}]),e.INTERNAL.registerService("auth",function(t,e){return t=new Qu(t),e({INTERNAL:{getUid:m(t.getUid,t),getToken:m(t.Ff,t),addAuthTokenListener:m(t.lf,t),removeAuthTokenListener:m(t.ig,t)}}),t},t,function(t,e){if("create"===t)try{e.auth()}catch(t){}}),e.INTERNAL.extendNamespace({User:du})}()}).call(this)}).call(void 0!==typeof t?t:void 0!==typeof self?self:void 0!==typeof window?window:{});
},{"./app":55}],84:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"4.4.0"};
},{}],90:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertionError=exports.assert=void 0;var r=require("./constants"),e=exports.assert=function(r,e){if(!r)throw s(e)},s=exports.assertionError=function(e){return new Error("Firebase Database ("+r.CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
},{"./constants":84}],101:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t=exports.contains=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n=exports.safeGet=function(r,t){if(Object.prototype.hasOwnProperty.call(r,t))return r[t]},o=exports.forEach=function(r,t){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])},e=exports.extend=function(r,t){return o(t,function(t,n){r[t]=n}),r},u=exports.clone=function(r){return e({},r)},f=exports.isNonNullObject=function(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t},i=exports.isEmpty=function(r){for(var t in r)return!1;return!0},c=exports.getCount=function(r){var t=0;for(var n in r)t++;return t},p=exports.map=function(r,t,n){var o={};for(var e in r)o[e]=t.call(n,r[e],e,r);return o},a=exports.findKey=function(r,t,n){for(var o in r)if(t.call(n,r[o],o,r))return o},s=exports.findValue=function(r,t,n){var o=a(r,t,n);return o&&r[o]},l=exports.getAnyKey=function(r){for(var t in r)return t},y=exports.getValues=function(r){var t=[],n=0;for(var o in r)t[n++]=r[o];return t},v=exports.every=function(r,t){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&!t(n,r[n]))return!1;return!0};
},{}],114:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.base64=void 0;var t=require("./globalScope"),r=function(t){for(var r=[],e=0,a=0;a<t.length;a++){for(var h=t.charCodeAt(a);h>255;)r[e++]=255&h,h>>=8;r[e++]=h}return r},e=function(t){if(t.length<8192)return String.fromCharCode.apply(null,t);for(var r="",e=0;e<t.length;e+=8192){var a=t.slice(e,e+8192);r+=String.fromCharCode.apply(null,a)}return r},a=exports.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof t.globalScope.atob,encodeByteArray:function(t,r){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[],h=0;h<t.length;h+=3){var o=t[h],i=h+1<t.length,n=i?t[h+1]:0,_=h+2<t.length,s=_?t[h+2]:0,S=o>>2,l=(3&o)<<4|n>>4,A=(15&n)<<2|s>>6,c=63&s;_||(c=64,i||(A=64)),a.push(e[S],e[l],e[A],e[c])}return a.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(t):e(this.decodeStringToByteArray(t,r))},decodeStringToByteArray:function(t,r){this.init_();for(var e=r?this.charToByteMapWebSafe_:this.charToByteMap_,a=[],h=0;h<t.length;){var o=e[t.charAt(h++)],i=h<t.length?e[t.charAt(h)]:0,n=++h<t.length?e[t.charAt(h)]:64,_=++h<t.length?e[t.charAt(h)]:64;if(++h,null==o||null==i||null==n||null==_)throw Error();var s=o<<2|i>>4;if(a.push(s),64!=n){var S=i<<4&240|n>>2;if(a.push(S),64!=_){var l=n<<6&192|_;a.push(l)}}}return a},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
},{"./globalScope":119}],160:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(){this.blockSize=-1}}();exports.Hash=e;
},{}],115:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sha1=void 0;var t=require("./hash"),i=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var h in i)i.hasOwnProperty(h)&&(t[h]=i[h])};return function(i,h){function s(){this.constructor=i}t(i,h),i.prototype=null===h?Object.create(h):(s.prototype=h.prototype,new s)}}(),h=function(t){function h(){var i=t.call(this)||this;i.chain_=[],i.buf_=[],i.W_=[],i.pad_=[],i.inbuf_=0,i.total_=0,i.blockSize=64,i.pad_[0]=128;for(var h=1;h<i.blockSize;++h)i.pad_[h]=0;return i.reset(),i}return i(h,t),h.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},h.prototype.compress_=function(t,i){i||(i=0);var h=this.W_;if("string"==typeof t)for(var s=0;s<16;s++)h[s]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(s=0;s<16;s++)h[s]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(s=16;s<80;s++){var o=h[s-3]^h[s-8]^h[s-14]^h[s-16];h[s]=4294967295&(o<<1|o>>>31)}var r,e,n=this.chain_[0],a=this.chain_[1],c=this.chain_[2],_=this.chain_[3],f=this.chain_[4];for(s=0;s<80;s++){s<40?s<20?(r=_^a&(c^_),e=1518500249):(r=a^c^_,e=1859775393):s<60?(r=a&c|_&(a|c),e=2400959708):(r=a^c^_,e=3395469782);o=(n<<5|n>>>27)+r+f+e+h[s]&4294967295;f=_,_=c,c=4294967295&(a<<30|a>>>2),a=n,n=o}this.chain_[0]=this.chain_[0]+n&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+_&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},h.prototype.update=function(t,i){if(null!=t){void 0===i&&(i=t.length);for(var h=i-this.blockSize,s=0,o=this.buf_,r=this.inbuf_;s<i;){if(0==r)for(;s<=h;)this.compress_(t,s),s+=this.blockSize;if("string"==typeof t){for(;s<i;)if(o[r]=t.charCodeAt(s),++s,++r==this.blockSize){this.compress_(o),r=0;break}}else for(;s<i;)if(o[r]=t[s],++s,++r==this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=i}},h.prototype.digest=function(){var t=[],i=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var h=this.blockSize-1;h>=56;h--)this.buf_[h]=255&i,i/=256;this.compress_(this.buf_);var s=0;for(h=0;h<5;h++)for(var o=24;o>=0;o-=8)t[s]=this.chain_[h]>>o&255,++s;return t},h}(t.Hash);exports.Sha1=h;
},{"./hash":160}],116:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stringLength=exports.stringToByteArray=void 0;var r=require("./assert"),t=exports.stringToByteArray=function(t){for(var e=[],o=0,s=0;s<t.length;s++){var a=t.charCodeAt(s);if(a>=55296&&a<=56319){var n=a-55296;s++,(0,r.assert)(s<t.length,"Surrogate pair missing trail surrogate."),a=65536+(n<<10)+(t.charCodeAt(s)-56320)}a<128?e[o++]=a:a<2048?(e[o++]=a>>6|192,e[o++]=63&a|128):a<65536?(e[o++]=a>>12|224,e[o++]=a>>6&63|128,e[o++]=63&a|128):(e[o++]=a>>18|240,e[o++]=a>>12&63|128,e[o++]=a>>6&63|128,e[o++]=63&a|128)}return e},e=exports.stringLength=function(r){for(var t=0,e=0;e<r.length;e++){var o=r.charCodeAt(e);o<128?t++:o<2048?t+=2:o>=55296&&o<=56319?(t+=4,e++):t+=3}return t};
},{"./assert":90}],117:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.jsonEval=function(e){return JSON.parse(e)},r=exports.stringify=function(e){return JSON.stringify(e)};
},{}],161:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DOMStorageWrapper=void 0;var e=require("../../../utils/json"),t=function(){function t(e){this.domStorage_=e,this.prefix_="firebase:"}return t.prototype.set=function(t,r){null==r?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,e.stringify)(r))},t.prototype.get=function(t){var r=this.domStorage_.getItem(this.prefixedName_(t));return null==r?null:(0,e.jsonEval)(r)},t.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},t.prototype.prefixedName_=function(e){return this.prefix_+e},t.prototype.toString=function(){return this.domStorage_.toString()},t}();exports.DOMStorageWrapper=t;
},{"../../../utils/json":117}],162:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MemoryStorage=void 0;var e=require("../../../utils/obj"),t=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},t.prototype.get=function(t){return(0,e.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(e){delete this.cache_[e]},t}();exports.MemoryStorage=t;
},{"../../../utils/obj":101}],118:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SessionStorage=exports.PersistentStorage=void 0;var e=require("./DOMStorageWrapper"),r=require("./MemoryStorage"),t=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var o=window[t];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new e.DOMStorageWrapper(o)}}catch(e){}return new r.MemoryStorage},o=exports.PersistentStorage=t("localStorage"),s=exports.SessionStorage=t("sessionStorage");
},{"./DOMStorageWrapper":161,"./MemoryStorage":162}],68:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNodeSdk=exports.isReactNative=exports.isMobileCordova=exports.getUA=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e=require("./constants"),t=exports.getUA=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},n=exports.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(t())},r=exports.isReactNative=function(){return"object"===("undefined"==typeof navigator?"undefined":o(navigator))&&"ReactNative"===navigator.product},i=exports.isNodeSdk=function(){return!0===e.CONSTANTS.NODE_CLIENT||!0===e.CONSTANTS.NODE_ADMIN};
},{"./constants":84}],75:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTimeoutNonBlocking=exports.exportPropGetter=exports.beingCrawled=exports.callUserCallback=exports.exceptionGuard=exports.tryParseInt=exports.INTEGER_REGEXP_=exports.errorForServerCode=exports.isWindowsStoreApp=exports.isChromeExtensionContentScript=exports.doubleToIEEE754String=exports.bindCallback=exports.each=exports.splitStringBySize=exports.ObjectToUniqueKey=exports.requireKey=exports.stringCompare=exports.nameCompare=exports.MAX_NAME=exports.MIN_NAME=exports.executeWhenDOMReady=exports.isInvalidJSONNumber=exports.warnAboutUnsupportedMethod=exports.warnIfPageIsSecure=exports.warn=exports.fatal=exports.error=exports.logWrapper=exports.log=exports.enableLogging=exports.logger=exports.sha1=exports.base64Decode=exports.base64Encode=exports.LUIDGenerator=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.setBufferImpl=d;var t,o=require("../../../utils/assert"),r=require("../../../utils/obj"),n=require("../../../utils/crypt"),i=require("../../../utils/Sha1"),s=require("../../../utils/utf8"),a=require("../../../utils/json"),u=require("../storage/storage"),p=require("../../../utils/environment"),l=exports.LUIDGenerator=function(){var e=1;return function(){return e++}}(),c=exports.base64Encode=function(e){var t=(0,s.stringToByteArray)(e);return n.base64.encodeByteArray(t,!0)};function d(e){t=e}var f=exports.base64Decode=function(e){try{return t?new t(e,"base64").toString("utf8"):n.base64.decodeString(e,!0)}catch(e){w("base64Decode failed: ",e)}return null},g=exports.sha1=function(e){var t=(0,s.stringToByteArray)(e),o=new i.Sha1;o.update(t);var r=o.digest();return n.base64.encodeByteArray(r)},x=function t(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];for(var n="",i=0;i<o.length;i++)Array.isArray(o[i])||o[i]&&"object"===e(o[i])&&"number"==typeof o[i].length?n+=t.apply(null,o[i]):"object"===e(o[i])?n+=(0,a.stringify)(o[i]):n+=o[i],n+=" ";return n},b=exports.logger=null,h=!0,y=exports.enableLogging=function(t,r){(0,o.assert)(!r||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?("undefined"!=typeof console&&("function"==typeof console.log?exports.logger=b=void 0:"object"===e(console.log)&&(exports.logger=b=function(e){})),r&&u.SessionStorage.set("logging_enabled",!0)):"function"==typeof t?exports.logger=b=t:(exports.logger=b=null,u.SessionStorage.remove("logging_enabled"))},w=exports.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===h&&(h=!1,null===b&&!0===u.SessionStorage.get("logging_enabled")&&y(!0)),b){var o=x.apply(null,e);b(o)}},v=exports.logWrapper=function(e){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];w.apply(void 0,[e].concat(t))}},m=exports.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){x.apply(void 0,e);console.error}},E=exports.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=x.apply(void 0,e);throw new Error("FIREBASE FATAL ERROR: "+o)},S=exports.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof console){x.apply(void 0,e);console.warn}},M=exports.warnIfPageIsSecure=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},I=exports.warnAboutUnsupportedMethod=function(e){S(e+" is unsupported and will likely change soon.  Please do not use.")},N=exports.isInvalidJSONNumber=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},A=exports.executeWhenDOMReady=function(e){if((0,p.isNodeSdk)()||"complete"===document.readyState)e();else{var t=!1,o=function o(){document.body?t||(t=!0,e()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}},C=exports.MIN_NAME="[MIN_NAME]",T=exports.MAX_NAME="[MAX_NAME]",_=exports.nameCompare=function(e,t){if(e===t)return 0;if(e===C||t===T)return-1;if(t===C||e===T)return 1;var o=D(e),r=D(t);return null!==o?null!==r?o-r==0?e.length-t.length:o-r:-1:null!==r?1:e<t?-1:1},j=exports.stringCompare=function(e,t){return e===t?0:e<t?-1:1},q=exports.requireKey=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,a.stringify)(t))},k=exports.ObjectToUniqueKey=function t(o){if("object"!==(void 0===o?"undefined":e(o))||null===o)return(0,a.stringify)(o);var r=[];for(var n in o)r.push(n);r.sort();for(var i="{",s=0;s<r.length;s++)0!==s&&(i+=","),i+=(0,a.stringify)(r[s]),i+=":",i+=t(o[r[s]]);return i+="}"},O=exports.splitStringBySize=function(e,t){var o=e.length;if(o<=t)return[e];for(var r=[],n=0;n<o;n+=t)n+t>o?r.push(e.substring(n,o)):r.push(e.substring(n,n+t));return r},P=exports.each=function(e,t){if(Array.isArray(e))for(var o=0;o<e.length;++o)t(o,e[o]);else(0,r.forEach)(e,function(e,o){return t(o,e)})},G=exports.bindCallback=function(e,t){return t?e.bind(t):e},L=exports.doubleToIEEE754String=function(e){(0,o.assert)(!N(e),"Invalid JSON number");var t,r,n,i,s,a,u;for(0===e?(r=0,n=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(r=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,n=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(r=0,n=Math.round(e/Math.pow(2,-1074)))),a=[],s=52;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(t?1:0),a.reverse(),u=a.join("");var p="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),p+=l}return p.toLowerCase()},R=exports.isChromeExtensionContentScript=function(){return!("object"!==("undefined"==typeof window?"undefined":e(window))||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},U=exports.isWindowsStoreApp=function(){return"object"===("undefined"==typeof Windows?"undefined":e(Windows))&&"object"===e(Windows.UI)},B=exports.errorForServerCode=function(e,t){var o="Unknown Error";"too_big"===e?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?o="Client doesn't have permission to access the desired data.":"unavailable"==e&&(o="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+o);return r.code=e.toUpperCase(),r},W=exports.INTEGER_REGEXP_=new RegExp("^-?\\d{1,10}$"),D=exports.tryParseInt=function(e){if(W.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},F=exports.exceptionGuard=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||"";throw S("Exception was thrown by user callback.",t),e},Math.floor(0))}},X=exports.callUserCallback=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];"function"==typeof e&&F(function(){e.apply(void 0,t)})},K=exports.beingCrawled=function(){return("object"===("undefined"==typeof window?"undefined":e(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},z=exports.exportPropGetter=function(e,t,o){Object.defineProperty(e,t,{get:o})},J=exports.setTimeoutNonBlocking=function(t,o){var r=setTimeout(t,o);return"object"===(void 0===r?"undefined":e(r))&&r.unref&&r.unref(),r};
},{"../../../utils/assert":90,"../../../utils/obj":101,"../../../utils/crypt":114,"../../../utils/Sha1":115,"../../../utils/utf8":116,"../../../utils/json":117,"../storage/storage":118,"../../../utils/environment":68}],87:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ValidationPath=exports.Path=void 0;var e=require("./util"),t=require("../../../utils/utf8"),i=function(){function t(e,t){if(void 0===t){this.pieces_=e.split("/");for(var i=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},t.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},t.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],i=this.pieceNum_;i<this.pieces_.length-1;i++)e.push(this.pieces_[i]);return new t(e,0)},t.prototype.child=function(e){for(var i=[],r=this.pieceNum_;r<this.pieces_.length;r++)i.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)i.push(e.pieces_[r]);else{var n=e.split("/");for(r=0;r<n.length;r++)n[r].length>0&&i.push(n[r])}return new t(i,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,i){var r=e.getFront(),n=i.getFront();if(null===r)return i;if(r===n)return t.relativePath(e.popFront(),i.popFront());throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+e+")")},t.comparePaths=function(t,i){for(var r=t.slice(),n=i.slice(),s=0;s<r.length&&s<n.length;s++){var h=(0,e.nameCompare)(r[s],n[s]);if(0!==h)return h}return r.length===n.length?0:r.length<n.length?-1:1},t.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,i=e.pieceNum_;t<=this.pieces_.length;t++,i++)if(this.pieces_[t]!==e.pieces_[i])return!1;return!0},t.prototype.contains=function(e){var t=this.pieceNum_,i=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0},t}();exports.Path=i;var r=function(){function e(e,i){this.errorPrefix_=i,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,t.stringLength)(this.parts_[r]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=(0,t.stringLength)(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=(0,t.stringLength)(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}();exports.ValidationPath=r;
},{"./util":75,"../../../utils/utf8":116}],148:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.PROTOCOL_VERSION="5",o=exports.VERSION_PARAM="v",s=exports.TRANSPORT_SESSION_PARAM="s",r=exports.REFERER_PARAM="r",t=exports.FORGE_REF="f",O=exports.FORGE_DOMAIN="firebaseio.com",R=exports.LAST_SESSION_PARAM="ls",_=exports.WEBSOCKET="websocket",p=exports.LONG_POLLING="long_polling";
},{}],105:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RepoInfo=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=require("../../utils/assert"),o=require("../../utils/obj"),s=require("./storage/storage"),i=require("../realtime/Constants"),r=function(){function r(t,e,o,i,r){void 0===r&&(r=""),this.secure=e,this.namespace=o,this.webSocketOnly=i,this.persistenceKey=r,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=s.PersistentStorage.get("host:"+t)||this.host}return r.prototype.needsQueryParam=function(){return this.host!==this.internalHost},r.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},r.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},r.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},r.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&s.PersistentStorage.set("host:"+this.host,this.internalHost))},r.prototype.connectionURL=function(s,r){var n;if((0,e.assert)("string"==typeof s,"typeof type must == string"),(0,e.assert)("object"===(void 0===r?"undefined":t(r)),"typeof params must == object"),s===i.WEBSOCKET)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(s!==i.LONG_POLLING)throw new Error("Unknown connection type: "+s);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(r.ns=this.namespace);var h=[];return(0,o.forEach)(r,function(t,e){h.push(t+"="+e)}),n+h.join("&")},r.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},r.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},r}();exports.RepoInfo=r;
},{"../../utils/assert":90,"../../utils/obj":101,"./storage/storage":118,"../realtime/Constants":148}],89:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseURL=exports.parseRepoInfo=void 0;var e=require("../Path"),r=require("../../RepoInfo"),s=require("../util");function t(e){for(var r="",s=e.split("/"),t=0;t<s.length;t++)if(s[t].length>0){var n=s[t];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch(e){}r+="/"+n}return r}var n=exports.parseRepoInfo=function(t){var n=o(t),a=n.subdomain;"firebase"===n.domain&&(0,s.fatal)(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),a&&"undefined"!=a||(0,s.fatal)("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||(0,s.warnIfPageIsSecure)();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new r.RepoInfo(n.host,n.secure,a,i),path:new e.Path(n.pathString)}},o=exports.parseURL=function(e){var r="",s="",n="",o="",a=!0,i="https",p=443;if("string"==typeof e){var u=e.indexOf("//");u>=0&&(i=e.substring(0,u-1),e=e.substring(u+2));var f=e.indexOf("/");-1===f&&(f=e.length),r=e.substring(0,f),o=t(e.substring(f));var h=r.split(".");3===h.length?(s=h[1],n=h[0].toLowerCase()):2===h.length&&(s=h[0]),(u=r.indexOf(":"))>=0&&(a="https"===i||"wss"===i,p=parseInt(r.substring(u+1),10))}return{host:r,port:p,domain:s,subdomain:n,secure:a,scheme:i,pathString:o}};
},{"../Path":87,"../../RepoInfo":105,"../util":75}],85:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.errorPrefix=r;var t=exports.validateArgCount=function(e,t,r,o){var a;if(o<t?a="at least "+t:o>r&&(a=0===r?"none":"no more than "+r),a)throw new Error(e+" failed: Was called with "+o+(1===o?" argument.":" arguments.")+" Expects "+a+".")};function r(e,t,r){var o="";switch(t){case 1:o=r?"first":"First";break;case 2:o=r?"second":"Second";break;case 3:o=r?"third":"Third";break;case 4:o=r?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var a=e+" failed: ";return a+=o+" argument "}var o=exports.validateNamespace=function(e,t,o,a){if((!a||o)&&"string"!=typeof o)throw new Error(r(e,t,a)+"must be a valid firebase namespace.")},a=exports.validateCallback=function(e,t,o,a){if((!a||o)&&"function"!=typeof o)throw new Error(r(e,t,a)+"must be a valid function.")},n=exports.validateContextObject=function(t,o,a,n){if((!n||a)&&("object"!==(void 0===a?"undefined":e(a))||null===a))throw new Error(r(t,o,n)+"must be a valid context object.")};
},{}],88:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateObjectContainsKey=exports.validateObject=exports.validateString=exports.validateBoolean=exports.validateCredential=exports.validateUrl=exports.validateWritablePath=exports.validateRootPathString=exports.validatePathString=exports.validateKey=exports.validateEventType=exports.validatePriority=exports.validateFirebaseMergeDataArg=exports.validateFirebaseMergePaths=exports.validateFirebaseData=exports.validateFirebaseDataArg=exports.isValidPriority=exports.isValidRootPathString=exports.isValidPathString=exports.isValidKey=exports.MAX_LEAF_SIZE_=exports.INVALID_PATH_REGEX_=exports.INVALID_KEY_REGEX_=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t=require("./Path"),e=require("../../../utils/obj"),i=require("./util"),o=require("../../../utils/validation"),n=require("../../../utils/utf8"),a=exports.INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,s=exports.INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,l=exports.MAX_LEAF_SIZE_=10485760,d=exports.isValidKey=function(r){return"string"==typeof r&&0!==r.length&&!a.test(r)},f=exports.isValidPathString=function(r){return"string"==typeof r&&0!==r.length&&!s.test(r)},u=exports.isValidRootPathString=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),f(r)},c=exports.isValidPriority=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!(0,i.isInvalidJSONNumber)(t)||t&&"object"===(void 0===t?"undefined":r(t))&&(0,e.contains)(t,".sv")},p=exports.validateFirebaseDataArg=function(r,t,e,i,n){n&&void 0===e||v((0,o.errorPrefix)(r,t,n),e,i)},v=exports.validateFirebaseData=function o(a,s,f){var u=f instanceof t.Path?new t.ValidationPath(f,a):f;if(void 0===s)throw new Error(a+"contains undefined "+u.toErrorString());if("function"==typeof s)throw new Error(a+"contains a function "+u.toErrorString()+" with contents = "+s.toString());if((0,i.isInvalidJSONNumber)(s))throw new Error(a+"contains "+s.toString()+" "+u.toErrorString());if("string"==typeof s&&s.length>l/3&&(0,n.stringLength)(s)>l)throw new Error(a+"contains a string greater than "+l+" utf8 bytes "+u.toErrorString()+" ('"+s.substring(0,50)+"...')");if(s&&"object"===(void 0===s?"undefined":r(s))){var c=!1,p=!1;if((0,e.forEach)(s,function(r,t){if(".value"===r)c=!0;else if(".priority"!==r&&".sv"!==r&&(p=!0,!d(r)))throw new Error(a+" contains an invalid key ("+r+") "+u.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');u.push(r),o(a,t,u),u.pop()}),c&&p)throw new Error(a+' contains ".value" child '+u.toErrorString()+" in addition to actual children.")}},h=exports.validateFirebaseMergePaths=function(r,e){var i,o;for(i=0;i<e.length;i++)for(var n=(o=e[i]).slice(),a=0;a<n.length;a++)if(".priority"===n[a]&&a===n.length-1);else if(!d(n[a]))throw new Error(r+"contains an invalid key ("+n[a]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(t.Path.comparePaths);var s=null;for(i=0;i<e.length;i++){if(o=e[i],null!==s&&s.contains(o))throw new Error(r+"contains a path "+s.toString()+" that is ancestor of another path "+o.toString());s=o}},b=exports.validateFirebaseMergeDataArg=function(i,n,a,s,l){if(!l||void 0!==a){var d=(0,o.errorPrefix)(i,n,l);if(!a||"object"!==(void 0===a?"undefined":r(a))||Array.isArray(a))throw new Error(d+" must be an object containing the children to replace.");var f=[];(0,e.forEach)(a,function(r,e){var i=new t.Path(r);if(v(d,e,s.child(i)),".priority"===i.getBack()&&!c(e))throw new Error(d+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(i)}),h(d,f)}},g=exports.validatePriority=function(r,t,e,n){if(!n||void 0!==e){if((0,i.isInvalidJSONNumber)(e))throw new Error((0,o.errorPrefix)(r,t,n)+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!c(e))throw new Error((0,o.errorPrefix)(r,t,n)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},y=exports.validateEventType=function(r,t,e,i){if(!i||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.errorPrefix)(r,t,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},x=exports.validateKey=function(r,t,e,i){if(!(i&&void 0===e||d(e)))throw new Error((0,o.errorPrefix)(r,t,i)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},w=exports.validatePathString=function(r,t,e,i){if(!(i&&void 0===e||f(e)))throw new Error((0,o.errorPrefix)(r,t,i)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},E=exports.validateRootPathString=function(r,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),w(r,t,e,i)},m=exports.validateWritablePath=function(r,t){if(".info"===t.getFront())throw new Error(r+" failed = Can't modify data under /.info/")},P=exports.validateUrl=function(r,t,e){var i=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!d(e.repoInfo.namespace)||0!==i.length&&!u(i))throw new Error((0,o.errorPrefix)(r,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},S=exports.validateCredential=function(r,t,e,i){if((!i||void 0!==e)&&"string"!=typeof e)throw new Error((0,o.errorPrefix)(r,t,i)+"must be a valid credential (a string).")},_=exports.validateBoolean=function(r,t,e,i){if((!i||void 0!==e)&&"boolean"!=typeof e)throw new Error((0,o.errorPrefix)(r,t,i)+"must be a boolean.")},F=exports.validateString=function(r,t,e,i){if((!i||void 0!==e)&&"string"!=typeof e)throw new Error((0,o.errorPrefix)(r,t,i)+"must be a valid string.")},A=exports.validateObject=function(t,e,i,n){if(!(n&&void 0===i||i&&"object"===(void 0===i?"undefined":r(i))&&null!==i))throw new Error((0,o.errorPrefix)(t,e,n)+"must be a valid object.")},I=exports.validateObjectContainsKey=function(t,i,n,a,s,l){if(!(n&&"object"===(void 0===n?"undefined":r(n))&&(0,e.contains)(n,a))){if(s)return;throw new Error((0,o.errorPrefix)(t,i,s)+'must contain the key "'+a+'"')}if(l){var d=(0,e.safeGet)(n,a);if("number"===l&&"number"!=typeof d||"string"===l&&"string"!=typeof d||"boolean"===l&&"boolean"!=typeof d||"function"===l&&"function"!=typeof d||"object"===l&&"object"!==(void 0===d?"undefined":r(d))&&d)throw s?new Error((0,o.errorPrefix)(t,i,s)+'contains invalid value for key "'+a+'" (must be of type "'+l+'")'):new Error((0,o.errorPrefix)(t,i,s)+'must contain the key "'+a+'" with type "'+l+'"')}};
},{"./Path":87,"../../../utils/obj":101,"./util":75,"../../../utils/validation":85,"../../../utils/utf8":116}],96:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnDisconnect=void 0;var t=require("../../utils/validation"),e=require("../core/util/validation"),i=require("../core/util/util"),a=require("../../utils/promise"),n=function(){function n(t,e){this.repo_=t,this.path_=e}return n.prototype.cancel=function(e){(0,t.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),(0,t.validateCallback)("OnDisconnect.cancel",1,e,!0);var i=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,i.wrapCallback(e)),i.promise},n.prototype.remove=function(i){(0,t.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),(0,e.validateWritablePath)("OnDisconnect.remove",this.path_),(0,t.validateCallback)("OnDisconnect.remove",1,i,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(i)),n.promise},n.prototype.set=function(i,n){(0,t.validateArgCount)("OnDisconnect.set",1,2,arguments.length),(0,e.validateWritablePath)("OnDisconnect.set",this.path_),(0,e.validateFirebaseDataArg)("OnDisconnect.set",1,i,this.path_,!1),(0,t.validateCallback)("OnDisconnect.set",2,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,i,r.wrapCallback(n)),r.promise},n.prototype.setWithPriority=function(i,n,r){(0,t.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,e.validateWritablePath)("OnDisconnect.setWithPriority",this.path_),(0,e.validateFirebaseDataArg)("OnDisconnect.setWithPriority",1,i,this.path_,!1),(0,e.validatePriority)("OnDisconnect.setWithPriority",2,n,!1),(0,t.validateCallback)("OnDisconnect.setWithPriority",3,r,!0);var o=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,i,n,o.wrapCallback(r)),o.promise},n.prototype.update=function(n,r){if((0,t.validateArgCount)("OnDisconnect.update",1,2,arguments.length),(0,e.validateWritablePath)("OnDisconnect.update",this.path_),Array.isArray(n)){for(var o={},s=0;s<n.length;++s)o[""+s]=n[s];n=o,(0,i.warn)("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,e.validateFirebaseMergeDataArg)("OnDisconnect.update",1,n,this.path_,!1),(0,t.validateCallback)("OnDisconnect.update",2,r,!0);var c=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,n,c.wrapCallback(r)),c.promise},n}();exports.OnDisconnect=n;
},{"../../utils/validation":85,"../core/util/validation":88,"../core/util/util":75,"../../utils/promise":80}],97:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransactionResult=void 0;var t=require("../../utils/validation"),o=function(){function o(t,o){this.committed=t,this.snapshot=o}return o.prototype.toJSON=function(){return(0,t.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},o}();exports.TransactionResult=o;
},{"../../utils/validation":85}],99:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextPushId=void 0;var r=require("../../../utils/assert"),e=exports.nextPushId=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,o=[];return function(s){var a,n=s===t;t=s;var u=new Array(8);for(a=7;a>=0;a--)u[a]=e.charAt(s%64),s=Math.floor(s/64);(0,r.assert)(0===s,"Cannot push at time == 0");var h=u.join("");if(n){for(a=11;a>=0&&63===o[a];a--)o[a]=0;o[a]++}else for(a=0;a<12;a++)o[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)h+=e.charAt(o[a]);return(0,r.assert)(20===h.length,"nextPushId: Length should be 20."),h}}();
},{"../../../utils/assert":90}],136:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}();exports.NamedNode=e;
},{}],137:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Index=void 0;var e=require("../Node"),t=require("../../util/util"),r=function(){function r(){}return r.prototype.getCompare=function(){return this.compare.bind(this)},r.prototype.indexedValueChanged=function(r,o){var n=new e.NamedNode(t.MIN_NAME,r),i=new e.NamedNode(t.MIN_NAME,o);return 0!==this.compare(n,i)},r.prototype.minPost=function(){return e.NamedNode.MIN},r}();exports.Index=r;
},{"../Node":136,"../../util/util":75}],92:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEY_INDEX=exports.KeyIndex=void 0;var e,t=require("./Index"),n=require("../Node"),r=require("../../util/util"),o=require("../../../../utils/assert"),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return i(u,t),Object.defineProperty(u,"__EMPTY_NODE",{get:function(){return e},set:function(t){e=t},enumerable:!0,configurable:!0}),u.prototype.compare=function(e,t){return(0,r.nameCompare)(e.name,t.name)},u.prototype.isDefinedOn=function(e){throw(0,o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},u.prototype.indexedValueChanged=function(e,t){return!1},u.prototype.minPost=function(){return n.NamedNode.MIN},u.prototype.maxPost=function(){return new n.NamedNode(r.MAX_NAME,e)},u.prototype.makePost=function(t,r){return(0,o.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new n.NamedNode(t,e)},u.prototype.toString=function(){return".key"},u}(t.Index);exports.KeyIndex=u;var p=exports.KEY_INDEX=new u;
},{"./Index":137,"../Node":136,"../../util/util":75,"../../../../utils/assert":90}],175:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validatePriorityNode=exports.priorityHashText=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.setMaxNode=s;var e,r=require("../../../utils/assert"),o=require("../util/util"),i=require("../../../utils/obj");function s(t){e=t}var n=exports.priorityHashText=function(t){return"number"==typeof t?"number:"+(0,o.doubleToIEEE754String)(t):"string:"+t},u=exports.validatePriorityNode=function(o){if(o.isLeafNode()){var s=o.val();(0,r.assert)("string"==typeof s||"number"==typeof s||"object"===(void 0===s?"undefined":t(s))&&(0,i.contains)(s,".sv"),"Priority must be a string or number.")}else(0,r.assert)(o===e||o.isEmpty(),"priority of unexpected type.");(0,r.assert)(o===e||o.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
},{"../../../utils/assert":90,"../util/util":75,"../../../utils/obj":101}],138:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LeafNode=void 0;var t,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=require("../../../utils/assert"),o=require("../util/util"),i=require("./snap"),n=function(){function n(t,e){void 0===e&&(e=n.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,(0,r.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),(0,i.validatePriorityNode)(this.priorityNode_)}return Object.defineProperty(n,"__childrenNodeConstructor",{get:function(){return t},set:function(e){t=e},enumerable:!0,configurable:!0}),n.prototype.isLeafNode=function(){return!0},n.prototype.getPriority=function(){return this.priorityNode_},n.prototype.updatePriority=function(t){return new n(this.value_,t)},n.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE},n.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE},n.prototype.hasChild=function(){return!1},n.prototype.getPredecessorChildName=function(t,e){return null},n.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},n.prototype.updateChild=function(t,e){var o=t.getFront();return null===o?e:e.isEmpty()&&".priority"!==o?this:((0,r.assert)(".priority"!==o||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},n.prototype.isEmpty=function(){return!1},n.prototype.numChildren=function(){return 0},n.prototype.forEachChild=function(t,e){return!1},n.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},n.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+(0,i.priorityHashText)(this.priorityNode_.val())+":");var r=e(this.value_);t+=r+":",t+="number"===r?(0,o.doubleToIEEE754String)(this.value_):this.value_,this.lazyHash_=(0,o.sha1)(t)}return this.lazyHash_},n.prototype.getValue=function(){return this.value_},n.prototype.compareTo=function(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,r.assert)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},n.prototype.compareToLeafNode_=function(t){var o=e(t.value_),i=e(this.value_),u=n.VALUE_TYPE_ORDER.indexOf(o),p=n.VALUE_TYPE_ORDER.indexOf(i);return(0,r.assert)(u>=0,"Unknown leaf type: "+o),(0,r.assert)(p>=0,"Unknown leaf type: "+i),u===p?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:p-u},n.prototype.withIndex=function(){return this},n.prototype.isIndexed=function(){return!0},n.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n}();exports.LeafNode=n;
},{"../../../utils/assert":90,"../util/util":75,"./snap":175}],93:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRIORITY_INDEX=exports.PriorityIndex=void 0,exports.setNodeFromJSON=p,exports.setMaxNode=a;var e,t,r=require("./Index"),o=require("../../util/util"),n=require("../Node"),i=require("../LeafNode"),u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();function p(t){e=t}function a(e){t=e}var c=function(r){function p(){return null!==r&&r.apply(this,arguments)||this}return u(p,r),p.prototype.compare=function(e,t){var r=e.node.getPriority(),n=t.node.getPriority(),i=r.compareTo(n);return 0===i?(0,o.nameCompare)(e.name,t.name):i},p.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},p.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},p.prototype.minPost=function(){return n.NamedNode.MIN},p.prototype.maxPost=function(){return new n.NamedNode(o.MAX_NAME,new i.LeafNode("[PRIORITY-POST]",t))},p.prototype.makePost=function(t,r){var o=e(t);return new n.NamedNode(r,new i.LeafNode("[PRIORITY-POST]",o))},p.prototype.toString=function(){return".priority"},p}(r.Index);exports.PriorityIndex=c;var d=exports.PRIORITY_INDEX=new c;
},{"./Index":137,"../../util/util":75,"../Node":136,"../LeafNode":138}],176:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,r,o,n){void 0===n&&(n=null),this.isReverse_=o,this.resultGenerator_=n,this.nodeStack_=[];for(var i=1;!t.isEmpty();)if(t=t,i=e?r(t.key,e):1,o&&(i*=-1),i<0)t=this.isReverse_?t.left:t.right;else{if(0===i){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}();exports.SortedMapIterator=t;var e=function(){function t(e,r,n,i,l){this.key=e,this.value=r,this.color=null!=n?n:t.RED,this.left=null!=i?i:o.EMPTY_NODE,this.right=null!=l?l:o.EMPTY_NODE}return t.prototype.copy=function(e,r,o,n,i){return new t(null!=e?e:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=n?n:this.left,null!=i?i:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,r){var o,n;return(n=(o=r(t,(n=this).key))<0?n.copy(null,null,null,n.left.insert(t,e,r),null):0===o?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,r))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return o.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var r,n;if(e(t,(r=this).key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return o.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){var t;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((t=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}();exports.LLRBNode=e;var r=function(){function t(){}return t.prototype.copy=function(t,e,r,o,n){return this},t.prototype.insert=function(t,r,o){return new e(t,r,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}();exports.LLRBEmptyNode=r;var o=function(){function o(t,e){void 0===e&&(e=o.EMPTY_NODE),this.comparator_=t,this.root_=e}return o.prototype.insert=function(t,r){return new o(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,e.BLACK,null,null))},o.prototype.remove=function(t){return new o(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,e.BLACK,null,null))},o.prototype.get=function(t){for(var e,r=this.root_;!r.isEmpty();){if(0===(e=this.comparator_(t,r.key)))return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null},o.prototype.getPredecessorKey=function(t){for(var e,r=this.root_,o=null;!r.isEmpty();){if(0===(e=this.comparator_(t,r.key))){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},o.prototype.isEmpty=function(){return this.root_.isEmpty()},o.prototype.count=function(){return this.root_.count()},o.prototype.minKey=function(){return this.root_.minKey()},o.prototype.maxKey=function(){return this.root_.maxKey()},o.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},o.prototype.getIterator=function(e){return new t(this.root_,null,this.comparator_,!1,e)},o.prototype.getIteratorFrom=function(e,r){return new t(this.root_,e,this.comparator_,!1,r)},o.prototype.getReverseIteratorFrom=function(e,r){return new t(this.root_,e,this.comparator_,!0,r)},o.prototype.getReverseIterator=function(e){return new t(this.root_,null,this.comparator_,!0,e)},o.EMPTY_NODE=new r,o}();exports.SortedMap=o;
},{}],171:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildChildSet=void 0;var t=require("../util/SortedMap"),n=Math.log(2),e=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/n,10)),this.current_=this.count-1;var r,o=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&o}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),r=exports.buildChildSet=function(n,r,o,u){n.sort(r);var i=function(e){for(var r=null,u=null,i=n.length,l=function(e,r){var u=i-e,l=i;i-=e;var a=function e(r,u){var i,l,s=u-r;if(0==s)return null;if(1==s)return i=n[r],l=o?o(i):i,new t.LLRBNode(l,i.node,t.LLRBNode.BLACK,null,null);var a=parseInt(s/2,10)+r,d=e(r,a),L=e(a+1,u);return i=n[a],l=o?o(i):i,new t.LLRBNode(l,i.node,t.LLRBNode.BLACK,d,L)}(u+1,l),d=n[u],L=o?o(d):d;s(new t.LLRBNode(L,d.node,r,null,a))},s=function(t){r?(r.left=t,r=t):(u=t,r=t)},a=0;a<e.count;++a){var d=e.nextBitIsOne(),L=Math.pow(2,e.count-(a+1));d?l(L,t.LLRBNode.BLACK):(l(L,t.LLRBNode.BLACK),l(L,t.LLRBNode.RED))}return u}(new e(n.length));return new t.SortedMap(u||r,i)};
},{"../util/SortedMap":176}],173:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexMap=void 0;var e,t=require("../../../utils/assert"),n=require("./childSet"),r=require("../../../utils/obj"),i=require("./Node"),o=require("./indexes/PriorityIndex"),d=require("./indexes/KeyIndex"),s={},a=function(){function a(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(a,"Default",{get:function(){return(0,t.assert)(s&&o.PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),e=e||new a({".priority":s},{".priority":o.PRIORITY_INDEX})},enumerable:!0,configurable:!0}),a.prototype.get=function(e){var t=(0,r.safeGet)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===s?null:t},a.prototype.hasIndex=function(e){return(0,r.contains)(this.indexSet_,e.toString())},a.prototype.addIndex=function(e,o){(0,t.assert)(e!==d.KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var u,x=[],p=!1,f=o.getIterator(i.NamedNode.Wrap),h=f.getNext();h;)p=p||e.isDefinedOn(h.node),x.push(h),h=f.getNext();u=p?(0,n.buildChildSet)(x,e.getCompare()):s;var m=e.toString(),l=(0,r.clone)(this.indexSet_);l[m]=e;var I=(0,r.clone)(this.indexes_);return I[m]=u,new a(I,l)},a.prototype.addToIndexes=function(e,o){var d=this;return new a((0,r.map)(this.indexes_,function(a,u){var x=(0,r.safeGet)(d.indexSet_,u);if((0,t.assert)(x,"Missing index implementation for "+u),a===s){if(x.isDefinedOn(e.node)){for(var p=[],f=o.getIterator(i.NamedNode.Wrap),h=f.getNext();h;)h.name!=e.name&&p.push(h),h=f.getNext();return p.push(e),(0,n.buildChildSet)(p,x.getCompare())}return s}var m=o.get(e.name),l=a;return m&&(l=l.remove(new i.NamedNode(e.name,m))),l.insert(e,e.node)}),this.indexSet_)},a.prototype.removeFromIndexes=function(e,t){return new a((0,r.map)(this.indexes_,function(n){if(n===s)return n;var r=t.get(e.name);return r?n.remove(new i.NamedNode(e.name,r)):n}),this.indexSet_)},a}();exports.IndexMap=a;
},{"../../../utils/assert":90,"./childSet":171,"../../../utils/obj":101,"./Node":136,"./indexes/PriorityIndex":93,"./indexes/KeyIndex":92}],172:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NAME_ONLY_COMPARATOR=r,exports.NAME_COMPARATOR=t;var e=require("../util/util");function r(r,t){return(0,e.nameCompare)(r.name,t.name)}function t(r,t){return(0,e.nameCompare)(r,t)}
},{"../util/util":75}],139:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_NODE=exports.MaxNode=exports.ChildrenNode=void 0;var e,t=require("../../../utils/assert"),r=require("../util/util"),i=require("../util/SortedMap"),n=require("./Node"),o=require("./snap"),s=require("./indexes/PriorityIndex"),a=require("./indexes/KeyIndex"),u=require("./IndexMap"),d=require("./LeafNode"),p=require("./comparators"),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),l=function(){function d(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&(0,o.validatePriorityNode)(this.priorityNode_),this.children_.isEmpty()&&(0,t.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(d,"EMPTY_NODE",{get:function(){return e||(e=new d(new i.SortedMap(p.NAME_COMPARATOR),null,u.IndexMap.Default))},enumerable:!0,configurable:!0}),d.prototype.isLeafNode=function(){return!1},d.prototype.getPriority=function(){return this.priorityNode_||e},d.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new d(this.children_,e,this.indexMap_)},d.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var r=this.children_.get(t);return null===r?e:r},d.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},d.prototype.hasChild=function(e){return null!==this.children_.get(e)},d.prototype.updateImmediateChild=function(r,i){if((0,t.assert)(i,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(i);var o=new n.NamedNode(r,i),s=void 0,a=void 0;return i.isEmpty()?(s=this.children_.remove(r),a=this.indexMap_.removeFromIndexes(o,this.children_)):(s=this.children_.insert(r,i),a=this.indexMap_.addToIndexes(o,this.children_)),new d(s,s.isEmpty()?e:this.priorityNode_,a)},d.prototype.updateChild=function(e,r){var i=e.getFront();if(null===i)return r;(0,t.assert)(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var n=this.getImmediateChild(i).updateChild(e.popFront(),r);return this.updateImmediateChild(i,n)},d.prototype.isEmpty=function(){return this.children_.isEmpty()},d.prototype.numChildren=function(){return this.children_.count()},d.prototype.val=function(e){if(this.isEmpty())return null;var t={},r=0,i=0,n=!0;if(this.forEachChild(s.PRIORITY_INDEX,function(o,s){t[o]=s.val(e),r++,n&&d.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):n=!1}),!e&&n&&i<2*r){var o=[];for(var a in t)o[a]=t[a];return o}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t},d.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+(0,o.priorityHashText)(this.getPriority().val())+":"),this.forEachChild(s.PRIORITY_INDEX,function(t,r){var i=r.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":(0,r.sha1)(e)}return this.lazyHash_},d.prototype.getPredecessorChildName=function(e,t,r){var i=this.resolveIndex_(r);if(i){var o=i.getPredecessorKey(new n.NamedNode(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},d.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.minKey();return r&&r.name}return this.children_.minKey()},d.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new n.NamedNode(t,this.children_.get(t)):null},d.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var r=t.maxKey();return r&&r.name}return this.children_.maxKey()},d.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new n.NamedNode(t,this.children_.get(t)):null},d.prototype.forEachChild=function(e,t){var r=this.resolveIndex_(e);return r?r.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},d.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},d.prototype.getIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,function(e){return e});for(var i=this.children_.getIteratorFrom(e.name,n.NamedNode.Wrap),o=i.peek();null!=o&&t.compare(o,e)<0;)i.getNext(),o=i.peek();return i},d.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},d.prototype.getReverseIteratorFrom=function(e,t){var r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,function(e){return e});for(var i=this.children_.getReverseIteratorFrom(e.name,n.NamedNode.Wrap),o=i.peek();null!=o&&t.compare(o,e)>0;)i.getNext(),o=i.peek();return i},d.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===y?-1:0},d.prototype.withIndex=function(e){if(e===a.KEY_INDEX||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new d(this.children_,this.priorityNode_,t)},d.prototype.isIndexed=function(e){return e===a.KEY_INDEX||this.indexMap_.hasIndex(e)},d.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var r=this.getIterator(s.PRIORITY_INDEX),i=t.getIterator(s.PRIORITY_INDEX),n=r.getNext(),o=i.getNext();n&&o;){if(n.name!==o.name||!n.node.equals(o.node))return!1;n=r.getNext(),o=i.getNext()}return null===n&&null===o}return!1}return!1},d.prototype.resolveIndex_=function(e){return e===a.KEY_INDEX?null:this.indexMap_.get(e.toString())},d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d}();exports.ChildrenNode=l;var c=function(e){function t(){return e.call(this,new i.SortedMap(p.NAME_COMPARATOR),l.EMPTY_NODE,u.IndexMap.Default)||this}return h(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return l.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(l);exports.MaxNode=c;var y=exports.MAX_NODE=new c;Object.defineProperties(n.NamedNode,{MIN:{value:new n.NamedNode(r.MIN_NAME,l.EMPTY_NODE)},MAX:{value:new n.NamedNode(r.MAX_NAME,y)}}),a.KeyIndex.__EMPTY_NODE=l.EMPTY_NODE,d.LeafNode.__childrenNodeConstructor=l,(0,o.setMaxNode)(y),(0,s.setMaxNode)(y);
},{"../../../utils/assert":90,"../util/util":75,"../util/SortedMap":176,"./Node":136,"./snap":175,"./indexes/PriorityIndex":93,"./indexes/KeyIndex":92,"./IndexMap":173,"./LeafNode":138,"./comparators":172}],129:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.nodeFromJSON=s;var r=require("./ChildrenNode"),i=require("./LeafNode"),n=require("./Node"),t=require("../../../utils/obj"),o=require("../../../utils/assert"),d=require("./childSet"),u=require("./comparators"),a=require("./IndexMap"),f=require("./indexes/PriorityIndex"),l=!0;function s(p,y){if(void 0===y&&(y=null),null===p)return r.ChildrenNode.EMPTY_NODE;if("object"===(void 0===p?"undefined":e(p))&&".priority"in p&&(y=p[".priority"]),(0,o.assert)(null===y||"string"==typeof y||"number"==typeof y||"object"===(void 0===y?"undefined":e(y))&&".sv"in y,"Invalid priority type found: "+(void 0===y?"undefined":e(y))),"object"===(void 0===p?"undefined":e(p))&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!==(void 0===p?"undefined":e(p))||".sv"in p){var N=p;return new i.LeafNode(N,s(y))}if(p instanceof Array||!l){var c=r.ChildrenNode.EMPTY_NODE,v=p;return(0,t.forEach)(v,function(e,r){if((0,t.contains)(v,e)&&"."!==e.substring(0,1)){var i=s(r);!i.isLeafNode()&&i.isEmpty()||(c=c.updateImmediateChild(e,i))}}),c.updatePriority(s(y))}var m=[],b=!1,E=p;if((0,t.forEach)(E,function(e,r){if("string"!=typeof e||"."!==e.substring(0,1)){var i=s(E[e]);i.isEmpty()||(b=b||!i.getPriority().isEmpty(),m.push(new n.NamedNode(e,i)))}}),0==m.length)return r.ChildrenNode.EMPTY_NODE;var h=(0,d.buildChildSet)(m,u.NAME_ONLY_COMPARATOR,function(e){return e.name},u.NAME_COMPARATOR);if(b){var O=(0,d.buildChildSet)(m,f.PRIORITY_INDEX.getCompare());return new r.ChildrenNode(h,s(y),new a.IndexMap({".priority":O},{".priority":f.PRIORITY_INDEX}))}return new r.ChildrenNode(h,s(y),a.IndexMap.Default)}(0,f.setNodeFromJSON)(s);
},{"./ChildrenNode":139,"./LeafNode":138,"./Node":136,"../../../utils/obj":101,"../../../utils/assert":90,"./childSet":171,"./comparators":172,"./IndexMap":173,"./indexes/PriorityIndex":93}],94:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VALUE_INDEX=exports.ValueIndex=void 0;var e=require("./Index"),t=require("../Node"),o=require("../../util/util"),r=require("../nodeFromJSON"),n=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),u=function(e){function u(){return null!==e&&e.apply(this,arguments)||this}return n(u,e),u.prototype.compare=function(e,t){var r=e.node.compareTo(t.node);return 0===r?(0,o.nameCompare)(e.name,t.name):r},u.prototype.isDefinedOn=function(e){return!0},u.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},u.prototype.minPost=function(){return t.NamedNode.MIN},u.prototype.maxPost=function(){return t.NamedNode.MAX},u.prototype.makePost=function(e,o){var n=(0,r.nodeFromJSON)(e);return new t.NamedNode(o,n)},u.prototype.toString=function(){return".value"},u}(e.Index);exports.ValueIndex=u;var p=exports.VALUE_INDEX=new u;
},{"./Index":137,"../Node":136,"../../util/util":75,"../nodeFromJSON":129}],95:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PathIndex=void 0;var t=require("../../../../utils/assert"),e=require("../../util/util"),r=require("./Index"),n=require("../ChildrenNode"),o=require("../Node"),i=require("../nodeFromJSON"),a=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),d=function(r){function d(e){var n=r.call(this)||this;return n.indexPath_=e,(0,t.assert)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return a(d,r),d.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},d.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},d.prototype.compare=function(t,r){var n=this.extractChild(t.node),o=this.extractChild(r.node),i=n.compareTo(o);return 0===i?(0,e.nameCompare)(t.name,r.name):i},d.prototype.makePost=function(t,e){var r=(0,i.nodeFromJSON)(t),a=n.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,r);return new o.NamedNode(e,a)},d.prototype.maxPost=function(){var t=n.ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,n.MAX_NODE);return new o.NamedNode(e.MAX_NAME,t)},d.prototype.toString=function(){return this.indexPath_.slice().join("/")},d}(r.Index);exports.PathIndex=d;
},{"../../../../utils/assert":90,"../../util/util":75,"./Index":137,"../ChildrenNode":139,"../Node":136,"../nodeFromJSON":129}],134:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSnapshot=void 0;var t=require("../../utils/validation"),e=require("../core/util/validation"),n=require("../core/util/Path"),a=require("../core/snap/indexes/PriorityIndex"),r=function(){function r(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return r.prototype.val=function(){return(0,t.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},r.prototype.exportVal=function(){return(0,t.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},r.prototype.toJSON=function(){return(0,t.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},r.prototype.exists=function(){return(0,t.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},r.prototype.child=function(o){(0,t.validateArgCount)("DataSnapshot.child",0,1,arguments.length),o=String(o),(0,e.validatePathString)("DataSnapshot.child",1,o,!1);var i=new n.Path(o),h=this.ref_.child(i);return new r(this.node_.getChild(i),h,a.PRIORITY_INDEX)},r.prototype.hasChild=function(a){(0,t.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),(0,e.validatePathString)("DataSnapshot.hasChild",1,a,!1);var r=new n.Path(a);return!this.node_.getChild(r).isEmpty()},r.prototype.getPriority=function(){return(0,t.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},r.prototype.forEach=function(e){var n=this;return(0,t.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),(0,t.validateCallback)("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,o){return e(new r(o,n.ref_.child(t),a.PRIORITY_INDEX))})},r.prototype.hasChildren=function(){return(0,t.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(r.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),r.prototype.numChildren=function(){return(0,t.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},r.prototype.getRef=function(){return(0,t.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(r.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),r}();exports.DataSnapshot=r;
},{"../../utils/validation":85,"../core/util/validation":88,"../core/util/Path":87,"../core/snap/indexes/PriorityIndex":93}],135:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CancelEvent=exports.DataEvent=void 0;var t=require("../../../utils/json"),e=function(){function e(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,t.stringify)(this.snapshot.exportVal())},e}();exports.DataEvent=e;var n=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}();exports.CancelEvent=n;
},{"../../../utils/json":117}],91:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChildEventRegistration=exports.ValueEventRegistration=void 0;var t=require("../../api/DataSnapshot"),e=require("./Event"),a=require("../../../utils/obj"),n=require("../../../utils/assert"),c=function(){function a(t,e,a){this.callback_=t,this.cancelCallback_=e,this.context_=a}return a.prototype.respondsTo=function(t){return"value"===t},a.prototype.createEvent=function(a,n){var c=n.getQueryParams().getIndex();return new e.DataEvent("value",this,new t.DataSnapshot(a.snapshotNode,n.getRef(),c))},a.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,n.assert)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var a=this.cancelCallback_;return function(){a.call(e,t.error)}}var c=this.callback_;return function(){c.call(e,t.snapshot)}},a.prototype.createCancelEvent=function(t,a){return this.cancelCallback_?new e.CancelEvent(this,t,a):null},a.prototype.matches=function(t){return t instanceof a&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},a.prototype.hasAnyCallback=function(){return null!==this.callback_},a}();exports.ValueEventRegistration=c;var l=function(){function c(t,e,a){this.callbacks_=t,this.cancelCallback_=e,this.context_=a}return c.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,a.contains)(this.callbacks_,e)},c.prototype.createCancelEvent=function(t,a){return this.cancelCallback_?new e.CancelEvent(this,t,a):null},c.prototype.createEvent=function(a,c){(0,n.assert)(null!=a.childName,"Child events should have a childName.");var l=c.getRef().child(a.childName),r=c.getQueryParams().getIndex();return new e.DataEvent(a.type,this,new t.DataSnapshot(a.snapshotNode,l,r),a.prevName)},c.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,n.assert)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var a=this.cancelCallback_;return function(){a.call(e,t.error)}}var c=this.callbacks_[t.eventType];return function(){c.call(e,t.snapshot,t.prevName)}},c.prototype.matches=function(t){if(t instanceof c){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var e=(0,a.getCount)(t.callbacks_);if(e===(0,a.getCount)(this.callbacks_)){if(1===e){var n=(0,a.getAnyKey)(t.callbacks_),l=(0,a.getAnyKey)(this.callbacks_);return!(l!==n||t.callbacks_[n]&&this.callbacks_[l]&&t.callbacks_[n]!==this.callbacks_[l])}return(0,a.every)(this.callbacks_,function(e,a){return t.callbacks_[e]===a})}}}return!1},c.prototype.hasAnyCallback=function(){return null!==this.callbacks_},c}();exports.ChildEventRegistration=l;
},{"../../api/DataSnapshot":134,"./Event":135,"../../../utils/obj":101,"../../../utils/assert":90}],70:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Query=void 0;var e,t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=require("../../utils/assert"),i=require("../core/snap/indexes/KeyIndex"),o=require("../core/snap/indexes/PriorityIndex"),n=require("../core/snap/indexes/ValueIndex"),a=require("../core/snap/indexes/PathIndex"),l=require("../core/util/util"),u=require("../core/util/Path"),s=require("../core/util/validation"),y=require("../../utils/validation"),d=require("../core/view/EventRegistration"),h=require("../../utils/promise"),p=function(){function p(e,t,r,i){this.repo=e,this.path=t,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(p,"__referenceConstructor",{get:function(){return(0,r.assert)(e,"Reference.ts has not been loaded"),e},set:function(t){e=t},enumerable:!0,configurable:!0}),p.validateQueryEndpoints_=function(e){var u=null,y=null;if(e.hasStart()&&(u=e.getIndexStartValue()),e.hasEnd()&&(y=e.getIndexEndValue()),e.getIndex()===i.KEY_INDEX){var d="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",h="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=l.MIN_NAME)throw new Error(d);if("string"!=typeof u)throw new Error(h)}if(e.hasEnd()){if(e.getIndexEndName()!=l.MAX_NAME)throw new Error(d);if("string"!=typeof y)throw new Error(h)}}else if(e.getIndex()===o.PRIORITY_INDEX){if(null!=u&&!(0,s.isValidPriority)(u)||null!=y&&!(0,s.isValidPriority)(y))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,r.assert)(e.getIndex()instanceof a.PathIndex||e.getIndex()===n.VALUE_INDEX,"unknown index type."),null!=u&&"object"===(void 0===u?"undefined":t(u))||null!=y&&"object"===(void 0===y?"undefined":t(y)))throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},p.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},p.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},p.prototype.getQueryParams=function(){return this.queryParams_},p.prototype.getRef=function(){return(0,y.validateArgCount)("Query.ref",0,0,arguments.length),new p.__referenceConstructor(this.repo,this.path)},p.prototype.on=function(e,t,r,i){(0,y.validateArgCount)("Query.on",2,4,arguments.length),(0,s.validateEventType)("Query.on",1,e,!1),(0,y.validateCallback)("Query.on",2,t,!1);var o=p.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(t,o.cancel,o.context);else{var n={};n[e]=t,this.onChildEvent(n,o.cancel,o.context)}return t},p.prototype.onValueEvent=function(e,t,r){var i=new d.ValueEventRegistration(e,t||null,r||null);this.repo.addEventCallbackForQuery(this,i)},p.prototype.onChildEvent=function(e,t,r){var i=new d.ChildEventRegistration(e,t,r);this.repo.addEventCallbackForQuery(this,i)},p.prototype.off=function(e,t,r){(0,y.validateArgCount)("Query.off",0,3,arguments.length),(0,s.validateEventType)("Query.off",1,e,!0),(0,y.validateCallback)("Query.off",2,t,!0),(0,y.validateContextObject)("Query.off",3,r,!0);var i=null,o=null;if("value"===e){var n=t||null;i=new d.ValueEventRegistration(n,null,r||null)}else e&&(t&&((o={})[e]=t),i=new d.ChildEventRegistration(o,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},p.prototype.once=function(e,t,r,i){var o=this;(0,y.validateArgCount)("Query.once",1,4,arguments.length),(0,s.validateEventType)("Query.once",1,e,!1),(0,y.validateCallback)("Query.once",2,t,!0);var n=p.getCancelAndContextArgs_("Query.once",r,i),a=!0,l=new h.Deferred;(0,h.attachDummyErrorHandler)(l.promise);var u=function r(i){a&&(a=!1,o.off(e,r),t&&t.bind(n.context)(i),l.resolve(i))};return this.on(e,u,function(t){o.off(e,u),n.cancel&&n.cancel.bind(n.context)(t),l.reject(t)}),l.promise},p.prototype.limitToFirst=function(e){if((0,y.validateArgCount)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new p(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},p.prototype.limitToLast=function(e){if((0,y.validateArgCount)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new p(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},p.prototype.orderByChild=function(e){if((0,y.validateArgCount)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');(0,s.validatePathString)("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new u.Path(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new a.PathIndex(t),i=this.queryParams_.orderBy(r);return p.validateQueryEndpoints_(i),new p(this.repo,this.path,i,!0)},p.prototype.orderByKey=function(){(0,y.validateArgCount)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(i.KEY_INDEX);return p.validateQueryEndpoints_(e),new p(this.repo,this.path,e,!0)},p.prototype.orderByPriority=function(){(0,y.validateArgCount)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(o.PRIORITY_INDEX);return p.validateQueryEndpoints_(e),new p(this.repo,this.path,e,!0)},p.prototype.orderByValue=function(){(0,y.validateArgCount)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(n.VALUE_INDEX);return p.validateQueryEndpoints_(e),new p(this.repo,this.path,e,!0)},p.prototype.startAt=function(e,t){void 0===e&&(e=null),(0,y.validateArgCount)("Query.startAt",0,2,arguments.length),(0,s.validateFirebaseDataArg)("Query.startAt",1,e,this.path,!0),(0,s.validateKey)("Query.startAt",2,t,!0);var r=this.queryParams_.startAt(e,t);if(p.validateLimit_(r),p.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,t=null),new p(this.repo,this.path,r,this.orderByCalled_)},p.prototype.endAt=function(e,t){void 0===e&&(e=null),(0,y.validateArgCount)("Query.endAt",0,2,arguments.length),(0,s.validateFirebaseDataArg)("Query.endAt",1,e,this.path,!0),(0,s.validateKey)("Query.endAt",2,t,!0);var r=this.queryParams_.endAt(e,t);if(p.validateLimit_(r),p.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new p(this.repo,this.path,r,this.orderByCalled_)},p.prototype.equalTo=function(e,t){if((0,y.validateArgCount)("Query.equalTo",1,2,arguments.length),(0,s.validateFirebaseDataArg)("Query.equalTo",1,e,this.path,!1),(0,s.validateKey)("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},p.prototype.toString=function(){return(0,y.validateArgCount)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},p.prototype.toJSON=function(){return(0,y.validateArgCount)("Query.toJSON",0,1,arguments.length),this.toString()},p.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},p.prototype.queryIdentifier=function(){var e=this.queryObject(),t=(0,l.ObjectToUniqueKey)(e);return"{}"===t?"default":t},p.prototype.isEqual=function(e){if((0,y.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof p)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var t=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return t&&r&&i},p.getCancelAndContextArgs_=function(e,r,i){var o={cancel:null,context:null};if(r&&i)o.cancel=r,(0,y.validateCallback)(e,3,o.cancel,!0),o.context=i,(0,y.validateContextObject)(e,4,o.context,!0);else if(r)if("object"===(void 0===r?"undefined":t(r))&&null!==r)o.context=r;else{if("function"!=typeof r)throw new Error((0,y.errorPrefix)(e,3,!0)+" must either be a cancel callback or a context object.");o.cancel=r}return o},Object.defineProperty(p.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),p}();exports.Query=p;
},{"../../utils/assert":90,"../core/snap/indexes/KeyIndex":92,"../core/snap/indexes/PriorityIndex":93,"../core/snap/indexes/ValueIndex":94,"../core/snap/indexes/PathIndex":95,"../core/util/util":75,"../core/util/Path":87,"../core/util/validation":88,"../../utils/validation":85,"../core/view/EventRegistration":91,"../../utils/promise":80}],149:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CountedSet=void 0;var t=require("../../../utils/obj"),e=function(){function e(){this.set={}}return e.prototype.add=function(t,e){this.set[t]=null===e||e},e.prototype.contains=function(e){return(0,t.contains)(this.set,e)},e.prototype.get=function(t){return this.contains(t)?this.set[t]:void 0},e.prototype.remove=function(t){delete this.set[t]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return(0,t.isEmpty)(this.set)},e.prototype.count=function(){return(0,t.getCount)(this.set)},e.prototype.each=function(e){(0,t.forEach)(this.set,function(t,o){return e(t,o)})},e.prototype.keys=function(){var e=[];return(0,t.forEach)(this.set,function(t){e.push(t)}),e},e}();exports.CountedSet=e;
},{"../../../utils/obj":101}],123:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SparseSnapshotTree=void 0;var e=require("./util/Path"),t=require("./snap/indexes/PriorityIndex"),i=require("./util/CountedSet"),n=function(){function n(){this.value_=null,this.children_=null}return n.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},n.prototype.remember=function(e,t){if(e.isEmpty())this.value_=t,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(e,t);else{null==this.children_&&(this.children_=new i.CountedSet);var r=e.getFront();this.children_.contains(r)||this.children_.add(r,new n);var l=this.children_.get(r);e=e.popFront(),l.remember(e,t)}},n.prototype.forget=function(i){if(i.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var n=this.value_;this.value_=null;var r=this;return n.forEachChild(t.PRIORITY_INDEX,function(t,i){r.remember(new e.Path(t),i)}),this.forget(i)}if(null!==this.children_){var l=i.getFront();if(i=i.popFront(),this.children_.contains(l))this.children_.get(l).forget(i)&&this.children_.remove(l);return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},n.prototype.forEachTree=function(t,i){null!==this.value_?i(t,this.value_):this.forEachChild(function(n,r){var l=new e.Path(t.toString()+"/"+n);r.forEachTree(l,i)})},n.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,i){e(t,i)})},n}();exports.SparseSnapshotTree=n;
},{"./util/Path":87,"./snap/indexes/PriorityIndex":93,"./util/CountedSet":149}],128:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveDeferredValueSnapshot=exports.resolveDeferredValueTree=exports.resolveDeferredValue=exports.generateWithValues=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=require("../../../utils/assert"),t=require("./Path"),o=require("../SparseSnapshotTree"),n=require("../snap/LeafNode"),a=require("../snap/nodeFromJSON"),i=require("../snap/indexes/PriorityIndex"),s=exports.generateWithValues=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},u=exports.resolveDeferredValue=function(t,o){return t&&"object"===(void 0===t?"undefined":e(t))?((0,r.assert)(".sv"in t,"Unexpected leaf node or priority contents"),o[t[".sv"]]):t},l=exports.resolveDeferredValueTree=function(e,r){var n=new o.SparseSnapshotTree;return e.forEachTree(new t.Path(""),function(e,t){n.remember(e,p(t,r))}),n},p=exports.resolveDeferredValueSnapshot=function e(r,t){var o,s=r.getPriority().val(),l=u(s,t);if(r.isLeafNode()){var p=r,f=u(p.getValue(),t);return f!==p.getValue()||l!==p.getPriority().val()?new n.LeafNode(f,(0,a.nodeFromJSON)(l)):r}var d=r;return o=d,l!==d.getPriority().val()&&(o=o.updatePriority(new n.LeafNode(l))),d.forEachChild(i.PRIORITY_INDEX,function(r,n){var a=e(n,t);a!==n&&(o=o.updateImmediateChild(r,a))}),o};
},{"../../../utils/assert":90,"./Path":87,"../SparseSnapshotTree":123,"../snap/LeafNode":138,"../snap/nodeFromJSON":129,"../snap/indexes/PriorityIndex":93}],168:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OperationSource=exports.OperationType=void 0;var e=require("../../../utils/assert"),r=exports.OperationType=void 0;!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(r||(exports.OperationType=r={}));var t=function(){function r(r,t,o,s){this.fromUser=r,this.fromServer=t,this.queryId=o,this.tagged=s,(0,e.assert)(!s||t,"Tagged queries must be from server.")}return r.User=new r(!0,!1,null,!1),r.Server=new r(!1,!0,null,!1),r.forServerTaggedQuery=function(e){return new r(!1,!0,e,!0)},r}();exports.OperationSource=t;
},{"../../../utils/assert":90}],164:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AckUserWrite=void 0;var e=require("../../../utils/assert"),t=require("../util/Path"),r=require("./Operation"),i=function(){function i(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=r.OperationType.ACK_USER_WRITE,this.source=r.OperationSource.User}return i.prototype.operationForChild=function(r){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return(0,e.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var s=this.affectedTree.subtree(new t.Path(r));return new i(t.Path.Empty,s,this.revert)}return(0,e.assert)(this.path.getFront()===r,"operationForChild called for unrelated child."),new i(this.path.popFront(),this.affectedTree,this.revert)},i}();exports.AckUserWrite=i;
},{"../../../utils/assert":90,"../util/Path":87,"./Operation":168}],165:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ImmutableTree=void 0;var t,e=require("./SortedMap"),r=require("./Path"),n=require("./util"),i=require("../../../utils/obj"),o=function(){return t||(t=new e.SortedMap(n.stringCompare)),t},h=function(){function t(t,e){void 0===e&&(e=o()),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return(0,i.forEach)(e,function(t,e){n=n.set(new r.Path(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:r.Path.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var o=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=o?{path:new r.Path(n).child(o.path),value:o.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var r=e.getFront(),n=this.children.get(r);return null!==n?n.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,r){if(e.isEmpty())return new t(r,this.children);var n=e.getFront(),i=(this.children.get(n)||t.Empty).set(e.popFront(),r),o=this.children.insert(n,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var r=e.getFront(),n=this.children.get(r);if(n){var i=n.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),r=this.children.get(e);return r?r.get(t.popFront()):null},t.prototype.setTree=function(e,r){if(e.isEmpty())return r;var n=e.getFront(),i=(this.children.get(n)||t.Empty).setTree(e.popFront(),r),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(r.Path.Empty,t)},t.prototype.fold_=function(t,e){var r={};return this.children.inorderTraversal(function(n,i){r[n]=i.fold_(t.child(n),e)}),e(t,this.value,r)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,r.Path.Empty,e)},t.prototype.findOnPath_=function(t,e,r){var n=!!this.value&&r(e,this.value);if(n)return n;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),r):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,r.Path.Empty,e)},t.prototype.foreachOnPath_=function(e,r,n){if(e.isEmpty())return this;this.value&&n(r,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),r.child(i),n):t.Empty},t.prototype.foreach=function(t){this.foreach_(r.Path.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(r,n){n.foreach_(t.child(r),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,r){r.value&&t(e,r.value)})},t.Empty=new t(null),t}();exports.ImmutableTree=h;
},{"./SortedMap":176,"./Path":87,"./util":75,"../../../utils/obj":101}],166:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListenComplete=void 0;var t=require("../util/Path"),e=require("./Operation"),r=function(){function r(t,r){this.source=t,this.path=r,this.type=e.OperationType.LISTEN_COMPLETE}return r.prototype.operationForChild=function(e){return this.path.isEmpty()?new r(this.source,t.Path.Empty):new r(this.source,this.path.popFront())},r}();exports.ListenComplete=r;
},{"../util/Path":87,"./Operation":168}],169:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Overwrite=void 0;var t=require("./Operation"),e=require("../util/Path"),i=function(){function i(e,i,r){this.source=e,this.path=i,this.snap=r,this.type=t.OperationType.OVERWRITE}return i.prototype.operationForChild=function(t){return this.path.isEmpty()?new i(this.source,e.Path.Empty,this.snap.getImmediateChild(t)):new i(this.source,this.path.popFront(),this.snap)},i}();exports.Overwrite=i;
},{"./Operation":168,"../util/Path":87}],167:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Merge=void 0;var t=require("./Operation"),e=require("./Overwrite"),r=require("../util/Path"),i=require("../../../utils/assert"),o=function(){function o(e,r,i){this.source=e,this.path=r,this.children=i,this.type=t.OperationType.MERGE}return o.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new r.Path(t));return n.isEmpty()?null:n.value?new e.Overwrite(this.source,r.Path.Empty,n.value):new o(this.source,r.Path.Empty,n)}return(0,i.assert)(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new o(this.source,this.path.popFront(),this.children)},o.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},o}();exports.Merge=o;
},{"./Operation":168,"./Overwrite":169,"../util/Path":87,"../../../utils/assert":90}],142:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,e){this.node_=t,this.fullyInitialized_=i,this.filtered_=e}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var i=t.getFront();return this.isCompleteForChild(i)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();exports.CacheNode=t;
},{}],140:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewCache=void 0;var e=require("../snap/ChildrenNode"),t=require("./CacheNode"),n=function(){function n(e,t){this.eventCache_=e,this.serverCache_=t}return n.prototype.updateEventSnap=function(e,r,o){return new n(new t.CacheNode(e,r,o),this.serverCache_)},n.prototype.updateServerSnap=function(e,r,o){return new n(this.eventCache_,new t.CacheNode(e,r,o))},n.prototype.getEventCache=function(){return this.eventCache_},n.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},n.prototype.getServerCache=function(){return this.serverCache_},n.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},n.Empty=new n(new t.CacheNode(e.ChildrenNode.EMPTY_NODE,!1,!1),new t.CacheNode(e.ChildrenNode.EMPTY_NODE,!1,!1)),n}();exports.ViewCache=n;
},{"../snap/ChildrenNode":139,"./CacheNode":142}],180:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n,t,d,h){this.type=e,this.snapshotNode=n,this.childName=t,this.oldSnap=d,this.prevName=h}return e.valueChange=function(n){return new e(e.VALUE,n)},e.childAddedChange=function(n,t){return new e(e.CHILD_ADDED,t,n)},e.childRemovedChange=function(n,t){return new e(e.CHILD_REMOVED,t,n)},e.childChangedChange=function(n,t,d){return new e(e.CHILD_CHANGED,t,n,d)},e.childMovedChange=function(n,t){return new e(e.CHILD_MOVED,t,n)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}();exports.Change=e;
},{}],151:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexedFilter=void 0;var e=require("../../../../utils/assert"),i=require("../Change"),t=require("../../snap/ChildrenNode"),d=require("../../snap/indexes/PriorityIndex"),n=function(){function n(e){this.index_=e}return n.prototype.updateChild=function(t,d,n,h,a,r){(0,e.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=t.getImmediateChild(d);return o.getChild(h).equals(n.getChild(h))&&o.isEmpty()==n.isEmpty()?t:(null!=r&&(n.isEmpty()?t.hasChild(d)?r.trackChildChange(i.Change.childRemovedChange(d,o)):(0,e.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?r.trackChildChange(i.Change.childAddedChange(d,n)):r.trackChildChange(i.Change.childChangedChange(d,n,o))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(d,n).withIndex(this.index_))},n.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(d.PRIORITY_INDEX,function(e,d){t.hasChild(e)||n.trackChildChange(i.Change.childRemovedChange(e,d))}),t.isLeafNode()||t.forEachChild(d.PRIORITY_INDEX,function(t,d){if(e.hasChild(t)){var h=e.getImmediateChild(t);h.equals(d)||n.trackChildChange(i.Change.childChangedChange(t,d,h))}else n.trackChildChange(i.Change.childAddedChange(t,d))})),t.withIndex(this.index_)},n.prototype.updatePriority=function(e,i){return e.isEmpty()?t.ChildrenNode.EMPTY_NODE:e.updatePriority(i)},n.prototype.filtersNodes=function(){return!1},n.prototype.getIndexedFilter=function(){return this},n.prototype.getIndex=function(){return this.index_},n}();exports.IndexedFilter=n;
},{"../../../../utils/assert":90,"../Change":180,"../../snap/ChildrenNode":139,"../../snap/indexes/PriorityIndex":93}],185:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChildChangeAccumulator=void 0;var e=require("../../../utils/obj"),a=require("./Change"),n=require("../../../utils/assert"),h=function(){function h(){this.changeMap_={}}return h.prototype.trackChildChange=function(h){var t=h.type,C=h.childName;(0,n.assert)(t==a.Change.CHILD_ADDED||t==a.Change.CHILD_CHANGED||t==a.Change.CHILD_REMOVED,"Only child changes supported for tracking"),(0,n.assert)(".priority"!==C,"Only non-priority child changes can be tracked.");var i=(0,e.safeGet)(this.changeMap_,C);if(i){var s=i.type;if(t==a.Change.CHILD_ADDED&&s==a.Change.CHILD_REMOVED)this.changeMap_[C]=a.Change.childChangedChange(C,h.snapshotNode,i.snapshotNode);else if(t==a.Change.CHILD_REMOVED&&s==a.Change.CHILD_ADDED)delete this.changeMap_[C];else if(t==a.Change.CHILD_REMOVED&&s==a.Change.CHILD_CHANGED)this.changeMap_[C]=a.Change.childRemovedChange(C,i.oldSnap);else if(t==a.Change.CHILD_CHANGED&&s==a.Change.CHILD_ADDED)this.changeMap_[C]=a.Change.childAddedChange(C,h.snapshotNode);else{if(t!=a.Change.CHILD_CHANGED||s!=a.Change.CHILD_CHANGED)throw(0,n.assertionError)("Illegal combination of changes: "+h+" occurred after "+i);this.changeMap_[C]=a.Change.childChangedChange(C,h.snapshotNode,i.oldSnap)}}else this.changeMap_[C]=h},h.prototype.getChanges=function(){return(0,e.getValues)(this.changeMap_)},h}();exports.ChildChangeAccumulator=h;
},{"../../../utils/obj":101,"./Change":180,"../../../utils/assert":90}],186:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WriteTreeCompleteChildSource=exports.NO_COMPLETE_CHILD_SOURCE=exports.NoCompleteChildSource_=void 0;var e=require("./CacheNode"),t=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,r){return null},e}();exports.NoCompleteChildSource_=t;var r=exports.NO_COMPLETE_CHILD_SOURCE=new t,o=function(){function t(e,t,r){void 0===r&&(r=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}return t.prototype.getCompleteChild=function(t){var r=this.viewCache_.getEventCache();if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);var o=null!=this.optCompleteServerCache_?new e.CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,o)},t.prototype.getChildAfterChild=function(e,t,r){var o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(o,t,1,r,e);return 0===i.length?null:i[0]},t}();exports.WriteTreeCompleteChildSource=o;
},{"./CacheNode":142}],178:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewProcessor=exports.ProcessorResult=void 0;var e=require("../operation/Operation"),t=require("../../../utils/assert"),r=require("./ChildChangeAccumulator"),i=require("./Change"),a=require("../snap/ChildrenNode"),l=require("../snap/indexes/KeyIndex"),n=require("../util/ImmutableTree"),o=require("../util/Path"),d=require("./CompleteChildSource"),p=function(){return function(e,t){this.viewCache=e,this.changes=t}}();exports.ProcessorResult=p;var s=function(){function s(e){this.filter_=e}return s.prototype.assertIndexed=function(e){(0,t.assert)(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,t.assert)(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},s.prototype.applyOperation=function(i,a,l,n){var o,d,h=new r.ChildChangeAccumulator;if(a.type===e.OperationType.OVERWRITE){var v=a;v.source.fromUser?o=this.applyUserOverwrite_(i,v.path,v.snap,l,n,h):((0,t.assert)(v.source.fromServer,"Unknown source."),d=v.source.tagged||i.getServerCache().isFiltered()&&!v.path.isEmpty(),o=this.applyServerOverwrite_(i,v.path,v.snap,l,n,d,h))}else if(a.type===e.OperationType.MERGE){var u=a;u.source.fromUser?o=this.applyUserMerge_(i,u.path,u.children,l,n,h):((0,t.assert)(u.source.fromServer,"Unknown source."),d=u.source.tagged||i.getServerCache().isFiltered(),o=this.applyServerMerge_(i,u.path,u.children,l,n,d,h))}else if(a.type===e.OperationType.ACK_USER_WRITE){var c=a;o=c.revert?this.revertUserWrite_(i,c.path,l,n,h):this.ackUserWrite_(i,c.path,c.affectedTree,l,n,h)}else{if(a.type!==e.OperationType.LISTEN_COMPLETE)throw(0,t.assertionError)("Unknown operation type: "+a.type);o=this.listenComplete_(i,a.path,l,h)}var g=h.getChanges();return s.maybeAddValueEvent_(i,o,g),new p(o,g)},s.maybeAddValueEvent_=function(e,t,r){var a=t.getEventCache();if(a.isFullyInitialized()){var l=a.getNode().isLeafNode()||a.getNode().isEmpty(),n=e.getCompleteEventSnap();(r.length>0||!e.getEventCache().isFullyInitialized()||l&&!a.getNode().equals(n)||!a.getNode().getPriority().equals(n.getPriority()))&&r.push(i.Change.valueChange(t.getCompleteEventSnap()))}},s.prototype.generateEventCacheAfterServerEvent_=function(e,r,i,l,n){var o=e.getEventCache();if(null!=i.shadowingWrite(r))return e;var d=void 0,p=void 0;if(r.isEmpty())if((0,t.assert)(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var s=e.getCompleteServerSnap(),h=s instanceof a.ChildrenNode?s:a.ChildrenNode.EMPTY_NODE,v=i.calcCompleteEventChildren(h);d=this.filter_.updateFullNode(e.getEventCache().getNode(),v,n)}else{var u=i.calcCompleteEventCache(e.getCompleteServerSnap());d=this.filter_.updateFullNode(e.getEventCache().getNode(),u,n)}else{var c=r.getFront();if(".priority"==c){(0,t.assert)(1==r.getLength(),"Can't have a priority with additional path components");var g=o.getNode();p=e.getServerCache().getNode();var C=i.calcEventCacheAfterServerOverwrite(r,g,p);d=null!=C?this.filter_.updatePriority(g,C):o.getNode()}else{var f=r.popFront(),y=void 0;if(o.isCompleteForChild(c)){p=e.getServerCache().getNode();var m=i.calcEventCacheAfterServerOverwrite(r,o.getNode(),p);y=null!=m?o.getNode().getImmediateChild(c).updateChild(f,m):o.getNode().getImmediateChild(c)}else y=i.calcCompleteChild(c,e.getServerCache());d=null!=y?this.filter_.updateChild(o.getNode(),c,y,f,l,n):o.getNode()}}return e.updateEventSnap(d,o.isFullyInitialized()||r.isEmpty(),this.filter_.filtersNodes())},s.prototype.applyServerOverwrite_=function(e,t,r,i,a,l,n){var o,p=e.getServerCache(),s=l?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())o=s.updateFullNode(p.getNode(),r,null);else if(s.filtersNodes()&&!p.isFiltered()){var h=p.getNode().updateChild(t,r);o=s.updateFullNode(p.getNode(),h,null)}else{var v=t.getFront();if(!p.isCompleteForPath(t)&&t.getLength()>1)return e;var u=t.popFront(),c=p.getNode().getImmediateChild(v).updateChild(u,r);o=".priority"==v?s.updatePriority(p.getNode(),c):s.updateChild(p.getNode(),v,c,u,d.NO_COMPLETE_CHILD_SOURCE,null)}var g=e.updateServerSnap(o,p.isFullyInitialized()||t.isEmpty(),s.filtersNodes()),C=new d.WriteTreeCompleteChildSource(i,g,a);return this.generateEventCacheAfterServerEvent_(g,t,i,C,n)},s.prototype.applyUserOverwrite_=function(e,t,r,i,l,n){var o,p,s=e.getEventCache(),h=new d.WriteTreeCompleteChildSource(i,e,l);if(t.isEmpty())p=this.filter_.updateFullNode(e.getEventCache().getNode(),r,n),o=e.updateEventSnap(p,!0,this.filter_.filtersNodes());else{var v=t.getFront();if(".priority"===v)p=this.filter_.updatePriority(e.getEventCache().getNode(),r),o=e.updateEventSnap(p,s.isFullyInitialized(),s.isFiltered());else{var u=t.popFront(),c=s.getNode().getImmediateChild(v),g=void 0;if(u.isEmpty())g=r;else{var C=h.getCompleteChild(v);g=null!=C?".priority"===u.getBack()&&C.getChild(u.parent()).isEmpty()?C:C.updateChild(u,r):a.ChildrenNode.EMPTY_NODE}if(c.equals(g))o=e;else{var f=this.filter_.updateChild(s.getNode(),v,g,u,h,n);o=e.updateEventSnap(f,s.isFullyInitialized(),this.filter_.filtersNodes())}}}return o},s.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},s.prototype.applyUserMerge_=function(e,t,r,i,a,l){var n=this,o=e;return r.foreach(function(r,d){var p=t.child(r);s.cacheHasChild_(e,p.getFront())&&(o=n.applyUserOverwrite_(o,p,d,i,a,l))}),r.foreach(function(r,d){var p=t.child(r);s.cacheHasChild_(e,p.getFront())||(o=n.applyUserOverwrite_(o,p,d,i,a,l))}),o},s.prototype.applyMerge_=function(e,t){return t.foreach(function(t,r){e=e.updateChild(t,r)}),e},s.prototype.applyServerMerge_=function(e,t,r,i,a,l,d){var p=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var s,h=e;s=t.isEmpty()?r:n.ImmutableTree.Empty.setTree(t,r);var v=e.getServerCache().getNode();return s.children.inorderTraversal(function(t,r){if(v.hasChild(t)){var n=e.getServerCache().getNode().getImmediateChild(t),s=p.applyMerge_(n,r);h=p.applyServerOverwrite_(h,new o.Path(t),s,i,a,l,d)}}),s.children.inorderTraversal(function(t,r){var n=!e.getServerCache().isCompleteForChild(t)&&null==r.value;if(!v.hasChild(t)&&!n){var s=e.getServerCache().getNode().getImmediateChild(t),u=p.applyMerge_(s,r);h=p.applyServerOverwrite_(h,new o.Path(t),u,i,a,l,d)}}),h},s.prototype.ackUserWrite_=function(e,t,r,i,a,d){if(null!=i.shadowingWrite(t))return e;var p=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=r.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),i,a,p,d);if(t.isEmpty()){var h=n.ImmutableTree.Empty;return s.getNode().forEachChild(l.KEY_INDEX,function(e,t){h=h.set(new o.Path(e),t)}),this.applyServerMerge_(e,t,h,i,a,p,d)}return e}var v=n.ImmutableTree.Empty;return r.foreach(function(e,r){var i=t.child(e);s.isCompleteForPath(i)&&(v=v.set(e,s.getNode().getChild(i)))}),this.applyServerMerge_(e,t,v,i,a,p,d)},s.prototype.listenComplete_=function(e,t,r,i){var a=e.getServerCache(),l=e.updateServerSnap(a.getNode(),a.isFullyInitialized()||t.isEmpty(),a.isFiltered());return this.generateEventCacheAfterServerEvent_(l,t,r,d.NO_COMPLETE_CHILD_SOURCE,i)},s.prototype.revertUserWrite_=function(e,r,i,l,n){var p;if(null!=i.shadowingWrite(r))return e;var s=new d.WriteTreeCompleteChildSource(i,e,l),h=e.getEventCache().getNode(),v=void 0;if(r.isEmpty()||".priority"===r.getFront()){var u=void 0;if(e.getServerCache().isFullyInitialized())u=i.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();(0,t.assert)(c instanceof a.ChildrenNode,"serverChildren would be complete if leaf node"),u=i.calcCompleteEventChildren(c)}u=u,v=this.filter_.updateFullNode(h,u,n)}else{var g=r.getFront(),C=i.calcCompleteChild(g,e.getServerCache());null==C&&e.getServerCache().isCompleteForChild(g)&&(C=h.getImmediateChild(g)),(v=null!=C?this.filter_.updateChild(h,g,C,r.popFront(),s,n):e.getEventCache().getNode().hasChild(g)?this.filter_.updateChild(h,g,a.ChildrenNode.EMPTY_NODE,r.popFront(),s,n):h).isEmpty()&&e.getServerCache().isFullyInitialized()&&(p=i.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(v=this.filter_.updateFullNode(v,p,n))}return p=e.getServerCache().isFullyInitialized()||null!=i.shadowingWrite(o.Path.Empty),e.updateEventSnap(v,p,this.filter_.filtersNodes())},s}();exports.ViewProcessor=s;
},{"../operation/Operation":168,"../../../utils/assert":90,"./ChildChangeAccumulator":185,"./Change":180,"../snap/ChildrenNode":139,"../snap/indexes/KeyIndex":92,"../util/ImmutableTree":165,"../util/Path":87,"./CompleteChildSource":186}],179:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventGenerator=void 0;var e=require("../snap/Node"),t=require("./Change"),n=require("../../../utils/assert"),r=function(){function r(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return r.prototype.generateEventsForChanges=function(e,n,r){var a=this,o=[],i=[];return e.forEach(function(e){e.type===t.Change.CHILD_CHANGED&&a.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&i.push(t.Change.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,t.Change.CHILD_REMOVED,e,r,n),this.generateEventsForType_(o,t.Change.CHILD_ADDED,e,r,n),this.generateEventsForType_(o,t.Change.CHILD_MOVED,i,r,n),this.generateEventsForType_(o,t.Change.CHILD_CHANGED,e,r,n),this.generateEventsForType_(o,t.Change.VALUE,e,r,n),o},r.prototype.generateEventsForType_=function(e,t,n,r,a){var o=this,i=n.filter(function(e){return e.type===t});i.sort(this.compareChanges_.bind(this)),i.forEach(function(t){var n=o.materializeSingleChange_(t,a);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},r.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},r.prototype.compareChanges_=function(t,r){if(null==t.childName||null==r.childName)throw(0,n.assertionError)("Should only compare child_ events.");var a=new e.NamedNode(t.childName,t.snapshotNode),o=new e.NamedNode(r.childName,r.snapshotNode);return this.index_.compare(a,o)},r}();exports.EventGenerator=r;
},{"../snap/Node":136,"./Change":180,"../../../utils/assert":90}],141:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.View=void 0;var e=require("./filter/IndexedFilter"),t=require("./ViewProcessor"),r=require("../snap/ChildrenNode"),i=require("./CacheNode"),n=require("./ViewCache"),s=require("./EventGenerator"),a=require("../../../utils/assert"),o=require("../operation/Operation"),h=require("./Change"),l=require("../snap/indexes/PriorityIndex"),u=function(){function u(a,o){this.query_=a,this.eventRegistrations_=[];var h=this.query_.getQueryParams(),l=new e.IndexedFilter(h.getIndex()),u=h.getNodeFilter();this.processor_=new t.ViewProcessor(u);var c=o.getServerCache(),v=o.getEventCache(),g=l.updateFullNode(r.ChildrenNode.EMPTY_NODE,c.getNode(),null),d=u.updateFullNode(r.ChildrenNode.EMPTY_NODE,v.getNode(),null),p=new i.CacheNode(g,c.isFullyInitialized(),l.filtersNodes()),C=new i.CacheNode(d,v.isFullyInitialized(),u.filtersNodes());this.viewCache_=new n.ViewCache(C,p),this.eventGenerator_=new s.EventGenerator(this.query_)}return u.prototype.getQuery=function(){return this.query_},u.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},u.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},u.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},u.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},u.prototype.removeEventRegistration=function(e,t){var r=[];if(t){(0,a.assert)(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var n=e.createCancelEvent(t,i);n&&r.push(n)})}if(e){for(var n=[],s=0;s<this.eventRegistrations_.length;++s){var o=this.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){n=n.concat(this.eventRegistrations_.slice(s+1));break}}else n.push(o)}this.eventRegistrations_=n}else this.eventRegistrations_=[];return r},u.prototype.applyOperation=function(e,t,r){e.type===o.OperationType.MERGE&&null!==e.source.queryId&&((0,a.assert)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,a.assert)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,n=this.processor_.applyOperation(i,e,t,r);return this.processor_.assertIndexed(n.viewCache),(0,a.assert)(n.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},u.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),r=[];t.getNode().isLeafNode()||t.getNode().forEachChild(l.PRIORITY_INDEX,function(e,t){r.push(h.Change.childAddedChange(e,t))});return t.isFullyInitialized()&&r.push(h.Change.valueChange(t.getNode())),this.generateEventsForChanges_(r,t.getNode(),e)},u.prototype.generateEventsForChanges_=function(e,t,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,i)},u}();exports.View=u;
},{"./filter/IndexedFilter":151,"./ViewProcessor":178,"../snap/ChildrenNode":139,"./CacheNode":142,"./ViewCache":140,"./EventGenerator":179,"../../../utils/assert":90,"../operation/Operation":168,"./Change":180,"../snap/indexes/PriorityIndex":93}],98:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncPoint=void 0;var e,t=require("./view/CacheNode"),r=require("./snap/ChildrenNode"),i=require("../../utils/assert"),n=require("../../utils/obj"),o=require("./view/ViewCache"),s=require("./view/View"),a=function(){function a(){this.views_={}}return Object.defineProperty(a,"__referenceConstructor",{get:function(){return(0,i.assert)(e,"Reference.ts has not been loaded"),e},set:function(t){(0,i.assert)(!e,"__referenceConstructor has already been defined"),e=t},enumerable:!0,configurable:!0}),a.prototype.isEmpty=function(){return(0,n.isEmpty)(this.views_)},a.prototype.applyOperation=function(e,t,r){var o=e.source.queryId;if(null!==o){var s=(0,n.safeGet)(this.views_,o);return(0,i.assert)(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(e,t,r)}var a=[];return(0,n.forEach)(this.views_,function(i,n){a=a.concat(n.applyOperation(e,t,r))}),a},a.prototype.addEventRegistration=function(e,i,a,u,l){var c=e.queryIdentifier(),p=(0,n.safeGet)(this.views_,c);if(!p){var v=a.calcCompleteEventCache(l?u:null),f=!1;v?f=!0:u instanceof r.ChildrenNode?(v=a.calcCompleteEventChildren(u),f=!1):(v=r.ChildrenNode.EMPTY_NODE,f=!1);var h=new o.ViewCache(new t.CacheNode(v,f,!1),new t.CacheNode(u,l,!1));p=new s.View(e,h),this.views_[c]=p}return p.addEventRegistration(i),p.getInitialEvents(i)},a.prototype.removeEventRegistration=function(e,t,r){var i=e.queryIdentifier(),o=[],s=[],u=this.hasCompleteView();if("default"===i){var l=this;(0,n.forEach)(this.views_,function(e,i){s=s.concat(i.removeEventRegistration(t,r)),i.isEmpty()&&(delete l.views_[e],i.getQuery().getQueryParams().loadsAllData()||o.push(i.getQuery()))})}else{var c=(0,n.safeGet)(this.views_,i);c&&(s=s.concat(c.removeEventRegistration(t,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return u&&!this.hasCompleteView()&&o.push(new a.__referenceConstructor(e.repo,e.path)),{removed:o,events:s}},a.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},a.prototype.getCompleteServerCache=function(e){var t=null;return(0,n.forEach)(this.views_,function(r,i){t=t||i.getCompleteServerCache(e)}),t},a.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return(0,n.safeGet)(this.views_,t)},a.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},a.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},a.prototype.getCompleteView=function(){return(0,n.findValue)(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},a}();exports.SyncPoint=a;
},{"./view/CacheNode":142,"./snap/ChildrenNode":139,"../../utils/assert":90,"../../utils/obj":101,"./view/ViewCache":140,"./view/View":141}],184:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CompoundWrite=void 0;var e=require("./util/ImmutableTree"),t=require("./util/Path"),r=require("../../utils/obj"),i=require("./snap/Node"),n=require("./snap/indexes/PriorityIndex"),u=require("../../utils/assert"),o=function(){function o(e){this.writeTree_=e}return o.prototype.addWrite=function(r,i){if(r.isEmpty())return new o(new e.ImmutableTree(i));var n=this.writeTree_.findRootMostValueAndPath(r);if(null!=n){var u=n.path,l=n.value,a=t.Path.relativePath(u,r);return l=l.updateChild(a,i),new o(this.writeTree_.set(u,l))}var p=new e.ImmutableTree(i);return new o(this.writeTree_.setTree(r,p))},o.prototype.addWrites=function(e,t){var i=this;return(0,r.forEach)(t,function(t,r){i=i.addWrite(e.child(t),r)}),i},o.prototype.removeWrite=function(t){return t.isEmpty()?o.Empty:new o(this.writeTree_.setTree(t,e.ImmutableTree.Empty))},o.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},o.prototype.getCompleteNode=function(e){var r=this.writeTree_.findRootMostValueAndPath(e);return null!=r?this.writeTree_.get(r.path).getChild(t.Path.relativePath(r.path,e)):null},o.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(n.PRIORITY_INDEX,function(t,r){e.push(new i.NamedNode(t,r))}):this.writeTree_.children.inorderTraversal(function(t,r){null!=r.value&&e.push(new i.NamedNode(t,r.value))}),e},o.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var r=this.getCompleteNode(t);return new o(null!=r?new e.ImmutableTree(r):this.writeTree_.subtree(t))},o.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},o.prototype.apply=function(e){return o.applySubtreeWrite_(t.Path.Empty,this.writeTree_,e)},o.Empty=new o(new e.ImmutableTree(null)),o.applySubtreeWrite_=function(e,t,r){if(null!=t.value)return r.updateChild(e,t.value);var i=null;return t.children.inorderTraversal(function(t,n){".priority"===t?((0,u.assert)(null!==n.value,"Priority writes must always be leaf nodes"),i=n.value):r=o.applySubtreeWrite_(e.child(t),n,r)}),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r},o}();exports.CompoundWrite=o;
},{"./util/ImmutableTree":165,"./util/Path":87,"../../utils/obj":101,"./snap/Node":136,"./snap/indexes/PriorityIndex":93,"../../utils/assert":90}],163:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WriteTreeRef=exports.WriteTree=void 0;var e=require("../../utils/obj"),t=require("../../utils/assert"),i=require("./util/Path"),r=require("./CompoundWrite"),n=require("./snap/indexes/PriorityIndex"),s=require("./snap/ChildrenNode"),l=function(){function l(){this.visibleWrites_=r.CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return l.prototype.childWrites=function(e){return new o(e,this)},l.prototype.addOverwrite=function(e,i,r,n){(0,t.assert)(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),this.allWrites_.push({path:e,snap:i,writeId:r,visible:n}),n&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,i)),this.lastWriteId_=r},l.prototype.addMerge=function(e,i,r){(0,t.assert)(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:i,writeId:r,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,i),this.lastWriteId_=r},l.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var i=this.allWrites_[t];if(i.writeId===e)return i}return null},l.prototype.removeWrite=function(i){var r=this,n=this.allWrites_.findIndex(function(e){return e.writeId===i});(0,t.assert)(n>=0,"removeWrite called with nonexistent writeId.");var s=this.allWrites_[n];this.allWrites_.splice(n,1);for(var l=s.visible,o=!1,a=this.allWrites_.length-1;l&&a>=0;){var h=this.allWrites_[a];h.visible&&(a>=n&&this.recordContainsPath_(h,s.path)?l=!1:s.path.contains(h.path)&&(o=!0)),a--}if(l){if(o)return this.resetTree_(),!0;if(s.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(s.path);else{var d=s.children;(0,e.forEach)(d,function(e){r.visibleWrites_=r.visibleWrites_.removeWrite(s.path.child(e))})}return!0}return!1},l.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},l.prototype.calcCompleteEventCache=function(e,t,r,n){if(r||n){var o=this.visibleWrites_.childCompoundWrite(e);if(!n&&o.isEmpty())return t;if(n||null!=t||o.hasCompleteWrite(i.Path.Empty)){var a=l.layerTree_(this.allWrites_,function(t){return(t.visible||n)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);p=t||s.ChildrenNode.EMPTY_NODE;return a.apply(p)}return null}var h=this.visibleWrites_.getCompleteNode(e);if(null!=h)return h;var d=this.visibleWrites_.childCompoundWrite(e);if(d.isEmpty())return t;if(null!=t||d.hasCompleteWrite(i.Path.Empty)){var p=t||s.ChildrenNode.EMPTY_NODE;return d.apply(p)}return null},l.prototype.calcCompleteEventChildren=function(e,t){var r=s.ChildrenNode.EMPTY_NODE,l=this.visibleWrites_.getCompleteNode(e);if(l)return l.isLeafNode()||l.forEachChild(n.PRIORITY_INDEX,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(n.PRIORITY_INDEX,function(e,t){var n=o.childCompoundWrite(new i.Path(e)).apply(t);r=r.updateImmediateChild(e,n)}),o.getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r},l.prototype.calcEventCacheAfterServerOverwrite=function(e,i,r,n){(0,t.assert)(r||n,"Either existingEventSnap or existingServerSnap must exist");var s=e.child(i);if(this.visibleWrites_.hasCompleteWrite(s))return null;var l=this.visibleWrites_.childCompoundWrite(s);return l.isEmpty()?n.getChild(i):l.apply(n.getChild(i))},l.prototype.calcCompleteChild=function(e,t,i){var r=e.child(t),n=this.visibleWrites_.getCompleteNode(r);return null!=n?n:i.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(i.getNode().getImmediateChild(t)):null},l.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},l.prototype.calcIndexedSlice=function(e,t,r,n,s,l){var o,a=this.visibleWrites_.childCompoundWrite(e),h=a.getCompleteNode(i.Path.Empty);if(null!=h)o=h;else{if(null==t)return[];o=a.apply(t)}if((o=o.withIndex(l)).isEmpty()||o.isLeafNode())return[];for(var d=[],p=l.getCompare(),c=s?o.getReverseIteratorFrom(r,l):o.getIteratorFrom(r,l),u=c.getNext();u&&d.length<n;)0!==p(u,r)&&d.push(u),u=c.getNext();return d},l.prototype.recordContainsPath_=function(t,i){return t.snap?t.path.contains(i):!!(0,e.findKey)(t.children,function(e,r){return t.path.child(r).contains(i)})},l.prototype.resetTree_=function(){this.visibleWrites_=l.layerTree_(this.allWrites_,l.DefaultFilter_,i.Path.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},l.DefaultFilter_=function(e){return e.visible},l.layerTree_=function(n,s,l){for(var o=r.CompoundWrite.Empty,a=0;a<n.length;++a){var h=n[a];if(s(h)){var d=h.path,p=void 0;if(h.snap)l.contains(d)?(p=i.Path.relativePath(l,d),o=o.addWrite(p,h.snap)):d.contains(l)&&(p=i.Path.relativePath(d,l),o=o.addWrite(i.Path.Empty,h.snap.getChild(p)));else{if(!h.children)throw(0,t.assertionError)("WriteRecord should have .snap or .children");if(l.contains(d))p=i.Path.relativePath(l,d),o=o.addWrites(p,h.children);else if(d.contains(l))if((p=i.Path.relativePath(d,l)).isEmpty())o=o.addWrites(i.Path.Empty,h.children);else{var c=(0,e.safeGet)(h.children,p.getFront());if(c){var u=c.getChild(p.popFront());o=o.addWrite(i.Path.Empty,u)}}}}}return o},l}();exports.WriteTree=l;var o=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,i){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,i)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,i){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,i)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,i,r,n){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,i,r,n)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();exports.WriteTreeRef=o;
},{"../../utils/obj":101,"../../utils/assert":90,"./util/Path":87,"./CompoundWrite":184,"./snap/indexes/PriorityIndex":93,"./snap/ChildrenNode":139}],124:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncTree=void 0;var e=require("../../utils/assert"),t=require("./util/util"),r=require("./operation/AckUserWrite"),i=require("./snap/ChildrenNode"),n=require("../../utils/obj"),a=require("./util/ImmutableTree"),o=require("./operation/ListenComplete"),p=require("./operation/Merge"),s=require("./operation/Operation"),u=require("./operation/Overwrite"),y=require("./util/Path"),l=require("./SyncPoint"),h=require("./WriteTree"),c=function(){function c(e){this.listenProvider_=e,this.syncPointTree_=a.ImmutableTree.Empty,this.pendingWriteTree_=new h.WriteTree,this.tagToQueryMap_={},this.queryToTagMap_={}}return c.prototype.applyUserOverwrite=function(e,t,r,i){return this.pendingWriteTree_.addOverwrite(e,t,r,i),i?this.applyOperationToSyncPoints_(new u.Overwrite(s.OperationSource.User,e,t)):[]},c.prototype.applyUserMerge=function(e,t,r){this.pendingWriteTree_.addMerge(e,t,r);var i=a.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new p.Merge(s.OperationSource.User,e,i))},c.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var i=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var o=a.ImmutableTree.Empty;return null!=i.snap?o=o.set(y.Path.Empty,!0):(0,n.forEach)(i.children,function(e,t){o=o.set(new y.Path(e),t)}),this.applyOperationToSyncPoints_(new r.AckUserWrite(i.path,o,t))}return[]},c.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new u.Overwrite(s.OperationSource.Server,e,t))},c.prototype.applyServerMerge=function(e,t){var r=a.ImmutableTree.fromObject(t);return this.applyOperationToSyncPoints_(new p.Merge(s.OperationSource.Server,e,r))},c.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new o.ListenComplete(s.OperationSource.Server,e))},c.prototype.applyTaggedQueryOverwrite=function(e,t,r){var i=this.queryKeyForTag_(r);if(null!=i){var n=c.parseQueryKey_(i),a=n.path,o=n.queryId,p=y.Path.relativePath(a,e),l=new u.Overwrite(s.OperationSource.forServerTaggedQuery(o),p,t);return this.applyTaggedOperation_(a,l)}return[]},c.prototype.applyTaggedQueryMerge=function(e,t,r){var i=this.queryKeyForTag_(r);if(i){var n=c.parseQueryKey_(i),o=n.path,u=n.queryId,l=y.Path.relativePath(o,e),h=a.ImmutableTree.fromObject(t),g=new p.Merge(s.OperationSource.forServerTaggedQuery(u),l,h);return this.applyTaggedOperation_(o,g)}return[]},c.prototype.applyTaggedListenComplete=function(e,t){var r=this.queryKeyForTag_(t);if(r){var i=c.parseQueryKey_(r),n=i.path,a=i.queryId,p=y.Path.relativePath(n,e),u=new o.ListenComplete(s.OperationSource.forServerTaggedQuery(a),p);return this.applyTaggedOperation_(n,u)}return[]},c.prototype.addEventRegistration=function(t,r){var n=t.path,a=null,o=!1;this.syncPointTree_.foreachOnPath(n,function(e,t){var r=y.Path.relativePath(e,n);a=a||t.getCompleteServerCache(r),o=o||t.hasCompleteView()});var p,s=this.syncPointTree_.get(n);(s?(o=o||s.hasCompleteView(),a=a||s.getCompleteServerCache(y.Path.Empty)):(s=new l.SyncPoint,this.syncPointTree_=this.syncPointTree_.set(n,s)),null!=a)?p=!0:(p=!1,a=i.ChildrenNode.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(e,t){var r=t.getCompleteServerCache(y.Path.Empty);r&&(a=a.updateImmediateChild(e,r))}));var u=s.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var h=c.makeQueryKey_(t);(0,e.assert)(!(h in this.queryToTagMap_),"View does not exist, but we have a tag");var g=c.getNextQueryTag_();this.queryToTagMap_[h]=g,this.tagToQueryMap_["_"+g]=h}var v=this.pendingWriteTree_.childWrites(n),_=s.addEventRegistration(t,r,v,a,p);if(!u&&!o){var d=s.viewForQuery(t);_=_.concat(this.setupListener_(t,d))}return _},c.prototype.removeEventRegistration=function(e,t,r){var i=this,n=e.path,a=this.syncPointTree_.get(n),o=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var p=a.removeEventRegistration(e,t,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(n));var s=p.removed;o=p.events;var u=-1!==s.findIndex(function(e){return e.getQueryParams().loadsAllData()}),y=this.syncPointTree_.findOnPath(n,function(e,t){return t.hasCompleteView()});if(u&&!y){var l=this.syncPointTree_.subtree(n);if(!l.isEmpty())for(var h=this.collectDistinctViewsForSubTree_(l),g=0;g<h.length;++g){var v=h[g],_=v.getQuery(),d=this.createListenerForView_(v);this.listenProvider_.startListening(c.queryForListening_(_),this.tagForQuery_(_),d.hashFn,d.onComplete)}}if(!y&&s.length>0&&!r)if(u){this.listenProvider_.stopListening(c.queryForListening_(e),null)}else s.forEach(function(e){var t=i.queryToTagMap_[c.makeQueryKey_(e)];i.listenProvider_.stopListening(c.queryForListening_(e),t)});this.removeTags_(s)}return o},c.prototype.calcCompleteEventCache=function(e,t){var r=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(e,function(t,r){var i=y.Path.relativePath(t,e),n=r.getCompleteServerCache(i);if(n)return n});return r.calcCompleteEventCache(e,i,t,!0)},c.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,r){if(t&&t.hasCompleteView())return[t.getCompleteView()];var i=[];return t&&(i=t.getQueryViews()),(0,n.forEach)(r,function(e,t){i=i.concat(t)}),i})},c.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var r=e[t];if(!r.getQueryParams().loadsAllData()){var i=c.makeQueryKey_(r),n=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+n]}}},c.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},c.prototype.setupListener_=function(t,r){var i=t.path,a=this.tagForQuery_(t),o=this.createListenerForView_(r),p=this.listenProvider_.startListening(c.queryForListening_(t),a,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(a)(0,e.assert)(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,r){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var i=[];return t&&(i=i.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),(0,n.forEach)(r,function(e,t){i=i.concat(t)}),i}),y=0;y<u.length;++y){var l=u[y];this.listenProvider_.stopListening(c.queryForListening_(l),this.tagForQuery_(l))}return p},c.prototype.createListenerForView_=function(e){var r=this,n=e.getQuery(),a=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||i.ChildrenNode.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return a?r.applyTaggedListenComplete(n.path,a):r.applyListenComplete(n.path);var i=(0,t.errorForServerCode)(e,n);return r.removeEventRegistration(n,null,i)}}},c.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},c.parseQueryKey_=function(t){var r=t.indexOf("$");return(0,e.assert)(-1!==r&&r<t.length-1,"Bad queryKey."),{queryId:t.substr(r+1),path:new y.Path(t.substr(0,r))}},c.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},c.prototype.tagForQuery_=function(e){var t=c.makeQueryKey_(e);return(0,n.safeGet)(this.queryToTagMap_,t)},c.getNextQueryTag_=function(){return c.nextQueryTag_++},c.prototype.applyTaggedOperation_=function(t,r){var i=this.syncPointTree_.get(t);(0,e.assert)(i,"Missing sync point for query tag that we're tracking");var n=this.pendingWriteTree_.childWrites(t);return i.applyOperation(r,n,null)},c.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(y.Path.Empty))},c.prototype.applyOperationHelper_=function(e,t,r,i){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,r,i);var n=t.get(y.Path.Empty);null==r&&null!=n&&(r=n.getCompleteServerCache(y.Path.Empty));var a=[],o=e.path.getFront(),p=e.operationForChild(o),s=t.children.get(o);if(s&&p){var u=r?r.getImmediateChild(o):null,l=i.child(o);a=a.concat(this.applyOperationHelper_(p,s,u,l))}return n&&(a=a.concat(n.applyOperation(e,i,r))),a},c.prototype.applyOperationDescendantsHelper_=function(e,t,r,i){var n=this,a=t.get(y.Path.Empty);null==r&&null!=a&&(r=a.getCompleteServerCache(y.Path.Empty));var o=[];return t.children.inorderTraversal(function(t,a){var p=r?r.getImmediateChild(t):null,s=i.child(t),u=e.operationForChild(t);u&&(o=o.concat(n.applyOperationDescendantsHelper_(u,a,p,s)))}),a&&(o=o.concat(a.applyOperation(e,i,r))),o},c.nextQueryTag_=1,c}();exports.SyncTree=c;
},{"../../utils/assert":90,"./util/util":75,"./operation/AckUserWrite":164,"./snap/ChildrenNode":139,"../../utils/obj":101,"./util/ImmutableTree":165,"./operation/ListenComplete":166,"./operation/Merge":167,"./operation/Operation":168,"./operation/Overwrite":169,"./util/Path":87,"./SyncPoint":98,"./WriteTree":163}],125:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SnapshotHolder=void 0;var o=require("./snap/ChildrenNode"),e=function(){function e(){this.rootNode_=o.ChildrenNode.EMPTY_NODE}return e.prototype.getNode=function(o){return this.rootNode_.getChild(o)},e.prototype.updateSnapshot=function(o,e){this.rootNode_=this.rootNode_.updateChild(o,e)},e}();exports.SnapshotHolder=e;
},{"./snap/ChildrenNode":139}],126:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthTokenProvider=void 0;var e=require("./util/util"),t=function(){function t(e){this.app_=e}return t.prototype.getToken=function(t){return this.app_.INTERNAL.getToken(t).then(null,function(t){return t&&"auth/token-not-initialized"===t.code?((0,e.log)("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})},t.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},t.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',(0,e.warn)(t)},t}();exports.AuthTokenProvider=t;
},{"./util/util":75}],174:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatsCollection=void 0;var t=require("../../../utils/deep_copy"),e=require("../../../utils/obj"),o=function(){function o(){this.counters_={}}return o.prototype.incrementCounter=function(t,o){void 0===o&&(o=1),(0,e.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=o},o.prototype.get=function(){return(0,t.deepCopy)(this.counters_)},o}();exports.StatsCollection=o;
},{"../../../utils/deep_copy":81,"../../../utils/obj":101}],130:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatsManager=void 0;var t=require("./StatsCollection"),e=function(){function e(){}return e.getCollection=function(e){var r=e.toString();return this.collections_[r]||(this.collections_[r]=new t.StatsCollection),this.collections_[r]},e.getOrCreateReporter=function(t,e){var r=t.toString();return this.reporters_[r]||(this.reporters_[r]=e()),this.reporters_[r]},e.collections_={},e.reporters_={},e}();exports.StatsManager=e;
},{"./StatsCollection":174}],132:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatsListener=void 0;var t=require("../../../utils/obj"),e=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),s=(0,t.clone)(e);return this.last_&&(0,t.forEach)(this.last_,function(t,e){s[t]=s[t]-e}),this.last_=e,s},e}();exports.StatsListener=e;
},{"../../../utils/obj":101}],131:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatsReporter=void 0;var t=require("../../../utils/obj"),e=require("../util/util"),r=require("./StatsListener"),s=1e4,o=3e4,i=3e5,n=function(){function n(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new r.StatsListener(t);var n=s+(o-s)*Math.random();(0,e.setTimeoutNonBlocking)(this.reportStats_.bind(this),Math.floor(n))}return n.prototype.includeStat=function(t){this.statsToReport_[t]=!0},n.prototype.reportStats_=function(){var r=this,s=this.statsListener_.get(),o={},n=!1;(0,t.forEach)(s,function(e,s){s>0&&(0,t.contains)(r.statsToReport_,e)&&(o[e]=s,n=!0)}),n&&this.server_.reportStats(o),(0,e.setTimeoutNonBlocking)(this.reportStats_.bind(this),Math.floor(2*Math.random()*i))},n}();exports.StatsReporter=n;
},{"../../../utils/obj":101,"../util/util":75,"./StatsListener":132}],133:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventList=exports.EventQueue=void 0;var t=require("../util/util"),e=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,s=0;s<t.length;s++){var i=t[s],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new n(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var s=this.eventLists_[n];if(s)t(s.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}();exports.EventQueue=e;var n=function(){function e(t){this.path_=t,this.events_=[]}return e.prototype.add=function(t){this.events_.push(t)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var n=this.events_[e];if(null!==n){this.events_[e]=null;var s=n.getEventRunner();t.logger&&(0,t.log)("event: "+n.toString()),(0,t.exceptionGuard)(s)}}},e.prototype.getPath=function(){return this.path_},e}();exports.EventList=n;
},{"../util/util":75}],182:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventEmitter=void 0;var t=require("../../../utils/assert"),e=function(){function e(e){this.allowedEvents_=e,this.listeners_={},(0,t.assert)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var n=this.listeners_[t].slice(),i=0;i<n.length;i++)n[i].callback.apply(n[i].context,e)},e.prototype.on=function(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});var n=this.getInitialEvent(t);n&&e.apply(r,n)},e.prototype.off=function(t,e,r){this.validateEventType_(t);for(var n=this.listeners_[t]||[],i=0;i<n.length;i++)if(n[i].callback===e&&(!r||r===n[i].context))return void n.splice(i,1)},e.prototype.validateEventType_=function(e){(0,t.assert)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}();exports.EventEmitter=e;
},{"../../../utils/assert":90}],156:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisibilityMonitor=void 0;var e=require("./EventEmitter"),t=require("../../../utils/assert"),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),n=function(e){function n(){var t,i,n=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(i="visibilitychange",t="hidden"):void 0!==document.mozHidden?(i="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(i="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}return i(n,e),n.getInstance=function(){return new n},n.prototype.getInitialEvent=function(e){return(0,t.assert)("visible"===e,"Unknown event type: "+e),[this.visible_]},n}(e.EventEmitter);exports.VisibilityMonitor=n;
},{"./EventEmitter":182,"../../../utils/assert":90}],157:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnlineMonitor=void 0;var n=require("../../../utils/assert"),e=require("./EventEmitter"),t=require("../../../utils/environment"),o=function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),i=function(e){function i(){var n=e.call(this,["online"])||this;return n.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,t.isMobileCordova)()||(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return o(i,e),i.getInstance=function(){return new i},i.prototype.getInitialEvent=function(e){return(0,n.assert)("online"===e,"Unknown event type: "+e),[this.online_]},i.prototype.currentlyOnline=function(){return this.online_},i}(e.EventEmitter);exports.OnlineMonitor=i;
},{"../../../utils/assert":90,"./EventEmitter":182,"../../../utils/environment":68}],154:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAdmin=exports.isValidFormat=exports.issuedAtTime=exports.isValidTimestamp=exports.decode=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=require("../database/core/util/util"),o=require("./json"),r=exports.decode=function(e){var r={},i={},n={},a="";try{var s=e.split(".");r=(0,o.jsonEval)((0,t.base64Decode)(s[0])||""),i=(0,o.jsonEval)((0,t.base64Decode)(s[1])||""),a=s[2],n=i.d||{},delete i.d}catch(e){}return{header:r,claims:i,data:n,signature:a}},i=exports.isValidTimestamp=function(t){var o,i,n=r(t).claims,a=Math.floor((new Date).getTime()/1e3);return"object"===(void 0===n?"undefined":e(n))&&(n.hasOwnProperty("nbf")?o=n.nbf:n.hasOwnProperty("iat")&&(o=n.iat),i=n.hasOwnProperty("exp")?n.exp:o+86400),a&&o&&i&&a>=o&&a<=i},n=exports.issuedAtTime=function(t){var o=r(t).claims;return"object"===(void 0===o?"undefined":e(o))&&o.hasOwnProperty("iat")?o.iat:null},a=exports.isValidFormat=function(t){var o=r(t),i=o.claims;return!!o.signature&&!!i&&"object"===(void 0===i?"undefined":e(i))&&i.hasOwnProperty("iat")},s=exports.isAdmin=function(t){var o=r(t).claims;return"object"===(void 0===o?"undefined":e(o))&&!0===o.admin};
},{"../database/core/util/util":75,"./json":117}],150:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PacketReceiver=void 0;var e=require("../../core/util/util"),s=function(){function s(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return s.prototype.closeAfter=function(e,s){this.closeAfterResponse=e,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},s.prototype.handleResponse=function(s,n){var o=this;this.pendingResponses[s]=n;for(var t=function(){var s=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var n=function(n){s[n]&&(0,e.exceptionGuard)(function(){o.onMessage_(s[n])})},t=0;t<s.length;++t)n(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if("break"===t())break}},s}();exports.PacketReceiver=s;
},{"../../core/util/util":75}],104:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FirebaseIFrameScriptHolder=exports.BrowserPollConnection=exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM=exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM=exports.FIREBASE_LONGPOLL_DATA_PARAM=exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET=exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM=exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM=exports.FIREBASE_LONGPOLL_SERIAL_PARAM=exports.FIREBASE_LONGPOLL_PW_PARAM=exports.FIREBASE_LONGPOLL_ID_PARAM=exports.FIREBASE_LONGPOLL_DATA_CB_NAME=exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME=exports.FIREBASE_LONGPOLL_CLOSE_COMMAND=exports.FIREBASE_LONGPOLL_START_PARAM=void 0;var e=require("../core/util/util"),t=require("../core/util/CountedSet"),o=require("../core/stats/StatsManager"),n=require("./polling/PacketReceiver"),i=require("./Constants"),s=require("../../utils/json"),r=require("../../utils/environment"),c=exports.FIREBASE_LONGPOLL_START_PARAM="start",a=exports.FIREBASE_LONGPOLL_CLOSE_COMMAND="close",l=exports.FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",d=exports.FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",u=exports.FIREBASE_LONGPOLL_ID_PARAM="id",_=exports.FIREBASE_LONGPOLL_PW_PARAM="pw",h=exports.FIREBASE_LONGPOLL_SERIAL_PARAM="ser",m=exports.FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",p=exports.FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",A=exports.FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",L=exports.FIREBASE_LONGPOLL_DATA_PARAM="d",E=exports.FIREBASE_LONGPOLL_DISCONN_FRAME_PARAM="disconn",g=exports.FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",S=1870,f=30,R=S-f,y=25e3,I=3e4,O=function(){function t(t,n,s,r){this.connId=t,this.repoInfo=n,this.transportSessionId=s,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=(0,e.logWrapper)(t),this.stats_=o.StatsManager.getCollection(n),this.urlFn=function(e){return n.connectionURL(i.LONG_POLLING,e)}}return t.prototype.open=function(t,o){var s=this;this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new n.PacketReceiver(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(I)),(0,e.executeWhenDOMReady)(function(){if(!s.isClosed_){s.scriptTagHolder=new P(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0],n=e[1],i=e[2];e[3],e[4];if(s.incrementIncomingBytes_(e),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,o==c)s.id=n,s.password=i;else{if(o!==a)throw new Error("Unrecognized command received: "+o);n?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(n,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0],n=e[1];s.incrementIncomingBytes_(e),s.myPacketOrderer.handleResponse(o,n)},function(){s.onClosed_()},s.urlFn);var e={};e[c]="t",e[h]=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(e[m]=s.scriptTagHolder.uniqueCallbackIdentifier),e[i.VERSION_PARAM]=i.PROTOCOL_VERSION,s.transportSessionId&&(e[i.TRANSPORT_SESSION_PARAM]=s.transportSessionId),s.lastSessionId&&(e[i.LAST_SESSION_PARAM]=s.lastSessionId),!(0,r.isNodeSdk)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(i.FORGE_DOMAIN)&&(e[i.REFERER_PARAM]=i.FORGE_REF);var t=s.urlFn(e);s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return t.forceAllow_||!t.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!(0,e.isChromeExtensionContentScript)()&&!(0,e.isWindowsStoreApp)()&&!(0,r.isNodeSdk)()},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var o=(0,s.stringify)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);for(var n=(0,e.base64Encode)(o),i=(0,e.splitStringBySize)(n,R),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(e,t){if(!(0,r.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var o={};o[g]="t",o[u]=e,o[_]=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(e){var t=(0,s.stringify)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},t}();exports.BrowserPollConnection=O;var P=function(){function o(n,i,s,c){if(this.onDisconnect=s,this.urlFn=c,this.outstandingRequests=new t.CountedSet,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,r.isNodeSdk)())this.commandCB=n,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=(0,e.LUIDGenerator)(),window[l+this.uniqueCallbackIdentifier]=n,window[d+this.uniqueCallbackIdentifier]=i,this.myIFrame=o.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(t){(0,e.log)("frame writing exception"),t.stack&&(0,e.log)(t.stack),(0,e.log)(t)}}}return o.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||(0,e.log)("No IE domain setting required")}catch(e){var o=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},o.prototype.close=function(){var e=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0))),(0,r.isNodeSdk)()&&this.myID){var t={};t[E]="t",t[u]=this.myID,t[_]=this.myPW;var n=this.urlFn(t);o.nodeRestRequest(n)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},o.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},o.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[u]=this.myID,e[_]=this.myPW,e[h]=this.currentSerial;for(var t=this.urlFn(e),o="",n=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+f+o.length<=S))break;var i=this.pendingSegs.shift();o=o+"&"+p+n+"="+i.seg+"&"+A+n+"="+i.ts+"&"+L+n+"="+i.d,n++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1},o.prototype.enqueueSegment=function(e,t,o){this.pendingSegs.push({seg:e,ts:t,d:o}),this.alive&&this.newRequest_()},o.prototype.addLongPollTag_=function(e,t){var o=this;this.outstandingRequests.add(t,1);var n=function(){o.outstandingRequests.remove(t),o.newRequest_()},i=setTimeout(n,Math.floor(y));this.addTag(e,function(){clearTimeout(i),n()})},o.prototype.addTag=function(t,o){var n=this;(0,r.isNodeSdk)()?this.doNodeLongPoll(t,o):setTimeout(function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),o())},i.onerror=function(){(0,e.log)("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(e){}},Math.floor(1))},o}();exports.FirebaseIFrameScriptHolder=P;
},{"../core/util/util":75,"../core/util/CountedSet":149,"../core/stats/StatsManager":130,"./polling/PacketReceiver":150,"./Constants":148,"../../utils/json":117,"../../utils/environment":68}],146:[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],103:[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebSocketConnection=void 0,exports.setWebSocketImpl=f;var t=require("../../app"),n=u(t),o=require("../../utils/assert"),i=require("../core/util/util"),s=require("../core/stats/StatsManager"),r=require("./Constants"),a=require("../../utils/constants"),c=require("../core/storage/storage"),l=require("../../utils/json"),h=require("../../utils/environment");function u(e){return e&&e.__esModule?e:{default:e}}var p=16384,d=45e3,_=null;function f(e){_=e}"undefined"!=typeof MozWebSocket?_=MozWebSocket:"undefined"!=typeof WebSocket&&(_=WebSocket);var g=function(){function t(e,n,o,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=(0,i.logWrapper)(this.connId),this.stats_=s.StatsManager.getCollection(n),this.connURL=t.connectionURL_(n,o,r)}return t.connectionURL_=function(e,t,n){var o={};return o[r.VERSION_PARAM]=r.PROTOCOL_VERSION,!(0,h.isNodeSdk)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(r.FORGE_DOMAIN)&&(o[r.REFERER_PARAM]=r.FORGE_REF),t&&(o[r.TRANSPORT_SESSION_PARAM]=t),n&&(o[r.LAST_SESSION_PARAM]=n),e.connectionURL(r.WEBSOCKET,o)},t.prototype.open=function(t,o){var i=this;this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,c.PersistentStorage.set("previous_websocket_failure",!0);try{if((0,h.isNodeSdk)()){var s=a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",l={headers:{"User-Agent":"Firebase/"+r.PROTOCOL_VERSION+"/"+n.default.SDK_VERSION+"/"+e.platform+"/"+s}},u=e.env,p=0==this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;p&&(l.proxy={origin:p}),this.mySock=new _(this.connURL,[],l)}else this.mySock=new _(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var d=e.message||e.data;return d&&this.log_(d),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(e){i.handleIncomingFrame(e)},this.mySock.onerror=function(e){i.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&i.log_(t),i.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==_&&!t.forceDisallow_},t.previouslyFailed=function(){return c.PersistentStorage.isInMemoryStorage||!0===c.PersistentStorage.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){c.PersistentStorage.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,l.jsonEval)(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if((0,o.assert)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=(0,l.stringify)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=(0,i.splitStringBySize)(t,p);n.length>1&&this.sendString_(String(n.length));for(var o=0;o<n.length;o++)this.sendString_(n[o])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(d))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}();exports.WebSocketConnection=g;
},{"../../app":55,"../../utils/assert":90,"../core/util/util":75,"../core/stats/StatsManager":130,"./Constants":148,"../../utils/constants":84,"../core/storage/storage":118,"../../utils/json":117,"../../utils/environment":68,"process":146}],158:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportManager=void 0;var t=require("./BrowserPollConnection"),e=require("./WebSocketConnection"),n=require("../core/util/util"),r=function(){function r(t){this.initTransports_(t)}return Object.defineProperty(r,"ALL_TRANSPORTS",{get:function(){return[t.BrowserPollConnection,e.WebSocketConnection]},enumerable:!0,configurable:!0}),r.prototype.initTransports_=function(t){var o=e.WebSocketConnection&&e.WebSocketConnection.isAvailable(),i=o&&!e.WebSocketConnection.previouslyFailed();if(t.webSocketOnly&&(o||(0,n.warn)("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[e.WebSocketConnection];else{var s=this.transports_=[];(0,n.each)(r.ALL_TRANSPORTS,function(t,e){e&&e.isAvailable()&&s.push(e)})}},r.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},r.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},r}();exports.TransportManager=r;
},{"./BrowserPollConnection":104,"./WebSocketConnection":103,"../core/util/util":75}],107:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Connection=void 0;var n=require("../core/util/util"),t=require("../core/storage/storage"),o=require("./Constants"),e=require("./TransportManager"),s=6e4,i=5e3,r=10240,a=102400,h="t",c="d",_="s",d="r",l="e",y="o",p="a",u="n",g="p",C="h",f=function(){function f(t,o,s,i,r,a,h){this.id=t,this.repoInfo_=o,this.onMessage_=s,this.onReady_=i,this.onDisconnect_=r,this.onKill_=a,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=(0,n.logWrapper)("c:"+this.id+":"),this.transportManager_=new e.TransportManager(o),this.log_("Connection created"),this.start_()}return f.prototype.start_=function(){var t=this,o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(e,s)},Math.floor(0));var i=o.healthyTimeout||0;i>0&&(this.healthyTimeout_=(0,n.setTimeoutNonBlocking)(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>a?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>r?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},f.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},f.prototype.disconnReceiver_=function(n){var t=this;return function(o){n===t.conn_?t.onConnectionLost_(o):n===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},f.prototype.connReceiver_=function(n){var t=this;return function(o){2!=t.state_&&(n===t.rx_?t.onPrimaryMessageReceived_(o):n===t.secondaryConn_?t.onSecondaryMessageReceived_(o):t.log_("message on old connection"))}},f.prototype.sendRequest=function(n){var t={t:"d",d:n};this.sendData_(t)},f.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},f.prototype.onSecondaryControl_=function(n){if(h in n){var t=n[h];t===p?this.upgradeIfSecondaryHealthy_():t===d?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===y&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},f.prototype.onSecondaryMessageReceived_=function(t){var o=(0,n.requireKey)("t",t),e=(0,n.requireKey)("d",t);if("c"==o)this.onSecondaryControl_(e);else{if("d"!=o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(e)}},f.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:g,d:{}}}))},f.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:p,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:u,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},f.prototype.onPrimaryMessageReceived_=function(t){var o=(0,n.requireKey)("t",t),e=(0,n.requireKey)("d",t);"c"==o?this.onControl_(e):"d"==o&&this.onDataMessage_(e)},f.prototype.onDataMessage_=function(n){this.onPrimaryResponse_(),this.onMessage_(n)},f.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},f.prototype.onControl_=function(t){var o=(0,n.requireKey)(h,t);if(c in t){var e=t[c];if(o===C)this.onHandshake_(e);else if(o===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else o===_?this.onConnectionShutdown_(e):o===d?this.onReset_(e):o===l?(0,n.error)("Server Error: "+e):o===y?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):(0,n.error)("Unknown control packet command: "+o)}},f.prototype.onHandshake_=function(t){var e=t.ts,s=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),o.PROTOCOL_VERSION!==s&&(0,n.warn)("Protocol version mismatch detected"),this.tryStartUpgrade_())},f.prototype.tryStartUpgrade_=function(){var n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)},f.prototype.startUpgrade_=function(t){var o=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),(0,n.setTimeoutNonBlocking)(function(){o.secondaryConn_&&(o.log_("Timed out trying to upgrade."),o.secondaryConn_.close())},Math.floor(s))},f.prototype.onReset_=function(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.updateHost(n),1===this.state_?this.close():(this.closeConnections_(),this.start_())},f.prototype.onConnectionEstablished_=function(t,o){var e=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):(0,n.setTimeoutNonBlocking)(function(){e.sendPingOnPrimaryIfNecessary_()},Math.floor(i))},f.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:g,d:{}}}))},f.prototype.onSecondaryConnectionLost_=function(){var n=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==n&&this.rx_!==n||this.close()},f.prototype.onConnectionLost_=function(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(t.PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},f.prototype.onConnectionShutdown_=function(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()},f.prototype.sendData_=function(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)},f.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},f.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},f}();exports.Connection=f;
},{"../core/util/util":75,"../core/storage/storage":118,"./Constants":148,"./TransportManager":158}],155:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){}return t.prototype.put=function(t,o,e,n){},t.prototype.merge=function(t,o,e,n){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,o,e){},t.prototype.onDisconnectMerge=function(t,o,e){},t.prototype.onDisconnectCancel=function(t,o){},t.prototype.reportStats=function(t){},t}();exports.ServerActions=t;
},{}],106:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PersistentConnection=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=require("../../app"),n=f(e),i=require("../../utils/obj"),o=require("../../utils/json"),s=require("../../utils/assert"),r=require("./util/util"),a=require("./util/Path"),c=require("./util/VisibilityMonitor"),u=require("./util/OnlineMonitor"),l=require("../../utils/jwt"),h=require("../realtime/Connection"),_=require("../../utils/constants"),d=require("../../utils/environment"),p=require("./ServerActions");function f(t){return t&&t.__esModule?t:{default:t}}var m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=1e3,y=3e5,v=3e4,C=1.3,b=3e4,T="server_kill",D=3,q=function(e){function p(t,n,i,o,s,a){var l=e.call(this)||this;if(l.repoInfo_=t,l.onDataUpdate_=n,l.onConnectStatus_=i,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.authOverride_=a,l.id=p.nextPersistentConnectionId_++,l.log_=(0,r.logWrapper)("p:"+l.id+":"),l.interruptReasons_={},l.listens_={},l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=g,l.maxReconnectDelay_=y,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,a&&!(0,d.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),c.VisibilityMonitor.getInstance().on("visible",l.onVisible_,l),-1===t.host.indexOf("fblocal")&&u.OnlineMonitor.getInstance().on("online",l.onOnline_,l),l}return m(p,e),p.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_((0,o.stringify)(r)),(0,s.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},p.prototype.listen=function(t,e,n,i){var o=t.queryIdentifier(),r=t.path.toString();this.log_("Listen called for "+r+" "+o),this.listens_[r]=this.listens_[r]||{},(0,s.assert)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,s.assert)(!this.listens_[r][o],"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens_[r][o]=a,this.connected_&&this.sendListen_(a)},p.prototype.sendListen_=function(t){var e=this,n=t.query,i=n.path.toString(),o=n.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=n.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var r=s.d,a=s.s;p.warnOnListenWarnings_(r,n),(e.listens_[i]&&e.listens_[i][o])===t&&(e.log_("listen response",s),"ok"!==a&&e.removeListen_(i,o),t.onComplete&&t.onComplete(a,r))})},p.warnOnListenWarnings_=function(e,n){if(e&&"object"===(void 0===e?"undefined":t(e))&&(0,i.contains)(e,"w")){var o=(0,i.safeGet)(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){var s='".indexOn": "'+n.getQueryParams().getIndex().toString()+'"',a=n.path.toString();(0,r.warn)("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+s+" at "+a+" to your security rules for better performance.")}}},p.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},p.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,l.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=v)},p.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,i=(0,l.isValidFormat)(n)?"auth":"gauth",o={cred:n};null===this.authOverride_?o.noauth=!0:"object"===t(this.authOverride_)&&(o.authvar=this.authOverride_),this.sendRequest(i,o,function(t){var i=t.s,o=t.d||"error";e.authToken_===n&&("ok"===i?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(i,o))})}},p.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),(0,s.assert)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},p.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var o={p:t};i&&(o.q=n,o.t=i),this.sendRequest("n",o)},p.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},p.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},p.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},p.prototype.sendOnDisconnect_=function(t,e,n,i){var o={p:e,d:n};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,function(t){i&&setTimeout(function(){i(t.s,t.d)},Math.floor(0))})},p.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},p.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},p.prototype.putInternal=function(t,e,n,i,o){var s={p:e,d:n};void 0!==o&&(s.h=o),this.outstandingPuts_.push({action:t,request:s,onComplete:i}),this.outstandingPutCount_++;var r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},p.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),o&&o(i.s,i.d)})},p.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}})}},p.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},p.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):(0,r.error)("Unrecognized action received from server: "+(0,o.stringify)(t)+"\nAre you using the latest client?")},p.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},p.prototype.scheduleConnect_=function(t){var e=this;(0,s.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},p.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},p.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},p.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>b&&(this.reconnectDelay_=g),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*C)}this.onConnectStatus_(!1)},p.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+p.nextConnectionId_++,o=this,a=this.lastSessionId,c=!1,u=null,l=function(){u?u.close():(c=!0,n())};this.realtime_={close:l,sendRequest:function(t){(0,s.assert)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(s){c?(0,r.log)("getToken() completed but was canceled"):((0,r.log)("getToken() completed. Creating connection."),o.authToken_=s&&s.accessToken,u=new h.Connection(i,o.repoInfo_,t,e,n,function(t){(0,r.warn)(t+" ("+o.repoInfo_.toString()+")"),o.interrupt(T)},a))}).then(null,function(t){o.log_("Failed to get token: "+t),c||(_.CONSTANTS.NODE_ADMIN&&(0,r.warn)(t),l())})}},p.prototype.interrupt=function(t){(0,r.log)("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},p.prototype.resume=function(t){(0,r.log)("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=g,this.realtime_||this.scheduleConnect_(0))},p.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},p.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},p.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return(0,r.ObjectToUniqueKey)(t)}).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},p.prototype.removeListen_=function(t,e){var n,o=new a.Path(t).toString();return void 0!==this.listens_[o]?(n=this.listens_[o][e],delete this.listens_[o][e],0===(0,i.getCount)(this.listens_[o])&&delete this.listens_[o]):n=void 0,n},p.prototype.onAuthRevoked_=function(t,e){(0,r.log)("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=D&&(this.reconnectDelay_=v,this.authTokenProvider_.notifyForInvalidToken()))},p.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_&&this.securityDebugCallback_(t)},p.prototype.restoreState_=function(){var t=this;this.tryAuth(),(0,i.forEach)(this.listens_,function(e,n){(0,i.forEach)(n,function(e,n){t.sendListen_(n)})});for(var e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},p.prototype.sendConnectStats_=function(){var t={},e="js";_.CONSTANTS.NODE_ADMIN?e="admin_node":_.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+n.default.SDK_VERSION.replace(/\./g,"-")]=1,(0,d.isMobileCordova)()?t["framework.cordova"]=1:(0,d.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},p.prototype.shouldReconnect_=function(){var t=u.OnlineMonitor.getInstance().currentlyOnline();return(0,i.isEmpty)(this.interruptReasons_)&&t},p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p}(p.ServerActions);exports.PersistentConnection=q;
},{"../../app":55,"../../utils/obj":101,"../../utils/json":117,"../../utils/assert":90,"./util/util":75,"./util/Path":87,"./util/VisibilityMonitor":156,"./util/OnlineMonitor":157,"../../utils/jwt":154,"../realtime/Connection":107,"../../utils/constants":84,"../../utils/environment":68,"./ServerActions":155}],170:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.querystringDecode=exports.querystring=void 0;var e=require("./obj"),r=exports.querystring=function(r){var o=[];return(0,e.forEach)(r,function(e,r){Array.isArray(r)?r.forEach(function(r){o.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):o.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}),o.length?"&"+o.join("&"):""},o=exports.querystringDecode=function(e){var r={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var o=e.split("=");r[o[0]]=o[1]}}),r};
},{"./obj":101}],127:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadonlyRestClient=void 0;var t=require("../../utils/assert"),e=require("./util/util"),r=require("../../utils/json"),s=require("../../utils/obj"),o=require("../../utils/util"),n=require("./ServerActions"),i=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function s(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),u=function(n){function u(t,r,s){var o=n.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=r,o.authTokenProvider_=s,o.log_=(0,e.logWrapper)("p:rest:"),o.listens_={},o}return i(u,n),u.prototype.reportStats=function(t){throw new Error("Method not implemented.")},u.getListenId_=function(e,r){return void 0!==r?"tag$"+r:((0,t.assert)(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},u.prototype.listen=function(t,e,r,o){var n=this,i=t.path.toString();this.log_("Listen called for "+i+" "+t.queryIdentifier());var a=u.getListenId_(t,r),l={};this.listens_[a]=l;var p=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(i+".json",p,function(t,e){var u=e;(404===t&&(u=null,t=null),null===t&&n.onDataUpdate_(i,u,!1,r),(0,s.safeGet)(n.listens_,a)===l)&&o(t?401==t?"permission_denied":"rest_error:"+t:"ok",null)})},u.prototype.unlisten=function(t,e){var r=u.getListenId_(t,e);delete this.listens_[r]},u.prototype.refreshAuthToken=function(t){},u.prototype.restRequest_=function(t,s,n){var i=this;void 0===s&&(s={}),s.format="export",this.authTokenProvider_.getToken(!1).then(function(u){var a=u&&u.accessToken;a&&(s.auth=a);var l=(i.repoInfo_.secure?"https://":"http://")+i.repoInfo_.host+t+"?"+(0,o.querystring)(s);i.log_("Sending REST request for "+l);var p=new XMLHttpRequest;p.onreadystatechange=function(){if(n&&4===p.readyState){i.log_("REST Response for "+l+" received. status:",p.status,"response:",p.responseText);var t=null;if(p.status>=200&&p.status<300){try{t=(0,r.jsonEval)(p.responseText)}catch(t){(0,e.warn)("Failed to parse JSON response for "+l+": "+p.responseText)}n(null,t)}else 401!==p.status&&404!==p.status&&(0,e.warn)("Got unsuccessful REST response for "+l+" Status: "+p.status),n(p.status);n=null}},p.open("GET",l,!0),p.send()})},u}(n.ServerActions);exports.ReadonlyRestClient=u;
},{"../../utils/assert":90,"./util/util":75,"../../utils/json":117,"../../utils/obj":101,"../../utils/util":170,"./ServerActions":155}],86:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Repo=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=require("./util/ServerValues"),n=require("./snap/nodeFromJSON"),r=require("./util/Path"),o=require("./SparseSnapshotTree"),i=require("./SyncTree"),s=require("./SnapshotHolder"),a=require("../../utils/json"),c=require("./util/util"),u=require("../../utils/obj"),p=require("./AuthTokenProvider"),h=require("./stats/StatsManager"),v=require("./stats/StatsReporter"),l=require("./stats/StatsListener"),_=require("./view/EventQueue"),f=require("./PersistentConnection"),d=require("./ReadonlyRestClient"),y=require("../api/Database"),S="repo_interrupt",g=function(){function g(t,n,r){var u=this;this.repoInfo_=t,this.app=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _.EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new o.SparseSnapshotTree,this.persistentConnection_=null;var l=new p.AuthTokenProvider(r);if(this.stats_=h.StatsManager.getCollection(t),n||(0,c.beingCrawled)())this.server_=new d.ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),l),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var y=r.options.databaseAuthVariableOverride;if(void 0!==y&&null!==y){if("object"!==(void 0===y?"undefined":e(y)))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,a.stringify)(y)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new f.PersistentConnection(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),l,y),this.server_=this.persistentConnection_}l.addTokenChangeListener(function(e){u.server_.refreshAuthToken(e)}),this.statsReporter_=h.StatsManager.getOrCreateReporter(t,function(){return new v.StatsReporter(u.stats_,u.server_)}),this.transactions_init_(),this.infoData_=new s.SnapshotHolder,this.infoSyncTree_=new i.SyncTree({startListening:function(e,t,n,r){var o=[],i=u.infoData_.getNode(e.path);return i.isEmpty()||(o=u.infoSyncTree_.applyServerOverwrite(e.path,i),setTimeout(function(){r("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new i.SyncTree({startListening:function(e,t,n,r){return u.server_.listen(e,n,t,function(t,n){var o=r(t,n);u.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,t){u.server_.unlisten(e,t)}})}return g.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},g.prototype.name=function(){return this.repoInfo_.namespace},g.prototype.serverTime=function(){var e=this.infoData_.getNode(new r.Path(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},g.prototype.generateServerValues=function(){return(0,t.generateWithValues)({timestamp:this.serverTime()})},g.prototype.onDataUpdate_=function(e,t,o,i){this.dataUpdateCount++;var s=new r.Path(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var a=[];if(i)if(o){var c=(0,u.map)(t,function(e){return(0,n.nodeFromJSON)(e)});a=this.serverSyncTree_.applyTaggedQueryMerge(s,c,i)}else{var p=(0,n.nodeFromJSON)(t);a=this.serverSyncTree_.applyTaggedQueryOverwrite(s,p,i)}else if(o){var h=(0,u.map)(t,function(e){return(0,n.nodeFromJSON)(e)});a=this.serverSyncTree_.applyServerMerge(s,h)}else{var v=(0,n.nodeFromJSON)(t);a=this.serverSyncTree_.applyServerOverwrite(s,v)}var l=s;a.length>0&&(l=this.rerunTransactions_(s)),this.eventQueue_.raiseEventsForChangedPath(l,a)},g.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},g.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},g.prototype.onServerInfoUpdate_=function(e){var t=this;(0,c.each)(e,function(e,n){t.updateInfo_(n,e)})},g.prototype.updateInfo_=function(e,t){var o=new r.Path("/.info/"+e),i=(0,n.nodeFromJSON)(t);this.infoData_.updateSnapshot(o,i);var s=this.infoSyncTree_.applyServerOverwrite(o,i);this.eventQueue_.raiseEventsForChangedPath(o,s)},g.prototype.getNextWriteId_=function(){return this.nextWriteId_++},g.prototype.setWithPriority=function(e,r,o,i){var s=this;this.log_("set",{path:e.toString(),value:r,priority:o});var a=this.generateServerValues(),u=(0,n.nodeFromJSON)(r,o),p=(0,t.resolveDeferredValueSnapshot)(u,a),h=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(e,p,h,!0);this.eventQueue_.queueEvents(v),this.server_.put(e.toString(),u.val(!0),function(t,n){var r="ok"===t;r||(0,c.warn)("set at "+e+" failed: "+t);var o=s.serverSyncTree_.ackUserWrite(h,!r);s.eventQueue_.raiseEventsForChangedPath(e,o),s.callOnCompleteCallback(i,t,n)});var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},g.prototype.update=function(e,r,o){var i=this;this.log_("update",{path:e.toString(),value:r});var s=!0,a=this.generateServerValues(),p={};if((0,u.forEach)(r,function(e,r){s=!1;var o=(0,n.nodeFromJSON)(r);p[e]=(0,t.resolveDeferredValueSnapshot)(o,a)}),s)(0,c.log)("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok");else{var h=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserMerge(e,p,h);this.eventQueue_.queueEvents(v),this.server_.merge(e.toString(),r,function(t,n){var r="ok"===t;r||(0,c.warn)("update at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(h,!r),a=s.length>0?i.rerunTransactions_(e):e;i.eventQueue_.raiseEventsForChangedPath(a,s),i.callOnCompleteCallback(o,t,n)}),(0,u.forEach)(r,function(t){var n=i.abortTransactions_(e.child(t));i.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},g.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),i=[];(0,t.resolveDeferredValueTree)(this.onDisconnect_,n).forEachTree(r.Path.Empty,function(t,n){i=i.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var r=e.abortTransactions_(t);e.rerunTransactions_(r)}),this.onDisconnect_=new o.SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(r.Path.Empty,i)},g.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,o){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,o)})},g.prototype.onDisconnectSet=function(e,t,r){var o=this,i=(0,n.nodeFromJSON)(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,n){"ok"===t&&o.onDisconnect_.remember(e,i),o.callOnCompleteCallback(r,t,n)})},g.prototype.onDisconnectSetWithPriority=function(e,t,r,o){var i=this,s=(0,n.nodeFromJSON)(t,r);this.server_.onDisconnectPut(e.toString(),s.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,s),i.callOnCompleteCallback(o,t,n)})},g.prototype.onDisconnectUpdate=function(e,t,r){var o=this;if((0,u.isEmpty)(t))return(0,c.log)("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(r,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(i,s){"ok"===i&&(0,u.forEach)(t,function(t,r){var i=(0,n.nodeFromJSON)(r);o.onDisconnect_.remember(e.child(t),i)}),o.callOnCompleteCallback(r,i,s)})},g.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},g.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},g.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(S)},g.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(S)},g.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new l.StatsListener(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);(0,u.forEach)(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" "})}},g.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},g.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),c.log.apply(void 0,[n].concat(e))},g.prototype.callOnCompleteCallback=function(e,t,n){e&&(0,c.exceptionGuard)(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),o=r;n&&(o+=": "+n);var i=new Error(o);i.code=r,e(i)}})},Object.defineProperty(g.prototype,"database",{get:function(){return this.__database||(this.__database=new y.Database(this))},enumerable:!0,configurable:!0}),g}();exports.Repo=g;
},{"./util/ServerValues":128,"./snap/nodeFromJSON":129,"./util/Path":87,"./SparseSnapshotTree":123,"./SyncTree":124,"./SnapshotHolder":125,"../../utils/json":117,"./util/util":75,"../../utils/obj":101,"./AuthTokenProvider":126,"./stats/StatsManager":130,"./stats/StatsReporter":131,"./stats/StatsListener":132,"./view/EventQueue":133,"./PersistentConnection":106,"./ReadonlyRestClient":127,"../api/Database":69}],153:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RangedFilter=void 0;var e=require("./IndexedFilter"),t=require("../../snap/indexes/PriorityIndex"),n=require("../../../core/snap/Node"),r=require("../../snap/ChildrenNode"),i=function(){function i(t){this.indexedFilter_=new e.IndexedFilter(t.getIndex()),this.index_=t.getIndex(),this.startPost_=i.getStartPost_(t),this.endPost_=i.getEndPost_(t)}return i.prototype.getStartPost=function(){return this.startPost_},i.prototype.getEndPost=function(){return this.endPost_},i.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},i.prototype.updateChild=function(e,t,i,d,o,s){return this.matches(new n.NamedNode(t,i))||(i=r.ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,d,o,s)},i.prototype.updateFullNode=function(e,i,d){i.isLeafNode()&&(i=r.ChildrenNode.EMPTY_NODE);var o=i.withIndex(this.index_);o=o.updatePriority(r.ChildrenNode.EMPTY_NODE);var s=this;return i.forEachChild(t.PRIORITY_INDEX,function(e,t){s.matches(new n.NamedNode(e,t))||(o=o.updateImmediateChild(e,r.ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,d)},i.prototype.updatePriority=function(e,t){return e},i.prototype.filtersNodes=function(){return!0},i.prototype.getIndexedFilter=function(){return this.indexedFilter_},i.prototype.getIndex=function(){return this.index_},i.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},i.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},i}();exports.RangedFilter=i;
},{"./IndexedFilter":151,"../../snap/indexes/PriorityIndex":93,"../../../core/snap/Node":136,"../../snap/ChildrenNode":139}],152:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LimitedFilter=void 0;var e=require("./RangedFilter"),t=require("../../snap/ChildrenNode"),i=require("../../snap/Node"),r=require("../../../../utils/assert"),d=require("../Change"),n=function(){function n(t){this.rangedFilter_=new e.RangedFilter(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return n.prototype.updateChild=function(e,r,d,n,h,a){return this.rangedFilter_.matches(new i.NamedNode(r,d))||(d=t.ChildrenNode.EMPTY_NODE),e.getImmediateChild(r).equals(d)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,r,d,n,h,a):this.fullLimitUpdateChild_(e,r,d,h,a)},n.prototype.updateFullNode=function(e,i,r){var d;if(i.isLeafNode()||i.isEmpty())d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<i.numChildren()&&i.isIndexed(this.index_)){d=t.ChildrenNode.EMPTY_NODE.withIndex(this.index_);var n=void 0;n=this.reverse_?i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var h=0;n.hasNext()&&h<this.limit_;){var a=n.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;d=d.updateImmediateChild(a.name,a.node),h++}}else{d=(d=i.withIndex(this.index_)).updatePriority(t.ChildrenNode.EMPTY_NODE);var s=void 0,l=void 0,o=void 0;n=void 0;if(this.reverse_){n=d.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var g=this.index_.getCompare();o=function(e,t){return g(t,e)}}else n=d.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();h=0;for(var u=!1;n.hasNext();){a=n.getNext();!u&&o(s,a)<=0&&(u=!0),u&&h<this.limit_&&o(a,l)<=0?h++:d=d.updateImmediateChild(a.name,t.ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,d,r)},n.prototype.updatePriority=function(e,t){return e},n.prototype.filtersNodes=function(){return!0},n.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},n.prototype.getIndex=function(){return this.index_},n.prototype.fullLimitUpdateChild_=function(e,n,h,a,s){var l;if(this.reverse_){var o=this.index_.getCompare();l=function(e,t){return o(t,e)}}else l=this.index_.getCompare();var g=e;(0,r.assert)(g.numChildren()==this.limit_,"");var u=new i.NamedNode(n,h),_=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),m=this.rangedFilter_.matches(u);if(g.hasChild(n)){for(var C=g.getImmediateChild(n),p=a.getChildAfterChild(this.index_,_,this.reverse_);null!=p&&(p.name==n||g.hasChild(p.name));)p=a.getChildAfterChild(this.index_,p,this.reverse_);var x=null==p?1:l(p,u);if(m&&!h.isEmpty()&&x>=0)return null!=s&&s.trackChildChange(d.Change.childChangedChange(n,h,C)),g.updateImmediateChild(n,h);null!=s&&s.trackChildChange(d.Change.childRemovedChange(n,C));var v=g.updateImmediateChild(n,t.ChildrenNode.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=s&&s.trackChildChange(d.Change.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return h.isEmpty()?e:m&&l(_,u)>=0?(null!=s&&(s.trackChildChange(d.Change.childRemovedChange(_.name,_.node)),s.trackChildChange(d.Change.childAddedChange(n,h))),g.updateImmediateChild(n,h).updateImmediateChild(_.name,t.ChildrenNode.EMPTY_NODE)):e},n}();exports.LimitedFilter=n;
},{"./RangedFilter":153,"../../snap/ChildrenNode":139,"../../snap/Node":136,"../../../../utils/assert":90,"../Change":180}],100:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QueryParams=void 0;var t=require("../../../utils/assert"),e=require("../util/util"),i=require("../snap/indexes/KeyIndex"),n=require("../snap/indexes/PriorityIndex"),r=require("../snap/indexes/ValueIndex"),_=require("../snap/indexes/PathIndex"),s=require("./filter/IndexedFilter"),a=require("./filter/LimitedFilter"),d=require("./filter/RangedFilter"),o=require("../../../utils/json"),h=function(){function h(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=n.PRIORITY_INDEX}return h.prototype.hasStart=function(){return this.startSet_},h.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},h.prototype.getIndexStartValue=function(){return(0,t.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},h.prototype.getIndexStartName=function(){return(0,t.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:e.MIN_NAME},h.prototype.hasEnd=function(){return this.endSet_},h.prototype.getIndexEndValue=function(){return(0,t.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},h.prototype.getIndexEndName=function(){return(0,t.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:e.MAX_NAME},h.prototype.hasLimit=function(){return this.limitSet_},h.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},h.prototype.getLimit=function(){return(0,t.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},h.prototype.getIndex=function(){return this.index_},h.prototype.copy_=function(){var t=new h;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},h.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},h.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},h.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=h.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},h.prototype.startAt=function(t,e){var i=this.copy_();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i},h.prototype.endAt=function(t,e){var i=this.copy_();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i},h.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},h.prototype.getQueryObject=function(){var t=h.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=i}return this.index_!==n.PRIORITY_INDEX&&(e[t.INDEX]=this.index_.toString()),e},h.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},h.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==n.PRIORITY_INDEX},h.prototype.getNodeFilter=function(){return this.loadsAllData()?new s.IndexedFilter(this.getIndex()):this.hasLimit()?new a.LimitedFilter(this):new d.RangedFilter(this)},h.prototype.toRestQueryStringParameters=function(){var e,s=h.REST_QUERY_CONSTANTS_,a={};return this.isDefault()?a:(this.index_===n.PRIORITY_INDEX?e=s.PRIORITY_INDEX:this.index_===r.VALUE_INDEX?e=s.VALUE_INDEX:this.index_===i.KEY_INDEX?e=s.KEY_INDEX:((0,t.assert)(this.index_ instanceof _.PathIndex,"Unrecognized index type!"),e=this.index_.toString()),a[s.ORDER_BY]=(0,o.stringify)(e),this.startSet_&&(a[s.START_AT]=(0,o.stringify)(this.indexStartValue_),this.startNameSet_&&(a[s.START_AT]+=","+(0,o.stringify)(this.indexStartName_))),this.endSet_&&(a[s.END_AT]=(0,o.stringify)(this.indexEndValue_),this.endNameSet_&&(a[s.END_AT]+=","+(0,o.stringify)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?a[s.LIMIT_TO_FIRST]=this.limit_:a[s.LIMIT_TO_LAST]=this.limit_),a)},h.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},h.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},h.DEFAULT=new h,h}();exports.QueryParams=h;
},{"../../../utils/assert":90,"../util/util":75,"../snap/indexes/KeyIndex":92,"../snap/indexes/PriorityIndex":93,"../snap/indexes/ValueIndex":94,"../snap/indexes/PathIndex":95,"./filter/IndexedFilter":151,"./filter/LimitedFilter":152,"./filter/RangedFilter":153,"../../../utils/json":117}],71:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reference=void 0;var e=require("./onDisconnect"),t=require("./TransactionResult"),r=require("../core/util/util"),i=require("../core/util/NextPushId"),a=require("./Query"),n=require("../core/Repo"),o=require("../core/util/Path"),c=require("../core/view/QueryParams"),s=require("../core/util/validation"),l=require("../../utils/validation"),h=require("../../utils/promise"),u=require("../core/SyncPoint"),p=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),f=function(a){function u(e,t){if(!(e instanceof n.Repo))throw new Error("new Reference() no longer supported - use app.database().");return a.call(this,e,t,c.QueryParams.DEFAULT,!1)||this}return p(u,a),u.prototype.getKey=function(){return(0,l.validateArgCount)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},u.prototype.child=function(e){return(0,l.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof o.Path||(null===this.path.getFront()?(0,s.validateRootPathString)("Reference.child",1,e,!1):(0,s.validatePathString)("Reference.child",1,e,!1)),new u(this.repo,this.path.child(e))},u.prototype.getParent=function(){(0,l.validateArgCount)("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new u(this.repo,e)},u.prototype.getRoot=function(){(0,l.validateArgCount)("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},u.prototype.databaseProp=function(){return this.repo.database},u.prototype.set=function(e,t){(0,l.validateArgCount)("Reference.set",1,2,arguments.length),(0,s.validateWritablePath)("Reference.set",this.path),(0,s.validateFirebaseDataArg)("Reference.set",1,e,this.path,!1),(0,l.validateCallback)("Reference.set",2,t,!0);var r=new h.Deferred;return this.repo.setWithPriority(this.path,e,null,r.wrapCallback(t)),r.promise},u.prototype.update=function(e,t){if((0,l.validateArgCount)("Reference.update",1,2,arguments.length),(0,s.validateWritablePath)("Reference.update",this.path),Array.isArray(e)){for(var i={},a=0;a<e.length;++a)i[""+a]=e[a];e=i,(0,r.warn)("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,s.validateFirebaseMergeDataArg)("Reference.update",1,e,this.path,!1),(0,l.validateCallback)("Reference.update",2,t,!0);var n=new h.Deferred;return this.repo.update(this.path,e,n.wrapCallback(t)),n.promise},u.prototype.setWithPriority=function(e,t,r){if((0,l.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),(0,s.validateWritablePath)("Reference.setWithPriority",this.path),(0,s.validateFirebaseDataArg)("Reference.setWithPriority",1,e,this.path,!1),(0,s.validatePriority)("Reference.setWithPriority",2,t,!1),(0,l.validateCallback)("Reference.setWithPriority",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new h.Deferred;return this.repo.setWithPriority(this.path,e,t,i.wrapCallback(r)),i.promise},u.prototype.remove=function(e){return(0,l.validateArgCount)("Reference.remove",0,1,arguments.length),(0,s.validateWritablePath)("Reference.remove",this.path),(0,l.validateCallback)("Reference.remove",1,e,!0),this.set(null,e)},u.prototype.transaction=function(e,r,i){if((0,l.validateArgCount)("Reference.transaction",1,3,arguments.length),(0,s.validateWritablePath)("Reference.transaction",this.path),(0,l.validateCallback)("Reference.transaction",1,e,!1),(0,l.validateCallback)("Reference.transaction",2,r,!0),(0,s.validateBoolean)("Reference.transaction",3,i,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===i&&(i=!0);var a=new h.Deferred;"function"==typeof r&&(0,h.attachDummyErrorHandler)(a.promise);return this.repo.startTransaction(this.path,e,function(e,i,n){e?a.reject(e):a.resolve(new t.TransactionResult(i,n)),"function"==typeof r&&r(e,i,n)},i),a.promise},u.prototype.setPriority=function(e,t){(0,l.validateArgCount)("Reference.setPriority",1,2,arguments.length),(0,s.validateWritablePath)("Reference.setPriority",this.path),(0,s.validatePriority)("Reference.setPriority",1,e,!1),(0,l.validateCallback)("Reference.setPriority",2,t,!0);var r=new h.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,r.wrapCallback(t)),r.promise},u.prototype.push=function(e,t){(0,l.validateArgCount)("Reference.push",0,2,arguments.length),(0,s.validateWritablePath)("Reference.push",this.path),(0,s.validateFirebaseDataArg)("Reference.push",1,e,this.path,!0),(0,l.validateCallback)("Reference.push",2,t,!0);var r,a=this.repo.serverTime(),n=(0,i.nextPushId)(a),o=this.child(n),c=this.child(n);return r=null!=e?o.set(e,t).then(function(){return c}):h.PromiseImpl.resolve(c),o.then=r.then.bind(r),o.catch=r.then.bind(r,void 0),"function"==typeof t&&(0,h.attachDummyErrorHandler)(r),o},u.prototype.onDisconnect=function(){return(0,s.validateWritablePath)("Reference.onDisconnect",this.path),new e.OnDisconnect(this.repo,this.path)},Object.defineProperty(u.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),u}(a.Query);exports.Reference=f,a.Query.__referenceConstructor=f,u.SyncPoint.__referenceConstructor=f;
},{"./onDisconnect":96,"./TransactionResult":97,"../core/util/util":75,"../core/util/NextPushId":99,"./Query":70,"../core/Repo":86,"../core/util/Path":87,"../core/view/QueryParams":100,"../core/util/validation":88,"../../utils/validation":85,"../../utils/promise":80,"../core/SyncPoint":98}],143:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tree=exports.TreeNode=void 0;var t=require("../../../utils/assert"),e=require("./Path"),n=require("../../../utils/obj"),o=function(){return function(){this.children={},this.childCount=0,this.value=null}}();exports.TreeNode=o;var i=function(){function i(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new o),this.name_=t,this.parent_=e,this.node_=n}return i.prototype.subTree=function(t){for(var r,h=t instanceof e.Path?t:new e.Path(t),s=this;null!==(r=h.getFront());){s=new i(r,s,(0,n.safeGet)(s.node_.children,r)||new o),h=h.popFront()}return s},i.prototype.getValue=function(){return this.node_.value},i.prototype.setValue=function(e){(0,t.assert)(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},i.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},i.prototype.hasChildren=function(){return this.node_.childCount>0},i.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},i.prototype.forEachChild=function(t){var e=this;(0,n.forEach)(this.node_.children,function(n,o){t(new i(n,e,o))})},i.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},i.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},i.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},i.prototype.path=function(){return new e.Path(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},i.prototype.name=function(){return this.name_},i.prototype.parent=function(){return this.parent_},i.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},i.prototype.updateChild_=function(t,e){var o=e.isEmpty(),i=(0,n.contains)(this.node_.children,t);o&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):o||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},i}();exports.Tree=i;
},{"../../../utils/assert":90,"./Path":87,"../../../utils/obj":101}],102:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransactionStatus=void 0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=require("../../utils/assert"),r=require("../api/Reference"),n=require("../api/DataSnapshot"),a=require("./util/Path"),o=require("./util/Tree"),s=require("./snap/indexes/PriorityIndex"),u=require("./util/util"),i=require("./util/ServerValues"),l=require("./util/validation"),c=require("../../utils/obj"),p=require("./snap/nodeFromJSON"),h=require("./snap/ChildrenNode"),d=require("./Repo"),T=exports.TransactionStatus=void 0;!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(T||(exports.TransactionStatus=T={})),d.Repo.MAX_TRANSACTION_RETRIES_=25,d.Repo.prototype.transactions_init_=function(){this.transactionQueueTree_=new o.Tree},d.Repo.prototype.startTransaction=function(a,o,d,v){this.log_("transaction on "+a);var f=function(){},_=new r.Reference(this,a);_.on("value",f);var S={path:a,update:o,onComplete:d,status:null,order:(0,u.LUIDGenerator)(),applyLocally:v,retryCount:0,unwatcher:function(){_.off("value",f)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},R=this.getLatestState_(a);S.currentInputSnapshot=R;var y=S.update(R.val());if(void 0===y){if(S.unwatcher(),S.currentOutputSnapshotRaw=null,S.currentOutputSnapshotResolved=null,S.onComplete){var E=new n.DataSnapshot(S.currentInputSnapshot,new r.Reference(this,S.path),s.PRIORITY_INDEX);S.onComplete(null,!1,E)}}else{(0,l.validateFirebaseData)("transaction failed: Data returned ",y,S.path),S.status=T.RUN;var N=this.transactionQueueTree_.subTree(a),g=N.getValue()||[];g.push(S),N.setValue(g);var O=void 0;if("object"===(void 0===y?"undefined":e(y))&&null!==y&&(0,c.contains)(y,".priority"))O=(0,c.safeGet)(y,".priority"),(0,t.assert)((0,l.isValidPriority)(O),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else O=(this.serverSyncTree_.calcCompleteEventCache(a)||h.ChildrenNode.EMPTY_NODE).getPriority().val();O=O;var b=this.generateServerValues(),C=(0,p.nodeFromJSON)(y,O),I=(0,i.resolveDeferredValueSnapshot)(C,b);S.currentOutputSnapshotRaw=C,S.currentOutputSnapshotResolved=I,S.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(a,I,S.currentWriteId,S.applyLocally);this.eventQueue_.raiseEventsForChangedPath(a,m),this.sendReadyTransactions_()}},d.Repo.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||h.ChildrenNode.EMPTY_NODE},d.Repo.prototype.sendReadyTransactions_=function(e){var r=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);(0,t.assert)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return e.status===T.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){r.sendReadyTransactions_(e)})},d.Repo.prototype.sendTransactionQueue_=function(e,o){for(var i=this,l=o.map(function(e){return e.currentWriteId}),c=this.getLatestState_(e,l),p=c,h=c.hash(),d=0;d<o.length;d++){var v=o[d];(0,t.assert)(v.status===T.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=T.SENT,v.retryCount++;var f=a.Path.relativePath(e,v.path);p=p.updateChild(f,v.currentOutputSnapshotRaw)}var _=p.val(!0),S=e;this.server_.put(S.toString(),_,function(t){i.log_("transaction put response",{path:S.toString(),status:t});var a=[];if("ok"===t){for(var l=[],c=0;c<o.length;c++){if(o[c].status=T.COMPLETED,a=a.concat(i.serverSyncTree_.ackUserWrite(o[c].currentWriteId)),o[c].onComplete){var p=o[c].currentOutputSnapshotResolved,h=new r.Reference(i,o[c].path),d=new n.DataSnapshot(p,h,s.PRIORITY_INDEX);l.push(o[c].onComplete.bind(null,null,!0,d))}o[c].unwatcher()}i.pruneCompletedTransactionsBelowNode_(i.transactionQueueTree_.subTree(e)),i.sendReadyTransactions_(),i.eventQueue_.raiseEventsForChangedPath(e,a);for(c=0;c<l.length;c++)(0,u.exceptionGuard)(l[c])}else{if("datastale"===t)for(c=0;c<o.length;c++)o[c].status===T.SENT_NEEDS_ABORT?o[c].status=T.NEEDS_ABORT:o[c].status=T.RUN;else{(0,u.warn)("transaction at "+S.toString()+" failed: "+t);for(c=0;c<o.length;c++)o[c].status=T.NEEDS_ABORT,o[c].abortReason=t}i.rerunTransactions_(e)}},h)},d.Repo.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),r=t.path(),n=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(n,r),r},d.Repo.prototype.rerunTransactionQueue_=function(o,h){if(0!==o.length){for(var v,f=[],_=[],S=o.filter(function(e){return e.status===T.RUN}).map(function(e){return e.currentWriteId}),R=0;R<o.length;R++){var y=o[R],E=a.Path.relativePath(h,y.path),N=!1,g=void 0;if((0,t.assert)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===T.NEEDS_ABORT)N=!0,g=y.abortReason,_=_.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0));else if(y.status===T.RUN)if(y.retryCount>=d.Repo.MAX_TRANSACTION_RETRIES_)N=!0,g="maxretry",_=_.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0));else{var O=this.getLatestState_(y.path,S);y.currentInputSnapshot=O;var b=o[R].update(O.val());if(void 0!==b){(0,l.validateFirebaseData)("transaction failed: Data returned ",b,y.path);var C=(0,p.nodeFromJSON)(b);"object"===(void 0===b?"undefined":e(b))&&null!=b&&(0,c.contains)(b,".priority")||(C=C.updatePriority(O.getPriority()));var I=y.currentWriteId,m=this.generateServerValues(),D=(0,i.resolveDeferredValueSnapshot)(C,m);y.currentOutputSnapshotRaw=C,y.currentOutputSnapshotResolved=D,y.currentWriteId=this.getNextWriteId_(),S.splice(S.indexOf(I),1),_=(_=_.concat(this.serverSyncTree_.applyUserOverwrite(y.path,D,y.currentWriteId,y.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(I,!0))}else N=!0,g="nodata",_=_.concat(this.serverSyncTree_.ackUserWrite(y.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(h,_),_=[],N&&(o[R].status=T.COMPLETED,v=o[R].unwatcher,setTimeout(v,Math.floor(0)),o[R].onComplete))if("nodata"===g){var w=new r.Reference(this,o[R].path),P=o[R].currentInputSnapshot,Q=new n.DataSnapshot(P,w,s.PRIORITY_INDEX);f.push(o[R].onComplete.bind(null,null,!1,Q))}else f.push(o[R].onComplete.bind(null,new Error(g),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(R=0;R<f.length;R++)(0,u.exceptionGuard)(f[R]);this.sendReadyTransactions_()}},d.Repo.prototype.getAncestorTransactionNode_=function(e){for(var t,r=this.transactionQueueTree_;null!==(t=e.getFront())&&null===r.getValue();)r=r.subTree(t),e=e.popFront();return r},d.Repo.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},d.Repo.prototype.aggregateTransactionQueuesForNode_=function(e,t){var r=this,n=e.getValue();if(null!==n)for(var a=0;a<n.length;a++)t.push(n[a]);e.forEachChild(function(e){r.aggregateTransactionQueuesForNode_(e,t)})},d.Repo.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,r=e.getValue();if(r){for(var n=0,a=0;a<r.length;a++)r[a].status!==T.COMPLETED&&(r[n]=r[a],n++);r.length=n,e.setValue(r.length>0?r:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},d.Repo.prototype.abortTransactions_=function(e){var t=this,r=this.getAncestorTransactionNode_(e).path(),n=this.transactionQueueTree_.subTree(e);return n.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(n),n.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),r},d.Repo.prototype.abortTransactionsOnNode_=function(e){var r=e.getValue();if(null!==r){for(var n=[],a=[],o=-1,s=0;s<r.length;s++)if(r[s].status===T.SENT_NEEDS_ABORT);else if(r[s].status===T.SENT)(0,t.assert)(o===s-1,"All SENT items should be at beginning of queue."),o=s,r[s].status=T.SENT_NEEDS_ABORT,r[s].abortReason="set";else if((0,t.assert)(r[s].status===T.RUN,"Unexpected transaction status in abort"),r[s].unwatcher(),a=a.concat(this.serverSyncTree_.ackUserWrite(r[s].currentWriteId,!0)),r[s].onComplete){n.push(r[s].onComplete.bind(null,new Error("set"),!1,null))}-1===o?e.setValue(null):r.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),a);for(s=0;s<n.length;s++)(0,u.exceptionGuard)(n[s])}};
},{"../../utils/assert":90,"../api/Reference":71,"../api/DataSnapshot":134,"./util/Path":87,"./util/Tree":143,"./snap/indexes/PriorityIndex":93,"./util/util":75,"./util/ServerValues":128,"./util/validation":88,"../../utils/obj":101,"./snap/nodeFromJSON":129,"./snap/ChildrenNode":139,"./Repo":86}],72:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RepoManager=void 0;var e=require("../../utils/obj"),t=require("./Repo"),a=require("./util/util"),r=require("./util/libs/parser"),i=require("./util/validation");require("./Repo_transaction");var o,s="databaseURL",n=function(){function n(){this.repos_={},this.useRestClient_=!1}return n.getInstance=function(){return o||(o=new n),o},n.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},n.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},n.prototype.databaseFromApp=function(e,t){var o=t||e.options[s];void 0===o&&(0,a.fatal)("Can't determine Firebase Database URL.  Be sure to include "+s+" option when calling firebase.intializeApp().");var n=(0,r.parseRepoInfo)(o),p=n.repoInfo;return(0,i.validateUrl)("Invalid Firebase Database URL",1,n),n.path.isEmpty()||(0,a.fatal)("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(p,e).database},n.prototype.deleteRepo=function(t){var r=(0,e.safeGet)(this.repos_,t.app.name);r&&(0,e.safeGet)(r,t.repoInfo_.toURLString())===t||(0,a.fatal)("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete r[t.repoInfo_.toURLString()]},n.prototype.createRepo=function(r,i){var o=(0,e.safeGet)(this.repos_,i.name);o||(o={},this.repos_[i.name]=o);var s=(0,e.safeGet)(o,r.toURLString());return s&&(0,a.fatal)("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new t.Repo(r,this.useRestClient_,i),o[r.toURLString()]=s,s},n.prototype.forceRestClient=function(e){this.useRestClient_=e},n}();exports.RepoManager=n;
},{"../../utils/obj":101,"./Repo":86,"./util/util":75,"./util/libs/parser":89,"./util/validation":88,"./Repo_transaction":102}],69:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DatabaseInternals=exports.Database=void 0;var e=require("../core/util/util"),t=require("../core/util/libs/parser"),r=require("../core/util/Path"),a=require("../../utils/promise"),o=require("./Reference"),n=require("../core/Repo"),i=require("../core/RepoManager"),s=require("../../utils/validation"),l=require("../core/util/validation"),u=function(){function a(t){this.repo_=t,t instanceof n.Repo||(0,e.fatal)("Don't call new Database() directly - please use firebase.database()."),this.root_=new o.Reference(t,r.Path.Empty),this.INTERNAL=new p(this)}return Object.defineProperty(a.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),a.prototype.ref=function(e){return this.checkDeleted_("ref"),(0,s.validateArgCount)("database.ref",0,1,arguments.length),void 0!==e?this.root_.child(e):this.root_},a.prototype.refFromURL=function(r){var a="database.refFromURL";this.checkDeleted_(a),(0,s.validateArgCount)(a,1,1,arguments.length);var o=(0,t.parseRepoInfo)(r);(0,l.validateUrl)(a,1,o);var n=o.repoInfo;return n.host!==this.repo_.repoInfo_.host&&(0,e.fatal)(a+": Host name does not match the current database: (found "+n.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(o.path.toString())},a.prototype.checkDeleted_=function(t){null===this.repo_&&(0,e.fatal)("Cannot call "+t+" on a deleted database.")},a.prototype.goOffline=function(){(0,s.validateArgCount)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},a.prototype.goOnline=function(){(0,s.validateArgCount)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},a.ServerValue={TIMESTAMP:{".sv":"timestamp"}},a}();exports.Database=u;var p=function(){function e(e){this.database=e}return e.prototype.delete=function(){return this.database.checkDeleted_("delete"),i.RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,a.PromiseImpl.resolve()},e}();exports.DatabaseInternals=p;
},{"../core/util/util":75,"../core/util/libs/parser":89,"../core/util/Path":87,"../../utils/promise":80,"./Reference":71,"../core/Repo":86,"../core/RepoManager":72,"../../utils/validation":85,"../core/util/validation":88}],73:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interceptServerData=exports.dataUpdateCount=exports.statsIncrementCounter=exports.stats=exports.setSecurityDebugCallback=exports.isWebSocketsAvailable=exports.forceWebSockets=exports.forceLongPolling=void 0;var e=require("../realtime/WebSocketConnection"),t=require("../realtime/BrowserPollConnection"),o=exports.forceLongPolling=function(){e.WebSocketConnection.forceDisallow(),t.BrowserPollConnection.forceAllow()},r=exports.forceWebSockets=function(){t.BrowserPollConnection.forceDisallow()},n=exports.isWebSocketsAvailable=function(){return e.WebSocketConnection.isAvailable()},s=exports.setSecurityDebugCallback=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},c=exports.stats=function(e,t){e.repo.stats(t)},a=exports.statsIncrementCounter=function(e,t){e.repo.statsIncrementCounter(t)},i=exports.dataUpdateCount=function(e){return e.repo.dataUpdateCount},l=exports.interceptServerData=function(e,t){return e.repo.interceptServerData_(t)};
},{"../realtime/WebSocketConnection":103,"../realtime/BrowserPollConnection":104}],74:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceRestClient=exports.listens=exports.queryIdentifier=exports.ConnectionTarget=exports.hijackHash=exports.RealTimeConnection=exports.DataConnection=void 0;var e=require("../core/RepoInfo"),t=require("../core/PersistentConnection"),n=require("../core/RepoManager"),o=require("../realtime/Connection"),r=exports.DataConnection=t.PersistentConnection;t.PersistentConnection.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},t.PersistentConnection.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var i=exports.RealTimeConnection=o.Connection,s=exports.hijackHash=function(e){var n=t.PersistentConnection.prototype.put;return t.PersistentConnection.prototype.put=function(t,o,r,i){void 0!==i&&(i=e()),n.call(this,t,o,r,i)},function(){t.PersistentConnection.prototype.put=n}},c=exports.ConnectionTarget=e.RepoInfo,p=exports.queryIdentifier=function(e){return e.queryIdentifier()},u=exports.listens=function(e){return e.repo.persistentConnection_.listens_},a=exports.forceRestClient=function(e){n.RepoManager.getInstance().forceRestClient(e)};
},{"../core/RepoInfo":105,"../core/PersistentConnection":106,"../core/RepoManager":72,"../realtime/Connection":107}],57:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerDatabase=f;var e=require("./app"),a=c(e),r=require("./database/api/Database"),t=require("./database/api/Query"),u=require("./database/api/Reference"),i=require("./database/core/util/util"),n=require("./database/core/RepoManager"),s=require("./database/api/internal"),o=p(s),l=require("./database/api/test_access"),d=p(l),b=require("./utils/environment");function p(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a.default=e,a}function c(e){return e&&e.__esModule?e:{default:e}}function f(e){var a=e.INTERNAL.registerService("database",function(e,a,r){return n.RepoManager.getInstance().databaseFromApp(e,r)},{Reference:u.Reference,Query:t.Query,Database:r.Database,enableLogging:i.enableLogging,INTERNAL:o,ServerValue:r.Database.ServerValue,TEST_ACCESS:d},null,!0);(0,b.isNodeSdk)()&&(module.exports=a)}f(a.default);
},{"./app":55,"./database/api/Database":69,"./database/api/Query":70,"./database/api/Reference":71,"./database/core/util/util":75,"./database/core/RepoManager":72,"./database/api/internal":73,"./database/api/test_access":74,"./utils/environment":68}],216:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setDomainBase=r;var e=exports.domainBase="https://firebasestorage.googleapis.com",t=exports.downloadBase="https://firebasestorage.googleapis.com",o=exports.apiBaseUrl="/v0",a=exports.apiUploadBaseUrl="/v0";function r(e){e=e}var s=exports.configOption="storageBucket",p=exports.shortMaxOperationRetryTime=6e4,i=exports.defaultMaxOperationRetryTime=12e4,x=exports.defaultMaxUploadRetryTime=6e4,n=exports.minSafeInteger=-9007199254740991;
},{}],202:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Code=exports.errors=exports.FirebaseStorageError=void 0,exports.prependCode=o,exports.unknown=i,exports.objectNotFound=u,exports.bucketNotFound=a,exports.projectNotFound=s,exports.quotaExceeded=c,exports.unauthenticated=d,exports.unauthorized=p,exports.retryLimitExceeded=l,exports.invalidChecksum=E,exports.canceled=_,exports.invalidEventName=N,exports.invalidUrl=f,exports.invalidDefaultBucket=O,exports.noDefaultBucket=T,exports.cannotSliceBlob=I,exports.serverFileWrongSize=D,exports.noDownloadURL=A,exports.invalidArgument=U,exports.invalidArgumentCount=R,exports.appDeleted=h,exports.invalidRootOperation=v,exports.invalidFormat=L,exports.internalError=x;var e=require("./constants"),n=function(){function e(e,n){this.code_=o(e),this.message_="Firebase Storage: "+n,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return o(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}();exports.FirebaseStorageError=n;var t=exports.errors={},r=exports.Code={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function o(e){return"storage/"+e}function i(){return new n(r.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function u(e){return new n(r.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a(e){return new n(r.BUCKET_NOT_FOUND,"Bucket '"+e+"' does not exist.")}function s(e){return new n(r.PROJECT_NOT_FOUND,"Project '"+e+"' does not exist.")}function c(e){return new n(r.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function d(){return new n(r.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function p(e){return new n(r.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function l(){return new n(r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function E(e,t,o){return new n(r.INVALID_CHECKSUM,"Uploaded/downloaded object '"+e+"' has checksum '"+t+"' which does not match '"+o+"'. Please retry the upload/download.")}function _(){return new n(r.CANCELED,"User canceled the upload/download.")}function N(e){return new n(r.INVALID_EVENT_NAME,"Invalid event name '"+e+"'.")}function f(e){return new n(r.INVALID_URL,"Invalid URL '"+e+"'.")}function O(e){return new n(r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function T(){return new n(r.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+e.configOption+"' property when initializing the app?")}function I(){return new n(r.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function D(){return new n(r.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function A(){return new n(r.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function U(e,t,o){return new n(r.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+o)}function R(e,t,o,i){var u,a;return e===t?(u=e,a=1===e?"argument":"arguments"):(u="between "+e+" and "+t,a="arguments"),new n(r.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+o+"`: Expected "+u+" "+a+", received "+i+".")}function h(){return new n(r.APP_DELETED,"The Firebase app was deleted.")}function v(e){return new n(r.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function L(e,t){return new n(r.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function x(e){throw new n(r.INTERNAL_ERROR,"Internal error: "+e)}
},{"./constants":216}],189:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringData=exports.StringFormat=void 0,exports.formatValidator=a,exports.dataFromString=s,exports.utf8Bytes_=i,exports.percentEncodedBytes_=u,exports.base64Bytes_=c,exports.dataURLBytes_=l,exports.dataURLContentType_=h;var t=require("./error"),e=r(t);function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var n=exports.StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function a(t){switch(t){case n.RAW:case n.BASE64:case n.BASE64URL:case n.DATA_URL:return;default:throw"Expected one of the event types: ["+n.RAW+", "+n.BASE64+", "+n.BASE64URL+", "+n.DATA_URL+"]."}}var o=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function s(t,r){switch(t){case n.RAW:return new o(i(r));case n.BASE64:case n.BASE64URL:return new o(c(t,r));case n.DATA_URL:return new o(l(r),h(r))}throw e.unknown()}function i(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|63&n);else if(55296==(64512&n))if(r<t.length-1&&56320==(64512&t.charCodeAt(r+1)))n=65536|(1023&n)<<10|1023&t.charCodeAt(++r),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n);else e.push(239,191,189);else 56320==(64512&n)?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(e)}function u(t){var r;try{r=decodeURIComponent(t)}catch(t){throw e.invalidFormat(n.DATA_URL,"Malformed data URL.")}return i(r)}function c(t,r){switch(t){case n.BASE64:var a=-1!==r.indexOf("-"),o=-1!==r.indexOf("_");if(a||o){var s=a?"-":"_";throw e.invalidFormat(t,"Invalid character '"+s+"' found: is it base64url encoded?")}break;case n.BASE64URL:var i=-1!==r.indexOf("+"),u=-1!==r.indexOf("/");if(i||u){s=i?"+":"/";throw e.invalidFormat(t,"Invalid character '"+s+"' found: is it base64 encoded?")}r=r.replace(/-/g,"+").replace(/_/g,"/")}var c;try{c=atob(r)}catch(r){throw e.invalidFormat(t,"Invalid character found")}for(var d=new Uint8Array(c.length),l=0;l<c.length;l++)d[l]=c.charCodeAt(l);return d}exports.StringData=o;var d=function(){return function(t){this.base64=!1,this.contentType=null;var r=t.match(/^data:([^,]+)?,/);if(null===r)throw e.invalidFormat(n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var a=r[1]||null;null!=a&&(this.base64=f(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-";base64".length):a),this.rest=t.substring(t.indexOf(",")+1)}}();function l(t){var e=new d(t);return e.base64?c(n.BASE64,e.rest):u(e.rest)}function h(t){return new d(t).contentType}function f(t,e){return!!(t.length>=e.length)&&t.substring(t.length-e.length)===e}
},{"./error":202}],190:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.taskStateFromInternalTaskState=r;var e=exports.TaskEvent={STATE_CHANGED:"state_changed"},s=exports.InternalTaskState={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},t=exports.TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function r(e){switch(e){case s.RUNNING:case s.PAUSING:case s.CANCELING:return t.RUNNING;case s.PAUSED:return t.PAUSED;case s.SUCCESS:return t.SUCCESS;case s.CANCELED:return t.CANCELED;case s.ERROR:default:return t.ERROR}}
},{}],205:[function(require,module,exports) {
"use strict";function r(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function t(t,e){for(var n in t)r(t,n)&&e(n,t[n])}function e(r){if(null==r)return{};var e={};return t(r,function(r,t){e[r]=t}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.contains=r,exports.forEach=t,exports.clone=e;
},{}],197:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.make=r,exports.resolve=t,exports.reject=o;var e=require("../../utils/promise");function r(r){return new e.PromiseImpl(r)}function t(r){return e.PromiseImpl.resolve(r)}function o(r){return e.PromiseImpl.reject(r)}
},{"../../utils/promise":80}],201:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t){return null!=t}function e(t){return void 0!==t}function o(t){return"function"==typeof t}function r(n){return"object"===(void 0===n?"undefined":t(n))}function i(t){return r(t)&&null!==t}function u(t){return r(t)&&!Array.isArray(t)}function f(t){return"string"==typeof t||t instanceof String}function s(t){return"number"==typeof t||t instanceof Number}function c(t){return p()&&t instanceof Blob}function p(){return"undefined"!=typeof Blob}exports.isDef=n,exports.isJustDef=e,exports.isFunction=o,exports.isObject=r,exports.isNonNullObject=i,exports.isNonArrayObject=u,exports.isString=f,exports.isNumber=s,exports.isNativeBlob=c,exports.isNativeBlobDefined=p;
},{}],211:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var R=exports.ErrorCode=void 0;!function(R){R[R.NO_ERROR=0]="NO_ERROR",R[R.NETWORK_ERROR=1]="NETWORK_ERROR",R[R.ABORT=2]="ABORT"}(R||(exports.ErrorCode=R={}));
},{}],199:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkXhrIo=void 0;var r=require("./error"),e=d(r),t=require("./object"),o=d(t),n=require("./promise_external"),s=d(n),i=require("./type"),h=d(i),a=require("./xhrio"),u=d(a);function d(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}var p=function(){function r(){var r=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=u.ErrorCode.NO_ERROR,this.sendPromise_=s.make(function(e,t){r.xhr_.addEventListener("abort",function(t){r.errorCode_=u.ErrorCode.ABORT,e(r)}),r.xhr_.addEventListener("error",function(t){r.errorCode_=u.ErrorCode.NETWORK_ERROR,e(r)}),r.xhr_.addEventListener("load",function(t){e(r)})})}return r.prototype.send=function(r,t,n,s){var i=this;if(this.sent_)throw e.internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,r,!0),h.isDef(s)){var a=s;o.forEach(a,function(r,e){i.xhr_.setRequestHeader(r,e.toString())})}return h.isDef(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},r.prototype.getErrorCode=function(){if(!this.sent_)throw e.internalError("cannot .getErrorCode() before sending");return this.errorCode_},r.prototype.getStatus=function(){if(!this.sent_)throw e.internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch(r){return-1}},r.prototype.getResponseText=function(){if(!this.sent_)throw e.internalError("cannot .getResponseText() before sending");return this.xhr_.responseText},r.prototype.abort=function(){this.xhr_.abort()},r.prototype.getResponseHeader=function(r){return this.xhr_.getResponseHeader(r)},r.prototype.addUploadProgressListener=function(r){h.isDef(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",r)},r.prototype.removeUploadProgressListener=function(r){h.isDef(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",r)},r}();exports.NetworkXhrIo=p;
},{"./error":202,"./object":205,"./promise_external":197,"./type":201,"./xhrio":211}],191:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.XhrIoPool=void 0;var o=require("./xhrio_network"),r=function(){function r(){}return r.prototype.createXhrIo=function(){return new o.NetworkXhrIo},r}();exports.XhrIoPool=r;
},{"./xhrio_network":199}],215:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonObjectOrNull=n;var r=require("./type"),e=t(r);function t(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function n(r){var t;try{t=JSON.parse(r)}catch(r){return null}return e.isNonArrayObject(t)?t:null}
},{"./type":201}],196:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Location=void 0;var e=require("./error"),t=r(e);function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var o=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(r){var o;try{o=e.makeFromUrl(r)}catch(t){return new e(r,"")}if(""===o.path)return o;throw t.invalidDefaultBucket(r)},e.makeFromUrl=function(r){var o=null;for(var n=[{regex:new RegExp("^gs://([A-Za-z0-9.\\-]+)(/(.*))?$","i"),indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],i=0;i<n.length;i++){var a=n[i],c=a.regex.exec(r);if(c){var u=c[a.indices.bucket],p=c[a.indices.path];p||(p=""),o=new e(u,p),a.postModify(o);break}}if(null==o)throw t.invalidUrl(r);return o},e}();exports.Location=o;
},{"./error":202}],206:[function(require,module,exports) {
"use strict";function e(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function t(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function n(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.parent=e,exports.child=t,exports.lastComponent=n;
},{}],210:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeNormalUrl=t,exports.makeDownloadUrl=u,exports.makeUploadUrl=i,exports.makeQueryString=l;var e=require("./constants"),r=a(e),o=require("./object"),n=a(o);function a(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r}function t(e){return r.domainBase+r.apiBaseUrl+e}function u(e){return r.downloadBase+r.apiBaseUrl+e}function i(e){return r.domainBase+r.apiUploadBaseUrl+e}function l(e){var r=encodeURIComponent,o="?";return n.forEach(e,function(e,n){var a=r(e)+"="+r(n);o=o+a+"&"}),o=o.slice(0,-1)}
},{"./constants":216,"./object":205}],200:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mapping=void 0,exports.noXform_=c,exports.xformPath=h,exports.getMappings=d,exports.addRef=m,exports.fromResource=w,exports.fromResourceString=g,exports.toResourceString=v,exports.metadataValidator=x;var e=require("./json"),t=l(e),n=require("./location"),r=require("./path"),o=l(r),u=require("./type"),a=l(u),i=require("./url"),s=l(i);function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t){return t}var p=function(){return function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||c}}();exports.Mapping=p;var f=null;function h(e){return!a.isString(e)||e.length<2?e:(e=e,o.lastComponent(e))}function d(){if(f)return f;var e=[];e.push(new p("bucket")),e.push(new p("generation")),e.push(new p("metageneration")),e.push(new p("name","fullPath",!0));var t=new p("name");t.xform=function(e,t){return h(t)},e.push(t);var n=new p("size");return n.xform=function(e,t){return a.isDef(t)?+t:t},e.push(n),e.push(new p("timeCreated")),e.push(new p("updated")),e.push(new p("md5Hash",null,!0)),e.push(new p("cacheControl",null,!0)),e.push(new p("contentDisposition",null,!0)),e.push(new p("contentEncoding",null,!0)),e.push(new p("contentLanguage",null,!0)),e.push(new p("contentType",null,!0)),e.push(new p("metadata","customMetadata",!0)),e.push(new p("downloadTokens","downloadURLs",!1,function(e,t){if(!(a.isString(t)&&t.length>0))return[];var n=encodeURIComponent;return t.split(",").map(function(t){var r=e.bucket,o=e.fullPath,u="/b/"+n(r)+"/o/"+n(o);return s.makeDownloadUrl(u)+s.makeQueryString({alt:"media",token:t})})})),f=e}function m(e,t){Object.defineProperty(e,"ref",{get:function(){var r=e.bucket,o=e.fullPath,u=new n.Location(r,o);return t.makeStorageReference(u)}})}function w(e,t,n){for(var r={type:"file"},o=n.length,u=0;u<o;u++){var a=n[u];r[a.local]=a.xform(r,t[a.server])}return m(r,e),r}function g(e,n,r){var o=t.jsonObjectOrNull(n);return null===o?null:w(e,o,r)}function v(e,t){for(var n={},r=t.length,o=0;o<r;o++){var u=t[o];u.writable&&(n[u.server]=e[u.local])}return JSON.stringify(n)}function x(e){if(!(e&&a.isObject(e)))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!a.isObject(n))throw"Expected object for 'customMetadata' mapping."}else if(a.isNonNullObject(n))throw"Mapping for '"+t+"' cannot be an object."}}
},{"./json":215,"./location":196,"./path":206,"./type":201,"./url":210}],194:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgSpec=void 0,exports.validate=u,exports.and_=f,exports.stringSpec=l,exports.uploadDataSpec=s,exports.metadataSpec=p,exports.nonNegativeNumberSpec=d,exports.looseObjectSpec=h,exports.nullFunctionSpec=g;var t=require("./error"),e=a(t),n=require("./metadata"),r=a(n),o=require("./type"),i=a(o);function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(t,n,r){for(var o=n.length,i=n.length,a=0;a<n.length;a++)if(n[a].optional){o=a;break}if(!(o<=r.length&&r.length<=i))throw e.invalidArgumentCount(o,i,t,r.length);for(a=0;a<r.length;a++)try{n[a].validator(r[a])}catch(n){throw n instanceof Error?e.invalidArgument(a,t,n.message):e.invalidArgument(a,t,n)}}var c=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!i.isJustDef(e)||t(e)},this.optional=!!e}}();function f(t,e){return function(n){t(n),e(n)}}function l(t,e){function n(t){if(!i.isString(t))throw"Expected string."}var r;return r=t?f(n,t):n,new c(r,e)}function s(){return new c(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||i.isNativeBlobDefined()&&t instanceof Blob))throw"Expected Blob or File."})}function p(t){return new c(r.metadataValidator,t)}function d(){return new c(function(t){if(!(i.isNumber(t)&&t>=0))throw"Expected a number 0 or greater."})}function h(t,e){return new c(function(e){if(!(null===e||i.isDef(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)},e)}function g(t){return new c(function(t){if(null!==t&&!i.isFunction(t))throw"Expected a Function."},t)}exports.ArgSpec=c;
},{"./error":202,"./metadata":200,"./type":201}],219:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBlob=i,exports.sliceBlob=l;var e=require("./type"),r=t(e);function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function o(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=o();if(void 0!==i){for(var l=new i,n=0;n<e.length;n++)l.append(e[n]);return l.getBlob()}if(r.isNativeBlobDefined())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function l(e,r,t){return e.webkitSlice?e.webkitSlice(r,t):e.mozSlice?e.mozSlice(r,t):e.slice?e.slice(r,t):null}
},{"./type":201}],204:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FbsBlob=void 0;var t=require("./fs"),e=o(t),r=require("./string"),n=o(r),a=require("./type"),i=o(a);function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var s=function(){function t(t,e){var r=0,n="";i.isNativeBlob(t)?(this.data_=t,r=t.size,n=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=n}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(r,n){if(i.isNativeBlob(this.data_)){var a=this.data_,o=e.sliceBlob(a,r,n);return null===o?null:new t(o)}return new t(new Uint8Array(this.data_.buffer,r,n-r),!0)},t.getBlob=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(i.isNativeBlobDefined()){var s=a.map(function(e){return e instanceof t?e.data_:e});return new t(e.getBlob.apply(null,s))}var u=a.map(function(t){return i.isString(t)?n.dataFromString(r.StringFormat.RAW,t).data:t.data_}),f=0;u.forEach(function(t){f+=t.byteLength});var l=new Uint8Array(f),h=0;return u.forEach(function(t){for(var e=0;e<t.length;e++)l[h++]=t[e]}),new t(l,!0)},t.prototype.uploadData=function(){return this.data_},t}();exports.FbsBlob=s;
},{"./fs":219,"./string":189,"./type":201}],208:[function(require,module,exports) {
"use strict";function e(e,r){return-1!==e.indexOf(r)}function r(e){return Array.prototype.slice.call(e)}function t(e,r){var t=e.indexOf(r);-1!==t&&e.splice(t,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.contains=e,exports.clone=r,exports.remove=t;
},{}],224:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){return function(s,t,e,r){this.url=s,this.method=t,this.handler=e,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();exports.RequestInfo=s;
},{}],207:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resumableUploadChunkSize=exports.ResumableUploadStatus=void 0,exports.handlerCheck=v,exports.metadataHandler=h,exports.sharedErrorHandler=U,exports.objectErrorHandler=y,exports.getMetadata=R,exports.updateMetadata=S,exports.deleteObject=b,exports.determineContentType_=g,exports.metadataForUpload_=x,exports.multipartUpload=T,exports.checkResumeHeader_=P,exports.createResumableUpload=C,exports.getResumableUploadStatus=H,exports.continueResumableUpload=k;var e=require("./array"),r=m(e),t=require("./blob"),n=require("./error"),o=m(n),a=require("./metadata"),u=m(a),l=require("./object"),s=m(l),i=require("./requestinfo"),p=require("./type"),c=m(p),d=require("./url"),f=m(d);function m(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function v(e){if(!e)throw o.unknown()}function h(e,r){return function(t,n){var o=u.fromResourceString(e,n,r);return v(null!==o),o}}function U(e){return function(r,t){var n;return(n=401===r.getStatus()?o.unauthenticated():402===r.getStatus()?o.quotaExceeded(e.bucket):403===r.getStatus()?o.unauthorized(e.path):t).setServerResponseProp(t.serverResponseProp()),n}}function y(e){var r=U(e);return function(t,n){var a=r(t,n);return 404===t.getStatus()&&(a=o.objectNotFound(e.path)),a.setServerResponseProp(n.serverResponseProp()),a}}function R(e,r,t){var n=r.fullServerUrl(),o=f.makeNormalUrl(n),a=e.maxOperationRetryTime(),u=new i.RequestInfo(o,"GET",h(e,t),a);return u.errorHandler=y(r),u}function S(e,r,t,n){var o=r.fullServerUrl(),a=f.makeNormalUrl(o),l=u.toResourceString(t,n),s=e.maxOperationRetryTime(),p=new i.RequestInfo(a,"PATCH",h(e,n),s);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=l,p.errorHandler=y(r),p}function b(e,r){var t=r.fullServerUrl(),n=f.makeNormalUrl(t),o=e.maxOperationRetryTime();var a=new i.RequestInfo(n,"DELETE",function(e,r){},o);return a.successCodes=[200,204],a.errorHandler=y(r),a}function g(e,r){return e&&e.contentType||r&&r.type()||"application/octet-stream"}function x(e,r,t){var n=s.clone(t);return n.fullPath=e.path,n.size=r.size(),n.contentType||(n.contentType=g(null,r)),n}function T(e,r,n,a,l){var s=r.bucketOnlyServerUrl(),p={"X-Goog-Upload-Protocol":"multipart"};var c=function(){for(var e="",r=0;r<2;r++)e+=Math.random().toString().slice(2);return e}();p["Content-Type"]="multipart/related; boundary="+c;var d=x(r,a,l),m="--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u.toResourceString(d,n)+"\r\n--"+c+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",v="\r\n--"+c+"--",y=t.FbsBlob.getBlob(m,a,v);if(null===y)throw o.cannotSliceBlob();var R={name:d.fullPath},S=f.makeUploadUrl(s),b=e.maxUploadRetryTime(),g=new i.RequestInfo(S,"POST",h(e,n),b);return g.urlParams=R,g.headers=p,g.body=y.uploadData(),g.errorHandler=U(r),g}var q=function(){return function(e,r,t,n){this.current=e,this.total=r,this.finalized=!!t,this.metadata=n||null}}();function P(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){v(!1)}var o=t||["active"];return v(r.contains(o,n)),n}function C(e,r,t,n,o){var a=r.bucketOnlyServerUrl(),l=x(r,n,o),s={name:l.fullPath},p=f.makeUploadUrl(a),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":n.size(),"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},m=u.toResourceString(l,t),h=e.maxUploadRetryTime();var y=new i.RequestInfo(p,"POST",function(e,r){var t;P(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){v(!1)}return v(c.isString(t)),t},h);return y.urlParams=s,y.headers=d,y.body=m,y.errorHandler=U(r),y}function H(e,r,t,n){var o=e.maxUploadRetryTime(),a=new i.RequestInfo(t,"POST",function(e,r){var t,o=P(e,["active","final"]);try{t=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){v(!1)}var a=parseInt(t,10);return v(!isNaN(a)),new q(a,n.size(),"final"===o)},o);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=U(r),a}exports.ResumableUploadStatus=q;var w=exports.resumableUploadChunkSize=262144;function k(e,r,t,n,a,u,l,s){var p=new q(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=n.size()),n.size()!==p.total)throw o.serverFileWrongSize();var c=p.total-p.current,d=c;a>0&&(d=Math.min(d,a));var f=p.current,m=f+d,v={"X-Goog-Upload-Command":d===c?"upload, finalize":"upload","X-Goog-Upload-Offset":p.current},y=n.slice(f,m);if(null===y)throw o.cannotSliceBlob();var R=r.maxUploadRetryTime(),S=new i.RequestInfo(t,"POST",function(e,t){var o,a=P(e,["active","final"]),l=p.current+d,s=n.size();return o="final"===a?h(r,u)(e,t):null,new q(l,s,"final"===a,o)},R);return S.headers=v,S.body=y.uploadData(),S.progressCallback=s||null,S.errorHandler=U(e),S}
},{"./array":208,"./blob":204,"./error":202,"./metadata":200,"./object":205,"./requestinfo":224,"./type":201,"./url":210}],222:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Observer=void 0;var e=require("./type"),r=t(e);function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}var n=function(){return function(e,t,n){if(r.isFunction(e)||r.isDef(t)||r.isDef(n))this.next=e,this.error=t||null,this.complete=n||null;else{var l=e;this.next=l.next||null,this.error=l.error||null,this.complete=l.complete||null}}}();exports.Observer=n;
},{"./type":201}],221:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e,a,n,r,s){this.bytesTransferred=t,this.totalBytes=e,this.state=a,this.metadata=n,this.task=r,this.ref=s}return Object.defineProperty(t.prototype,"downloadURL",{get:function(){if(null!==this.metadata){var t=this.metadata.downloadURLs;return null!=t&&null!=t[0]?t[0]:null}return null},enumerable:!0,configurable:!0}),t}();exports.UploadTaskSnapshot=t;
},{}],223:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.async=n;var e=require("./promise_external"),r=t(e);function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function n(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];r.resolve(!0).then(function(){e.apply(null,t)})}}
},{"./promise_external":197}],203:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploadTask=void 0;var t=require("./implementation/taskenums"),e=k(t),a=require("./implementation/observer"),r=require("./tasksnapshot"),n=require("./implementation/args"),s=k(n),i=require("./implementation/array"),o=k(i),l=require("./implementation/async"),u=require("./implementation/error"),_=k(u),h=require("./implementation/promise_external"),c=k(h),p=require("./implementation/requests"),d=k(p),S=require("./implementation/type"),f=k(S);function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}var v=function(){function n(e,a,r,n,s,i){void 0===i&&(i=null);var o=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=a,this.location_=r,this.blob_=s,this.metadata_=i,this.mappings_=n,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=t.InternalTaskState.RUNNING,this.errorHandler_=function(e){o.request_=null,o.chunkMultiplier_=1,e.codeEquals(_.Code.CANCELED)?(o.needToFetchStatus_=!0,o.completeTransitions_()):(o.error_=e,o.transition_(t.InternalTaskState.ERROR))},this.metadataErrorHandler_=function(e){o.request_=null,e.codeEquals(_.Code.CANCELED)?o.completeTransitions_():(o.error_=e,o.transition_(t.InternalTaskState.ERROR))},this.promise_=c.make(function(t,e){o.resolve_=t,o.reject_=e,o.start_()}),this.promise_.then(null,function(){})}return n.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(a,r){t.updateProgress_(e+a)}},n.prototype.shouldDoResumable_=function(t){return t.size()>262144},n.prototype.start_=function(){this.state_===t.InternalTaskState.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},n.prototype.resolveToken_=function(e){var a=this;this.authWrapper_.getAuthToken().then(function(r){switch(a.state_){case t.InternalTaskState.RUNNING:e(r);break;case t.InternalTaskState.CANCELING:a.transition_(t.InternalTaskState.CANCELED);break;case t.InternalTaskState.PAUSING:a.transition_(t.InternalTaskState.PAUSED)}})},n.prototype.createResumable_=function(){var t=this;this.resolveToken_(function(e){var a=d.createResumableUpload(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(a,e);t.request_=r,r.getPromise().then(function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()},t.errorHandler_)})},n.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_(function(a){var r=d.getResumableUploadStatus(t.authWrapper_,t.location_,e,t.blob_),n=t.authWrapper_.makeRequest(r,a);t.request_=n,n.getPromise().then(function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()},t.errorHandler_)})},n.prototype.continueUpload_=function(){var e=this,a=d.resumableUploadChunkSize*this.chunkMultiplier_,r=new d.ResumableUploadStatus(this.transferred_,this.blob_.size()),n=this.uploadUrl_;this.resolveToken_(function(s){var i;try{i=d.continueResumableUpload(e.location_,e.authWrapper_,n,e.blob_,a,e.mappings_,r,e.makeProgressCallback_())}catch(a){return e.error_=a,void e.transition_(t.InternalTaskState.ERROR)}var o=e.authWrapper_.makeRequest(i,s);e.request_=o,o.getPromise().then(function(a){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(a.current),a.finalized?(e.metadata_=a.metadata,e.transition_(t.InternalTaskState.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},n.prototype.increaseMultiplier_=function(){d.resumableUploadChunkSize*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},n.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(a){var r=d.getMetadata(e.authWrapper_,e.location_,e.mappings_),n=e.authWrapper_.makeRequest(r,a);e.request_=n,n.getPromise().then(function(a){e.request_=null,e.metadata_=a,e.transition_(t.InternalTaskState.SUCCESS)},e.metadataErrorHandler_)})},n.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(a){var r=d.multipartUpload(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.authWrapper_.makeRequest(r,a);e.request_=n,n.getPromise().then(function(a){e.request_=null,e.metadata_=a,e.updateProgress_(e.blob_.size()),e.transition_(t.InternalTaskState.SUCCESS)},e.errorHandler_)})},n.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},n.prototype.transition_=function(e){if(this.state_!==e)switch(e){case t.InternalTaskState.CANCELING:case t.InternalTaskState.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case t.InternalTaskState.RUNNING:var a=this.state_===t.InternalTaskState.PAUSED;this.state_=e,a&&(this.notifyObservers_(),this.start_());break;case t.InternalTaskState.PAUSED:this.state_=e,this.notifyObservers_();break;case t.InternalTaskState.CANCELED:this.error_=_.canceled(),this.state_=e,this.notifyObservers_();break;case t.InternalTaskState.ERROR:case t.InternalTaskState.SUCCESS:this.state_=e,this.notifyObservers_()}},n.prototype.completeTransitions_=function(){switch(this.state_){case t.InternalTaskState.PAUSING:this.transition_(t.InternalTaskState.PAUSED);break;case t.InternalTaskState.CANCELING:this.transition_(t.InternalTaskState.CANCELED);break;case t.InternalTaskState.RUNNING:this.start_()}},Object.defineProperty(n.prototype,"snapshot",{get:function(){var t=e.taskStateFromInternalTaskState(this.state_);return new r.UploadTaskSnapshot(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),n.prototype.on=function(e,r,n,i){void 0===r&&(r=void 0),void 0===n&&(n=void 0),void 0===i&&(i=void 0);var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",l=s.nullFunctionSpec(!0).validator,u=s.looseObjectSpec(null,!0).validator;function _(t){try{return void l(t)}catch(t){}try{if(u(t),!(f.isJustDef(t.next)||f.isJustDef(t.error)||f.isJustDef(t.complete)))throw"";return}catch(t){throw o}}var h=[s.stringSpec(function(a){if(e!==t.TaskEvent.STATE_CHANGED)throw"Expected one of the event types: ["+t.TaskEvent.STATE_CHANGED+"]."}),s.looseObjectSpec(_,!0),s.nullFunctionSpec(!0),s.nullFunctionSpec(!0)];s.validate("on",h,arguments);var c=this;function p(t){return function(e,r,n){null!==t&&s.validate("on",t,arguments);var o=new a.Observer(e,r,i);return c.addObserver_(o),function(){c.removeObserver_(o)}}}var d=[s.looseObjectSpec(function(t){if(null===t)throw o;_(t)}),s.nullFunctionSpec(!0),s.nullFunctionSpec(!0)];return!(f.isJustDef(r)||f.isJustDef(n)||f.isJustDef(i))?p(d):p(null)(r,n,i)},n.prototype.then=function(t,e){return this.promise_.then(t,e)},n.prototype.catch=function(t){return this.then(null,t)},n.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},n.prototype.removeObserver_=function(t){o.remove(this.observers_,t)},n.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),o.clone(this.observers_).forEach(function(e){t.notifyObserver_(e)})},n.prototype.finishPromise_=function(){if(null!==this.resolve_){var a=!0;switch(e.taskStateFromInternalTaskState(this.state_)){case t.TaskState.SUCCESS:(0,l.async)(this.resolve_.bind(null,this.snapshot))();break;case t.TaskState.CANCELED:case t.TaskState.ERROR:var r=this.reject_;(0,l.async)(r.bind(null,this.error_))();break;default:a=!1}a&&(this.resolve_=null,this.reject_=null)}},n.prototype.notifyObserver_=function(a){switch(e.taskStateFromInternalTaskState(this.state_)){case t.TaskState.RUNNING:case t.TaskState.PAUSED:null!==a.next&&(0,l.async)(a.next.bind(a,this.snapshot))();break;case t.TaskState.SUCCESS:null!==a.complete&&(0,l.async)(a.complete.bind(a))();break;case t.TaskState.CANCELED:case t.TaskState.ERROR:null!==a.error&&(0,l.async)(a.error.bind(a,this.error_))();break;default:null!==a.error&&(0,l.async)(a.error.bind(a,this.error_))()}},n.prototype.resume=function(){s.validate("resume",[],arguments);var e=this.state_===t.InternalTaskState.PAUSED||this.state_===t.InternalTaskState.PAUSING;return e&&this.transition_(t.InternalTaskState.RUNNING),e},n.prototype.pause=function(){s.validate("pause",[],arguments);var e=this.state_===t.InternalTaskState.RUNNING;return e&&this.transition_(t.InternalTaskState.PAUSING),e},n.prototype.cancel=function(){s.validate("cancel",[],arguments);var e=this.state_===t.InternalTaskState.RUNNING||this.state_===t.InternalTaskState.PAUSING;return e&&this.transition_(t.InternalTaskState.CANCELING),e},n}();exports.UploadTask=v;
},{"./implementation/taskenums":190,"./implementation/observer":222,"./tasksnapshot":221,"./implementation/args":194,"./implementation/array":208,"./implementation/async":223,"./implementation/error":202,"./implementation/promise_external":197,"./implementation/requests":207,"./implementation/type":201}],187:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reference=void 0;var t=require("./implementation/args"),e=v(t),r=require("./implementation/blob"),o=require("./implementation/error"),a=v(o),n=require("./implementation/location"),i=require("./implementation/metadata"),p=v(i),u=require("./implementation/object"),c=v(u),l=require("./implementation/path"),h=v(l),s=require("./implementation/requests"),f=v(s),d=require("./implementation/string"),m=v(d),g=require("./implementation/type"),b=v(g),y=require("./task");function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var w=function(){function t(t,e){this.authWrapper=t,e instanceof n.Location?this.location=e:this.location=n.Location.makeFromUrl(e)}return t.prototype.toString=function(){return e.validate("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,r){return new t(e,r)},t.prototype.mappings=function(){return p.getMappings()},t.prototype.child=function(t){e.validate("child",[e.stringSpec()],arguments);var r=h.child(this.location.path,t),o=new n.Location(this.location.bucket,r);return this.newRef(this.authWrapper,o)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=h.parent(this.location.path);if(null===t)return null;var e=new n.Location(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new n.Location(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return h.lastComponent(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,o){return void 0===o&&(o=null),e.validate("put",[e.uploadDataSpec(),e.metadataSpec(!0)],arguments),this.throwIfRoot_("put"),new y.UploadTask(this,this.authWrapper,this.location,this.mappings(),new r.FbsBlob(t),o)},t.prototype.putString=function(t,o,a){void 0===o&&(o=d.StringFormat.RAW),e.validate("putString",[e.stringSpec(),e.stringSpec(m.formatValidator,!0),e.metadataSpec(!0)],arguments),this.throwIfRoot_("putString");var n=m.dataFromString(o,t),i=c.clone(a);return!b.isDef(i.contentType)&&b.isDef(n.contentType)&&(i.contentType=n.contentType),new y.UploadTask(this,this.authWrapper,this.location,this.mappings(),new r.FbsBlob(n.data,!0),i)},t.prototype.delete=function(){e.validate("delete",[],arguments),this.throwIfRoot_("delete");var t=this;return this.authWrapper.getAuthToken().then(function(e){var r=f.deleteObject(t.authWrapper,t.location);return t.authWrapper.makeRequest(r,e).getPromise()})},t.prototype.getMetadata=function(){e.validate("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(e){var r=f.getMetadata(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(r,e).getPromise()})},t.prototype.updateMetadata=function(t){e.validate("updateMetadata",[e.metadataSpec()],arguments),this.throwIfRoot_("updateMetadata");var r=this;return this.authWrapper.getAuthToken().then(function(e){var o=f.updateMetadata(r.authWrapper,r.location,t,r.mappings());return r.authWrapper.makeRequest(o,e).getPromise()})},t.prototype.getDownloadURL=function(){return e.validate("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.getMetadata().then(function(t){var e=t.downloadURLs[0];if(b.isDef(e))return e;throw a.noDownloadURL()})},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw a.invalidRootOperation(t)},t}();exports.Reference=w;
},{"./implementation/args":194,"./implementation/blob":204,"./implementation/error":202,"./implementation/location":196,"./implementation/metadata":200,"./implementation/object":205,"./implementation/path":206,"./implementation/requests":207,"./implementation/string":189,"./implementation/type":201,"./task":203}],217:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FailRequest=void 0;var e=require("./promise_external"),r=t(e);function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}var o=function(){function e(e){this.promise_=r.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}();exports.FailRequest=o;
},{"./promise_external":197}],218:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestMap=void 0;var e=require("./object"),t=n(e),r=require("./constants"),i=n(r);function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var o=function(){function e(){this.map_={},this.id_=i.minSafeInteger}return e.prototype.addRequest=function(e){var t=this.id_;this.id_++,this.map_[t]=e;var r=this;function i(){delete r.map_[t]}e.getPromise().then(i,i)},e.prototype.clear=function(){t.forEach(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},e}();exports.RequestMap=o;
},{"./object":205,"./constants":216}],195:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthWrapper=void 0;var e=require("./constants"),t=c(e),r=require("./error"),i=c(r),o=require("./failrequest"),n=require("./location"),u=require("./promise_external"),p=c(u),a=require("./requestmap"),s=require("./type"),l=c(s);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var h=function(){function e(r,i,o,n,u){if(this.bucket_=null,this.deleted_=!1,this.app_=r,null!==this.app_){var p=this.app_.options;l.isDef(p)&&(this.bucket_=e.extractBucket_(p))}this.storageRefMaker_=i,this.requestMaker_=o,this.pool_=u,this.service_=n,this.maxOperationRetryTime_=t.defaultMaxOperationRetryTime,this.maxUploadRetryTime_=t.defaultMaxUploadRetryTime,this.requestMap_=new a.RequestMap}return e.extractBucket_=function(e){var r=e[t.configOption]||null;return null==r?null:n.Location.makeFromBucketSpec(r).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&l.isDef(this.app_.INTERNAL)&&l.isDef(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):p.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw i.appDeleted();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new o.FailRequest(i.appDeleted());var r=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(r),r},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}();exports.AuthWrapper=h;
},{"./constants":216,"./error":202,"./failrequest":217,"./location":196,"./promise_external":197,"./requestmap":218,"./type":201}],209:[function(require,module,exports) {
"use strict";function n(n,t,u){var e=1,o=null,l=!1,r=0;function i(){return 2===r}var a=!1;function c(){a||(a=!0,t.apply(null,arguments))}function f(t){o=setTimeout(function(){o=null,n(p,i())},t)}function p(n){for(var t,u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];a||(n?c.apply(null,arguments):i()||l?c.apply(null,arguments):(e<64&&(e*=2),1===r?(r=2,t=0):t=1e3*(e+Math.random()),f(t)))}var s=!1;function v(n){s||(s=!0,a||(null!==o?(n||(r=2),clearTimeout(o),f(0)):n||(r=1)))}return f(0),setTimeout(function(){l=!0,v(!0)},u),v}function t(n){n(!1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.start=n,exports.stop=t;
},{}],198:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestEndStatus=void 0,exports.addAuthHeader_=m,exports.addVersionHeader_=R,exports.makeRequest=x;var e=require("./array"),r=C(e),t=require("./backoff"),s=C(t),o=require("./error"),n=C(o),a=require("./object"),i=C(a),l=require("./promise_external"),u=C(l),c=require("./type"),d=C(c),_=require("./url"),h=C(_),p=require("./xhrio"),f=C(p),b=require("../../app"),g=v(b);function v(e){return e&&e.__esModule?e:{default:e}}function C(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}var k=function(){function e(e,r,t,s,o,n,a,i,l,c,d){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=r,this.headers_=t,this.body_=s,this.successCodes_=o.slice(),this.additionalRetryCodes_=n.slice(),this.callback_=a,this.errorCallback_=i,this.progressCallback_=c,this.timeout_=l,this.pool_=d;var _=this;this.promise_=u.make(function(e,r){_.resolve_=e,_.reject_=r,_.start_()})}return e.prototype.start_=function(){var e=this;function t(r,t){var s,o=e.resolve_,a=e.reject_,i=t.xhr;if(t.wasSuccessCode)try{var l=e.callback_(i,i.getResponseText());d.isJustDef(l)?o(l):o()}catch(e){a(e)}else null!==i?((s=n.unknown()).setServerResponseProp(i.getResponseText()),e.errorCallback_?a(e.errorCallback_(i,s)):a(s)):t.canceled?a(s=e.appDelete_?n.appDeleted():n.canceled()):a(s=n.retryLimitExceeded())}this.canceled_?t(0,new y(!1,null,!0)):this.backoffId_=s.start(function(t,s){if(s)t(!1,new y(!1,null,!0));else{var o=e.pool_.createXhrIo();e.pendingXhr_=o,null!==e.progressCallback_&&o.addUploadProgressListener(n),o.send(e.url_,e.method_,e.body_,e.headers_).then(function(s){null!==e.progressCallback_&&s.removeUploadProgressListener(n),e.pendingXhr_=null;var o=(s=s).getErrorCode()===f.ErrorCode.NO_ERROR,a=s.getStatus();if(o&&!e.isRetryStatusCode_(a)){var i=r.contains(e.successCodes_,a);t(!0,new y(i,s))}else{var l=s.getErrorCode()===f.ErrorCode.ABORT;t(!1,new y(!1,null,l))}})}function n(r){var t=r.loaded,s=r.lengthComputable?r.total:-1;null!==e.progressCallback_&&e.progressCallback_(t,s)}},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&s.stop(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,s=r.contains([408,429],e),o=r.contains(this.additionalRetryCodes_,e);return t||s||o},e}(),y=function(){return function(e,r,t){this.wasSuccessCode=e,this.xhr=r,this.canceled=!!t}}();function m(e,r){null!==r&&r.length>0&&(e.Authorization="Firebase "+r)}function R(e){var r=void 0!==g.default?g.default.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+r}function x(e,r,t){var s=h.makeQueryString(e.urlParams),o=e.url+s,n=i.clone(e.headers);return m(n,r),R(n),new k(o,e.method,n,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,t)}exports.RequestEndStatus=y;
},{"./array":208,"./backoff":209,"./error":202,"./object":205,"./promise_external":197,"./type":201,"./url":210,"./xhrio":211,"../../app":55}],188:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServiceInternals=exports.Service=void 0;var e=require("./implementation/args"),t=c(e),r=require("./implementation/authwrapper"),i=require("./implementation/location"),n=require("./implementation/promise_external"),a=c(n),o=require("./implementation/request"),p=c(o),u=require("./reference");function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var l=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new r.AuthWrapper(e,function(e,t){return new u.Reference(e,t)},p.makeRequest,this,t),this.app_=e,null!=n)this.bucket_=i.Location.makeFromBucketSpec(n);else{var a=this.authWrapper_.bucket();null!=a&&(this.bucket_=new i.Location(a,""))}this.internals_=new s(this)}return e.prototype.ref=function(e){if(t.validate("ref",[t.stringSpec(function(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var r=new u.Reference(this.authWrapper_,this.bucket_);return null!=e?r.child(e):r},e.prototype.refFromURL=function(e){return t.validate("refFromURL",[t.stringSpec(function(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{i.Location.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new u.Reference(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){t.validate("setMaxUploadRetryTime",[t.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){t.validate("setMaxOperationRetryTime",[t.nonNegativeNumberSpec()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}();exports.Service=l;var s=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),a.resolve(void 0)},e}();exports.ServiceInternals=s;
},{"./implementation/args":194,"./implementation/authwrapper":195,"./implementation/location":196,"./implementation/promise_external":197,"./implementation/request":198,"./reference":187}],58:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerStorage=c;var e=require("./storage/implementation/string"),r=require("./storage/implementation/taskenums"),t=require("./storage/implementation/xhriopool"),i=require("./storage/reference"),o=require("./storage/service"),a=require("./app"),n=s(a);function s(e){return e&&e.__esModule?e:{default:e}}var u="storage";function g(e,r,i){return new o.Service(e,new t.XhrIoPool,i)}function c(t){var a={TaskState:r.TaskState,TaskEvent:r.TaskEvent,StringFormat:e.StringFormat,Storage:o.Service,Reference:i.Reference};t.INTERNAL.registerService(u,g,a,void 0,!0)}c(n.default);
},{"./storage/implementation/string":189,"./storage/implementation/taskenums":190,"./storage/implementation/xhriopool":191,"./storage/reference":187,"./storage/service":188,"./app":55}],109:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,s={AVAILABLE_IN_WINDOW:"only-available-in-window",AVAILABLE_IN_SW:"only-available-in-sw",SHOULD_BE_INHERITED:"should-be-overriden",BAD_SENDER_ID:"bad-sender-id",INCORRECT_GCM_SENDER_ID:"incorrect-gcm-sender-id",PERMISSION_DEFAULT:"permission-default",PERMISSION_BLOCKED:"permission-blocked",UNSUPPORTED_BROWSER:"unsupported-browser",NOTIFICATIONS_BLOCKED:"notifications-blocked",FAILED_DEFAULT_REGISTRATION:"failed-serviceworker-registration",SW_REGISTRATION_EXPECTED:"sw-registration-expected",GET_SUBSCRIPTION_FAILED:"get-subscription-failed",INVALID_SAVED_TOKEN:"invalid-saved-token",SW_REG_REDUNDANT:"sw-reg-redundant",TOKEN_SUBSCRIBE_FAILED:"token-subscribe-failed",TOKEN_SUBSCRIBE_NO_TOKEN:"token-subscribe-no-token",TOKEN_SUBSCRIBE_NO_PUSH_SET:"token-subscribe-no-push-set",USE_SW_BEFORE_GET_TOKEN:"use-sw-before-get-token",INVALID_DELETE_TOKEN:"invalid-delete-token",DELETE_TOKEN_NOT_FOUND:"delete-token-not-found",DELETE_SCOPE_NOT_FOUND:"delete-scope-not-found",BG_HANDLER_FUNCTION_EXPECTED:"bg-handler-function-expected",NO_WINDOW_CLIENT_TO_MSG:"no-window-client-to-msg",UNABLE_TO_RESUBSCRIBE:"unable-to-resubscribe",NO_FCM_TOKEN_FOR_RESUBSCRIBE:"no-fcm-token-for-resubscribe",FAILED_TO_DELETE_TOKEN:"failed-to-delete-token",NO_SW_IN_REG:"no-sw-in-reg",BAD_SCOPE:"bad-scope",BAD_VAPID_KEY:"bad-vapid-key",BAD_SUBSCRIPTION:"bad-subscription",BAD_TOKEN:"bad-token",BAD_PUSH_SET:"bad-push-set",FAILED_DELETE_VAPID_KEY:"failed-delete-vapid-key"},t=((e={})[s.AVAILABLE_IN_WINDOW]="This method is available in a Window context.",e[s.AVAILABLE_IN_SW]="This method is available in a service worker context.",e[s.SHOULD_BE_INHERITED]="This method should be overriden by extended classes.",e[s.BAD_SENDER_ID]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",e[s.PERMISSION_DEFAULT]="The required permissions were not granted and dismissed instead.",e[s.PERMISSION_BLOCKED]="The required permissions were not granted and blocked instead.",e[s.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase SDK.",e[s.NOTIFICATIONS_BLOCKED]="Notifications have been blocked.",e[s.FAILED_DEFAULT_REGISTRATION]="We are unable to register the default service worker. {$browserErrorMessage}",e[s.SW_REGISTRATION_EXPECTED]="A service worker registration was the expected input.",e[s.GET_SUBSCRIPTION_FAILED]="There was an error when trying to get any existing Push Subscriptions.",e[s.INVALID_SAVED_TOKEN]="Unable to access details of the saved token.",e[s.SW_REG_REDUNDANT]="The service worker being used for push was made redundant.",e[s.TOKEN_SUBSCRIBE_FAILED]="A problem occured while subscribing the user to FCM: {$message}",e[s.TOKEN_SUBSCRIBE_NO_TOKEN]="FCM returned no token when subscribing the user to push.",e[s.TOKEN_SUBSCRIBE_NO_PUSH_SET]="FCM returned an invalid response when getting an FCM token.",e[s.USE_SW_BEFORE_GET_TOKEN]="You must call useServiceWorker() before calling getToken() to ensure your service worker is used.",e[s.INVALID_DELETE_TOKEN]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",e[s.DELETE_TOKEN_NOT_FOUND]="The deletion attempt for token could not be performed as the token was not found.",e[s.DELETE_SCOPE_NOT_FOUND]="The deletion attempt for service worker scope could not be performed as the scope was not found.",e[s.BG_HANDLER_FUNCTION_EXPECTED]="The input to setBackgroundMessageHandler() must be a function.",e[s.NO_WINDOW_CLIENT_TO_MSG]="An attempt was made to message a non-existant window client.",e[s.UNABLE_TO_RESUBSCRIBE]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",e[s.NO_FCM_TOKEN_FOR_RESUBSCRIBE]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",e[s.FAILED_TO_DELETE_TOKEN]="Unable to delete the currently saved token.",e[s.NO_SW_IN_REG]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",e[s.INCORRECT_GCM_SENDER_ID]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",e[s.BAD_SCOPE]="The service worker scope must be a string with at least one character.",e[s.BAD_VAPID_KEY]="The public VAPID key must be a string with at least one character.",e[s.BAD_SUBSCRIPTION]="The subscription must be a valid PushSubscription.",e[s.BAD_TOKEN]="The FCM Token used for storage / lookup was not a valid token string.",e[s.BAD_PUSH_SET]="The FCM push set used for storage / lookup was not not a valid push set string.",e[s.FAILED_DELETE_VAPID_KEY]="The VAPID key could not be deleted.",e);exports.default={codes:s,map:t},module.exports=exports.default;
},{}],183:[function(require,module,exports) {
"use strict";function e(e){var r=new Uint8Array(e);return window.btoa(String.fromCharCode.apply(null,r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(r){return e(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},module.exports=exports.default;
},{}],113:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=[4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110],t={userVisibleOnly:!0,applicationServerKey:new Uint8Array(e)};exports.default={ENDPOINT:"https://fcm.googleapis.com",APPLICATION_SERVER_KEY:e,SUBSCRIPTION_OPTIONS:t},module.exports=exports.default;
},{}],159:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../app/errors"),t=require("./errors"),r=c(t),n=require("../helpers/array-buffer-to-base64"),o=c(n),i=require("./fcm-details"),a=c(i);function c(e){return e&&e.__esModule?e:{default:e}}var s="fcm_token_details_db",u="fcm_token_object_Store",f=1,p=function(){function t(){this.errorFactory_=new e.ErrorFactory("messaging","Messaging",r.default.map),this.openDbPromise_=null}return t.prototype.openDatabase_=function(){return this.openDbPromise_?this.openDbPromise_:(this.openDbPromise_=new Promise(function(e,t){var r=indexedDB.open(s,f);r.onerror=function(e){t(e.target.error)},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result.createObjectStore(u,{keyPath:"swScope"});t.createIndex("fcmSenderId","fcmSenderId",{unique:!1}),t.createIndex("fcmToken","fcmToken",{unique:!0})}}),this.openDbPromise_)},t.prototype.closeDatabase=function(){var e=this;return this.openDbPromise_?this.openDbPromise_.then(function(t){t.close(),e.openDbPromise_=null}):Promise.resolve()},t.prototype.getTokenDetailsFromToken=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var o=t.transaction([u]).objectStore(u).index("fcmToken").get(e);o.onerror=function(e){n(e.target.error)},o.onsuccess=function(e){r(e.target.result)}})})},t.prototype.getTokenDetailsFromSWScope_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var o=t.transaction([u]).objectStore(u).get(e);o.onerror=function(e){n(e.target.error)},o.onsuccess=function(e){r(e.target.result)}})})},t.prototype.getAllTokenDetailsForSenderId_=function(e){return this.openDatabase_().then(function(t){return new Promise(function(r,n){var o=[],i=t.transaction([u]).objectStore(u).openCursor();i.onerror=function(e){n(e.target.error)},i.onsuccess=function(t){var n=t.target.result;n?(n.value.fcmSenderId===e&&o.push(n.value),n.continue()):r(o)}})})},t.prototype.subscribeToFCM=function(e,t,n){var i=this,c=(0,o.default)(t.getKey("p256dh")),s=(0,o.default)(t.getKey("auth")),u="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+c+"&encryption_auth="+s;n&&(u+="&pushSet="+n);var f=new Headers;f.append("Content-Type","application/x-www-form-urlencoded");var p={method:"POST",headers:f,body:u};return fetch(a.default.ENDPOINT+"/fcm/connect/subscribe",p).then(function(e){return e.json()}).then(function(e){var t=e;if(t.error){var n=t.error.message;throw i.errorFactory_.create(r.default.codes.TOKEN_SUBSCRIBE_FAILED,{message:n})}if(!t.token)throw i.errorFactory_.create(r.default.codes.TOKEN_SUBSCRIBE_NO_TOKEN);if(!t.pushSet)throw i.errorFactory_.create(r.default.codes.TOKEN_SUBSCRIBE_NO_PUSH_SET);return{token:t.token,pushSet:t.pushSet}})},t.prototype.isSameSubscription_=function(e,t){return e.endpoint===t.endpoint&&(0,o.default)(e.getKey("auth"))===t.auth&&(0,o.default)(e.getKey("p256dh"))===t.p256dh},t.prototype.saveTokenDetails_=function(e,t,r,n,i){var a={swScope:t.scope,endpoint:r.endpoint,auth:(0,o.default)(r.getKey("auth")),p256dh:(0,o.default)(r.getKey("p256dh")),fcmToken:n,fcmPushSet:i,fcmSenderId:e};return this.openDatabase_().then(function(e){return new Promise(function(t,r){var n=e.transaction([u],"readwrite").objectStore(u).put(a);n.onerror=function(e){r(e.target.error)},n.onsuccess=function(e){t()}})})},t.prototype.getSavedToken=function(e,t){var n=this;return t instanceof ServiceWorkerRegistration?"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(r.default.codes.BAD_SENDER_ID)):this.getAllTokenDetailsForSenderId_(e).then(function(r){if(0!==r.length){var n=r.findIndex(function(r){return t.scope===r.swScope&&e===r.fcmSenderId});if(-1!==n)return r[n]}}).then(function(e){if(e)return t.pushManager.getSubscription().catch(function(e){throw n.errorFactory_.create(r.default.codes.GET_SUBSCRIPTION_FAILED)}).then(function(t){if(t&&n.isSameSubscription_(t,e))return e.fcmToken})}):Promise.reject(this.errorFactory_.create(r.default.codes.SW_REGISTRATION_EXPECTED))},t.prototype.createToken=function(e,t){var n,o,i=this;return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(r.default.codes.BAD_SENDER_ID)):t instanceof ServiceWorkerRegistration?t.pushManager.getSubscription().then(function(e){return e||t.pushManager.subscribe(a.default.SUBSCRIPTION_OPTIONS)}).then(function(t){return n=t,i.subscribeToFCM(e,n)}).then(function(r){return o=r,i.saveTokenDetails_(e,t,n,o.token,o.pushSet)}).then(function(){return o.token}):Promise.reject(this.errorFactory_.create(r.default.codes.SW_REGISTRATION_EXPECTED))},t.prototype.deleteToken=function(e){var t=this;return"string"!=typeof e||0===e.length?Promise.reject(this.errorFactory_.create(r.default.codes.INVALID_DELETE_TOKEN)):this.getTokenDetailsFromToken(e).then(function(e){if(!e)throw t.errorFactory_.create(r.default.codes.DELETE_TOKEN_NOT_FOUND);return t.openDatabase_().then(function(n){return new Promise(function(o,i){var a=n.transaction([u],"readwrite").objectStore(u).delete(e.swScope);a.onerror=function(e){i(e.target.error)},a.onsuccess=function(n){0!==n.target.result?o(e):i(t.errorFactory_.create(r.default.codes.FAILED_TO_DELETE_TOKEN))}})})})},t}();exports.default=p,module.exports=exports.default;
},{"../../app/errors":82,"./errors":109,"../helpers/array-buffer-to-base64":183,"./fcm-details":113}],112:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={granted:"granted",default:"default",denied:"denied"},module.exports=exports.default;
},{}],108:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../app/errors"),t=require("../models/errors"),r=a(t),o=require("../models/token-manager"),n=a(o),i=require("../models/notification-permission"),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var u="messagingSenderId",c=function(){function t(t){var o=this;if(this.errorFactory_=new e.ErrorFactory("messaging","Messaging",r.default.map),!t.options[u]||"string"!=typeof t.options[u])throw this.errorFactory_.create(r.default.codes.BAD_SENDER_ID);this.messagingSenderId_=t.options[u],this.tokenManager_=new n.default,this.app=t,this.INTERNAL={},this.INTERNAL.delete=function(){return o.delete}}return t.prototype.getToken=function(){var e=this,t=this.getNotificationPermission_();return t!==s.default.granted?t===s.default.denied?Promise.reject(this.errorFactory_.create(r.default.codes.NOTIFICATIONS_BLOCKED)):Promise.resolve(null):this.getSWRegistration_().then(function(t){return e.tokenManager_.getSavedToken(e.messagingSenderId_,t).then(function(r){return r||e.tokenManager_.createToken(e.messagingSenderId_,t)})})},t.prototype.deleteToken=function(e){var t=this;return this.tokenManager_.deleteToken(e).then(function(){return t.getSWRegistration_().then(function(e){if(e)return e.pushManager.getSubscription()}).then(function(e){if(e)return e.unsubscribe()})})},t.prototype.getSWRegistration_=function(){throw this.errorFactory_.create(r.default.codes.SHOULD_BE_INHERITED)},t.prototype.requestPermission=function(){throw this.errorFactory_.create(r.default.codes.AVAILABLE_IN_WINDOW)},t.prototype.useServiceWorker=function(e){throw this.errorFactory_.create(r.default.codes.AVAILABLE_IN_WINDOW)},t.prototype.onMessage=function(e,t,o){throw this.errorFactory_.create(r.default.codes.AVAILABLE_IN_WINDOW)},t.prototype.onTokenRefresh=function(e,t,o){throw this.errorFactory_.create(r.default.codes.AVAILABLE_IN_WINDOW)},t.prototype.setBackgroundMessageHandler=function(e){throw this.errorFactory_.create(r.default.codes.AVAILABLE_IN_SW)},t.prototype.delete=function(){this.tokenManager_.closeDatabase()},t.prototype.getNotificationPermission_=function(){return Notification.permission},t.prototype.getTokenManager=function(){return this.tokenManager_},t}();exports.default=c,module.exports=exports.default;
},{"../../app/errors":82,"../models/errors":109,"../models/token-manager":159,"../models/notification-permission":112}],110:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={TYPE_OF_MSG:"firebase-messaging-msg-type",DATA:"firebase-messaging-msg-data"},s={PUSH_MSG_RECEIVED:"push-msg-received",NOTIFICATION_CLICKED:"notification-clicked"},t=function(s,t){var r;return(r={})[e.TYPE_OF_MSG]=s,r[e.DATA]=t,r};exports.default={PARAMS:e,TYPES_OF_MSG:s,createNewMsg:t},module.exports=exports.default;
},{}],111:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={path:"/firebase-messaging-sw.js",scope:"/firebase-cloud-messaging-push-scope"},module.exports=exports.default;
},{}],76:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./controller-interface"),t=_(e),r=require("../models/errors"),o=_(r),i=require("../models/worker-page-message"),n=_(i),s=require("../models/default-sw"),a=_(s),c=require("../models/notification-permission"),u=_(c),f=require("../../app/subscribe");function _(e){return e&&e.__esModule?e:{default:e}}var d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),h=function(e){function t(t){var r=e.call(this,t)||this;return r.registrationToUse_,r.manifestCheckPromise_,r.messageObserver_=null,r.onMessage_=(0,f.createSubscribe)(function(e){r.messageObserver_=e}),r.tokenRefreshObserver_=null,r.onTokenRefresh_=(0,f.createSubscribe)(function(e){r.tokenRefreshObserver_=e}),r.setupSWMessageListener_(),r}return d(t,e),t.prototype.getToken=function(){var t=this;return this.isSupported_()?this.manifestCheck_().then(function(){return e.prototype.getToken.call(t)}):Promise.reject(this.errorFactory_.create(o.default.codes.UNSUPPORTED_BROWSER))},t.prototype.manifestCheck_=function(){var e=this;if(this.manifestCheckPromise_)return this.manifestCheckPromise_;var t=document.querySelector('link[rel="manifest"]');return this.manifestCheckPromise_=t?fetch(t.href).then(function(e){return e.json()}).catch(function(){return Promise.resolve()}).then(function(t){if(t&&t.gcm_sender_id&&"103953800507"!==t.gcm_sender_id)throw e.errorFactory_.create(o.default.codes.INCORRECT_GCM_SENDER_ID)}):Promise.resolve(),this.manifestCheckPromise_},t.prototype.requestPermission=function(){var e=this;return Notification.permission===u.default.granted?Promise.resolve():new Promise(function(t,r){var i=function(i){return i===u.default.granted?t():i===u.default.denied?r(e.errorFactory_.create(o.default.codes.PERMISSION_BLOCKED)):r(e.errorFactory_.create(o.default.codes.PERMISSION_DEFAULT))},n=Notification.requestPermission(function(e){n||i(e)});n&&n.then(i)})},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw this.errorFactory_.create(o.default.codes.SW_REGISTRATION_EXPECTED);if(void 0!==this.registrationToUse_)throw this.errorFactory_.create(o.default.codes.USE_SW_BEFORE_GET_TOKEN);this.registrationToUse_=e},t.prototype.onMessage=function(e,t,r){return this.onMessage_(e,t,r)},t.prototype.onTokenRefresh=function(e,t,r){return this.onTokenRefresh_(e,t,r)},t.prototype.waitForRegistrationToActivate_=function(e){var t=this,r=e.installing||e.waiting||e.active;return new Promise(function(i,n){if(r)if("activated"!==r.state)if("redundant"!==r.state){r.addEventListener("statechange",function s(){if("activated"===r.state)i(e);else{if("redundant"!==r.state)return;n(t.errorFactory_.create(o.default.codes.SW_REG_REDUNDANT))}r.removeEventListener("statechange",s)})}else n(t.errorFactory_.create(o.default.codes.SW_REG_REDUNDANT));else i(e);else n(t.errorFactory_.create(o.default.codes.NO_SW_IN_REG))})},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse_?this.waitForRegistrationToActivate_(this.registrationToUse_):(this.registrationToUse_=null,navigator.serviceWorker.register(a.default.path,{scope:a.default.scope}).catch(function(t){throw e.errorFactory_.create(o.default.codes.FAILED_DEFAULT_REGISTRATION,{browserErrorMessage:t.message})}).then(function(t){return e.waitForRegistrationToActivate_(t).then(function(){return e.registrationToUse_=t,t.update(),t})}))},t.prototype.setupSWMessageListener_=function(){var e=this;"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data&&t.data[n.default.PARAMS.TYPE_OF_MSG]){var r=t.data;switch(r[n.default.PARAMS.TYPE_OF_MSG]){case n.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED:case n.default.TYPES_OF_MSG.NOTIFICATION_CLICKED:var o=r[n.default.PARAMS.DATA];e.messageObserver_.next(o)}}},!1)},t.prototype.isSupported_=function(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")},t}(t.default);exports.default=h,module.exports=exports.default;
},{"./controller-interface":108,"../models/errors":109,"../models/worker-page-message":110,"../models/default-sw":111,"../models/notification-permission":112,"../../app/subscribe":79}],77:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=require("./controller-interface"),n=u(e),o=require("../models/errors"),r=u(o),i=require("../models/worker-page-message"),a=u(i),s=require("../models/fcm-details"),c=u(s);function u(t){return t&&t.__esModule?t:{default:t}}var f=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l="FCM_MSG",d=function(e){function n(t){var n=e.call(this,t)||this;return self.addEventListener("push",function(t){return n.onPush_(t)},!1),self.addEventListener("pushsubscriptionchange",function(t){return n.onSubChange_(t)},!1),self.addEventListener("notificationclick",function(t){return n.onNotificationClick_(t)},!1),n.bgMessageHandler_=null,n}return f(n,e),n.prototype.onPush_=function(t){var e,n=this;try{e=t.data.json()}catch(t){return}var o=this.hasVisibleClients_().then(function(t){if(t)return e.notification||n.bgMessageHandler_?n.sendMessageToWindowClients_(e):void 0;var o=n.getNotificationData_(e);if(o){var r=o.title||"";return self.registration.showNotification(r,o)}return n.bgMessageHandler_?n.bgMessageHandler_(e):void 0});t.waitUntil(o)},n.prototype.onSubChange_=function(t){var e=this,n=this.getToken().then(function(t){if(!t)throw e.errorFactory_.create(r.default.codes.NO_FCM_TOKEN_FOR_RESUBSCRIBE);var n=null,o=e.getTokenManager();return o.getTokenDetailsFromToken(t).then(function(t){if(!(n=t))throw e.errorFactory_.create(r.default.codes.INVALID_SAVED_TOKEN);return self.registration.pushManager.subscribe(c.default.SUBSCRIPTION_OPTIONS)}).then(function(t){return o.subscribeToFCM(n.fcmSenderId,t,n.fcmPushSet)}).catch(function(t){return o.deleteToken(n.fcmToken).then(function(){throw e.errorFactory_.create(r.default.codes.UNABLE_TO_RESUBSCRIBE,{message:t})})})});t.waitUntil(n)},n.prototype.onNotificationClick_=function(t){var e=this;if(t.notification&&t.notification.data&&t.notification.data[l]){t.stopImmediatePropagation(),t.notification.close();var n=t.notification.data[l],o=n.notification.click_action;if(o){var r=this.getWindowClient_(o).then(function(t){return t||self.clients.openWindow(o)}).then(function(t){if(t){n.notification;delete n.notification;var o=a.default.createNewMsg(a.default.TYPES_OF_MSG.NOTIFICATION_CLICKED,n);return e.attemptToMessageClient_(t,o)}});t.waitUntil(r)}}},n.prototype.getNotificationData_=function(e){if(e&&"object"===t(e.notification)){var n,o=Object.assign({},e.notification);return o.data=((n={})[l]=e,n),o}},n.prototype.setBackgroundMessageHandler=function(t){if(t&&"function"!=typeof t)throw this.errorFactory_.create(r.default.codes.BG_HANDLER_FUNCTION_EXPECTED);this.bgMessageHandler_=t},n.prototype.getWindowClient_=function(t){var e=new URL(t).href;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){for(var n=null,o=0;o<t.length;o++){if(new URL(t[o].url).href===e){n=t[o];break}}if(n)return n.focus(),n})},n.prototype.attemptToMessageClient_=function(t,e){var n=this;return new Promise(function(o,i){if(!t)return i(n.errorFactory_.create(r.default.codes.NO_WINDOW_CLIENT_TO_MSG));t.postMessage(e),o()})},n.prototype.hasVisibleClients_=function(){return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(t){return t.some(function(t){return"visible"===t.visibilityState})})},n.prototype.sendMessageToWindowClients_=function(t){var e=this;return self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(n){var o=a.default.createNewMsg(a.default.TYPES_OF_MSG.PUSH_MSG_RECEIVED,t);return Promise.all(n.map(function(t){return e.attemptToMessageClient_(t,o)}))})},n.prototype.getSWRegistration_=function(){return Promise.resolve(self.registration)},n}(n.default);exports.default=d,module.exports=exports.default;
},{"./controller-interface":108,"../models/errors":109,"../models/worker-page-message":110,"../models/fcm-details":113}],59:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerMessaging=i;var e=require("./messaging/controllers/window-controller"),r=o(e),s=require("./messaging/controllers/sw-controller"),n=o(s),t=require("./app"),l=o(t);function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var s={Messaging:r.default};e.INTERNAL.registerService("messaging",function(e){return self&&"ServiceWorkerGlobalScope"in self?new n.default(e):new r.default(e)},s)}i(l.default);
},{"./messaging/controllers/window-controller":76,"./messaging/controllers/sw-controller":77,"./app":55}],43:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./app"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}require("./auth"),require("./database"),require("./storage"),require("./messaging"),exports.default=r.default,module.exports=exports.default;
},{"./app":55,"./auth":56,"./database":57,"./storage":58,"./messaging":59}],31:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.database=void 0;var e=require("firebase"),a=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var r={apiKey:"AIzaSyDon__hg5Iv1zi5uvMv2V5HCSGmy6NzDGE",authDomain:"rxczat.firebaseapp.com",databaseURL:"https://rxczat.firebaseio.com",projectId:"rxczat",storageBucket:"",messagingSenderId:"324635810240"};a.default.initializeApp(r);var s=exports.database=a.default.database();
},{"firebase":43}],9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),t=require("react"),n=l(t),a=require("computed-values"),r=require("../BaseComponent"),o=require("../Graph/Store/firebase");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=o.database.ref("rxjs-demo"),m=new a.Value(""),p=new a.Value(""),d=new a.Value(!1),f=new a.Value(!0),h=new a.Value([]);c.on("child_added",function(e){var t=h.getValue(),n=e.key,a=e.val();"string"==typeof n&&t.push({id:n,nick:a.nick,message:a.message}),h.setValue(t)}),o.database.ref(".info/connected").on("value",function(e){f.setValue(e.val())}),c.on("child_changed",function(e){}),c.on("child_removed",function(e){});var _=function(t){function a(){var e,t,r;u(this,a);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return t=r=i(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(l))),r._onChangeNick=function(e){e.target instanceof HTMLInputElement&&m.setValue(e.target.value)},r._onChangeTextarea=function(e){e.target instanceof HTMLTextAreaElement&&p.setValue(e.target.value)},r._onSend=function(){var e=m.getValue(),t=p.getValue();e.length<1?alert("Type in the nick"):t.length<1?alert("Type in the message"):(d.setValue(!0),p.setValue(""),c.push({nick:e,message:t}).then(function(e){d.setValue(!1)}).catch(function(e){d.setValue(!1)}))},r._renderNetworkStatus=function(){return r.getFromComputed(f.asComputed())?n.createElement("div",{className:"Chat__online"},"Network Online"):n.createElement("div",{className:"Chat__offline"},"Network Offline")},i(r,t)}return s(a,r.BaseComponent),e(a,[{key:"render",value:function(){var e=this.getFromComputed(m.asComputed()),t=this.getFromComputed(p.asComputed()),a=this.getFromComputed(d.asComputed());return n.createElement("div",{className:"Chat__wrapper"},this._renderNetworkStatus(),n.createElement("div",null,n.createElement("div",{className:"Chat_InputGroup"},n.createElement("div",{className:"Chat_InputLabel"},"Nick:"),n.createElement("div",{className:"Chat_InputBox"},n.createElement("input",{className:"",value:e,onChange:this._onChangeNick}))),n.createElement("div",{className:"Chat_InputGroup"},n.createElement("div",{className:"Chat_InputLabel"},"Message:"),n.createElement("div",{className:"Chat_InputBox"},n.createElement("textarea",{className:"",value:t,onChange:this._onChangeTextarea}))),n.createElement("div",null,n.createElement("button",{onClick:this._onSend},"Send"))),this._renderList(),a?n.createElement("div",{className:"Chat__sending"},"Sending ..."):null)}},{key:"_renderList",value:function(){var e=this,t=this.getFromComputed(h.asComputed()).concat().reverse();return n.createElement("div",{className:"Chat__list App__border"},t.map(function(t){return e._renderListItem(t)}))}},{key:"_renderListItem",value:function(e){return n.createElement("div",{className:"Chat__message",key:e.id},n.createElement("div",{className:"Chat__nick"},e.nick,":"),n.createElement("div",null,e.message))}}]),a}();exports.default=_;
},{"react":32,"computed-values":40,"../BaseComponent":6,"../Graph/Store/firebase":31}],35:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}return function(t,n,u){return n&&e(t.prototype,n),u&&e(t,u),t}}(),t=require("computed-values");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(){n(this,t)}return e(t,[{key:"construtor",value:function(){this._getValue$=null}},{key:"setCurrent",value:function(e){this._getValue$=e}},{key:"getValue$",value:function(e){return null!==this._getValue$?this._getValue$(e):e.getValueSnapshot()}},{key:"renderExit",value:function(){this._getValue$=null}}]),t}();exports.default=new u;
},{"computed-values":40}],192:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),t=require("computed-values"),a=require("../RenderManager"),n=r(a);function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function a(){u(this,a),this._data=new Map}return e(a,[{key:"set",value:function(e,a){var n=this._data.get(e);if(n)n.setValue(a);else{var r=new t.Value(a);this._data.set(e,r)}}},{key:"get$",value:function(e){var a=this._data.get(e);if(a)return a.asComputed();var n=new t.Value(null);return this._data.set(e,n),n.asComputed()}},{key:"get",value:function(e){return n.default.getValue$(this.get$(e))}}]),a}();exports.default=i;
},{"computed-values":40,"../RenderManager":35}],193:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),n=require("./firebase"),t=require("computed-values"),i=require("../RenderManager"),s=u(i),a=require("./ChatMessageStore"),r=u(a);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var l=function(){function i(e){var s=this;o(this,i),this._chatMessage=e,this._list=new t.Value([]),this.list$=this._list.asComputed();var a=n.database.ref("rxjs-demo");a.on("child_added",function(e){var n=s._list.getValue(),t=e.key,i=e.val();"string"==typeof t&&(s._chatMessage.set(t,{id:t,nick:i.nick,message:i.message}),n.push(t)),s._list.setValue(n)}),a.on("child_changed",function(e){}),a.on("child_removed",function(e){}),this._online=new t.Value(!0),this.online$=this._online.asComputed(),n.database.ref(".info/connected").on("value",function(e){s._online.setValue(e.val())}),this._sending=new t.Value(!1),this.sending$=this._sending.asComputed()}return e(i,[{key:"send",value:function(e,t){var i=this,s=n.database.ref("rxjs-demo");return this._sending.setValue(!0),s.push({nick:e,message:t}).then(function(e){return i._sending.setValue(!1),e}).catch(function(e){return i._sending.setValue(!1),Promise.reject(e)})}},{key:"sending",get:function(){return s.default.getValue$(this.sending$)}},{key:"online",get:function(){return s.default.getValue$(this.online$)}},{key:"list",get:function(){return s.default.getValue$(this.list$)}}]),i}();exports.default=l;
},{"./firebase":31,"computed-values":40,"../RenderManager":35,"./ChatMessageStore":192}],36:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ChatMessageStore"),t=r(e),a=require("./ChatStore"),s=r(a);function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(){n(this,e),this.chatMessage=new t.default,this.chat=new s.default(this.chatMessage)};exports.default=o;
},{"./ChatMessageStore":192,"./ChatStore":193}],24:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),r=require("react"),t=l(r),n=require("./Store/Store"),o=c(n),i=require("computed-values"),u=require("./RenderManager"),a=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function f(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function p(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var d=new o.default,y="undefined"==typeof window,b=function(r){function n(e){f(this,n);var r=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));r.getValue$=function(e){var t=e.connect(r._updateComponent),n=t.getValue();return y?t.disconnect():r._subscriptionForRender.push(t.disconnect),n},r._updateComponent=function(){r.forceUpdate()},r._subscriptionForRender=[],r.graph=d;var t=r.render.bind(r);return r.render=function(){var e=r._subscriptionForRender;r._subscriptionForRender=[],a.default.setCurrent(r.getValue$);var n=t();a.default.renderExit();var o=!0,i=!1,u=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)(0,c.value)()}catch(e){i=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw u}}return n},r}return p(n,t.PureComponent),e(n,[{key:"componentDidCatch",value:function(e,r){var t=!0,n=!1,o=void 0;try{for(var i,u=this._subscriptionForRender[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){(0,i.value)()}}catch(e){n=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw o}}this._subscriptionForRender=[]}},{key:"componentWillUnmount",value:function(){var e=!0,r=!1,t=void 0;try{for(var n,o=this._subscriptionForRender[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){(0,n.value)()}}catch(e){r=!0,t=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw t}}this._subscriptionForRender=[]}}]),n}();exports.default=b;
},{"react":32,"./Store/Store":36,"computed-values":40,"./RenderManager":35}],10:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),t=require("react"),n=l(t),a=require("../Graph/GraphPureComponent"),r=s(a);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(t){function a(e){i(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t._onChangeNick=function(e){e.target instanceof HTMLInputElement&&t.setState({nick:e.target.value,errorMessage:null})},t._onChangeTextarea=function(e){e.target instanceof HTMLTextAreaElement&&t.setState({message:e.target.value,errorMessage:null})},t._onSend=function(){var e=t.state,n=e.nick,a=e.message;n.length<1?t.setState({errorMessage:"Type in the nick"}):a.length<1?t.setState({errorMessage:"Type in the message"}):(t.graph.chat.send(n,a),t.setState({message:""}))},t._renderNetworkStatus=function(){return t.graph.chat.online?n.createElement("div",{className:"Chat__online"},"Network Online"):n.createElement("div",{className:"Chat__offline"},"Network Offline")},t._renderListItem=function(e){var a=t.graph.chatMessage.get(e);return null===a?n.createElement("div",{className:"Chat__message",key:e},n.createElement("i",null,"Loading ...")):n.createElement("div",{className:"Chat__message",key:e},n.createElement("div",{className:"Chat__nick"},a.nick,":"),n.createElement("div",null,a.message))},t.state={nick:"",message:"",errorMessage:null},t}return c(a,r.default),e(a,[{key:"render",value:function(){var e=this.state,t=e.nick,a=e.message;return n.createElement("div",{className:"Chat__wrapper"},this._renderNetworkStatus(),n.createElement("div",null,n.createElement("div",{className:"Chat_InputGroup"},n.createElement("div",{className:"Chat_InputLabel"},"Nick:"),n.createElement("div",{className:"Chat_InputBox"},n.createElement("input",{className:"",value:t,onChange:this._onChangeNick}))),n.createElement("div",{className:"Chat_InputGroup"},n.createElement("div",{className:"Chat_InputLabel"},"Message:"),n.createElement("div",{className:"Chat_InputBox"},n.createElement("textarea",{className:"",value:a,onChange:this._onChangeTextarea}))),n.createElement("div",null,n.createElement("button",{onClick:this._onSend},"Send"))),this._renderList(),this.graph.chat.sending?n.createElement("div",{className:"Chat__sending"},"Sending ..."):null)}},{key:"_renderList",value:function(){var e=this.graph.chat.list.concat().reverse();return n.createElement("div",{className:"Chat__list App__border"},e.map(this._renderListItem))}}]),a}();exports.default=u;
},{"react":32,"../Graph/GraphPureComponent":24}],30:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),t=require("computed-values");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function a(){n(this,a),this._data=new Map}return e(a,[{key:"getList",value:function(e){var n=this._data.get(e);if(n)return n.asComputed();var a=new t.Value(null);return this._data.set(e,a),this._sendRequest(e,a),a.asComputed()}},{key:"_sendRequest",value:function(e,t){if(""!==e){var n="https://api.github.com/search/repositories?q="+e;fetch(n,{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return e.items.map(function(e){return e.name+" -> "+e.full_name})}).then(function(e){t.setValue(e)}).catch(function(e){})}else t.setValue([])}}]),a}();exports.default=new a;
},{"computed-values":40}],11:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n=require("react"),r=l(n),i=require("computed-values"),a=require("../BaseComponent"),o=require("./Store"),u=c(o);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function n(){var e,t,a;s(this,n);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return t=a=p(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(c))),a.input=new i.ValueDebounce("",1e3),a.inputHighlight=new i.Value(""),a.direction=new i.Value(!1),a.currentList=a.input.asComputed().switchMap(function(e){return u.default.getList(e)}),a.currentListWithDirection=i.Computed.combine(a.currentList,a.direction.asComputed(),function(e,t){if(!1===t)return e;if(e){var n=e.concat([]);return n.reverse(),n}return e}),a._onChange=function(e){var t=e.target;t instanceof HTMLInputElement&&a.input.setValue(t.value)},a._onChangeHighlight=function(e){var t=e.target;t instanceof HTMLInputElement&&a.inputHighlight.setValue(t.value)},a._onChangeDirection=function(e){var t=e.target;t instanceof HTMLInputElement&&a.direction.setValue(t.checked)},a._renderList=function(){var e=a.getFromComputed(a.currentListWithDirection);return null===e?r.createElement("div",null,"Wczytywanie ..."):r.createElement("div",null,e.map(function(e){return r.createElement(m,{key:e,value:e,highlight:a.inputHighlight.asComputed()})}))},p(a,t)}return h(n,a.BaseComponent),t(n,[{key:"render",value:function(){var e=this.props.className;return r.createElement("div",{className:e},r.createElement("div",{className:"Autocomplete__header"},r.createElement("div",{className:"Autocomplete__header_item"},r.createElement("span",{className:"Autocomplete__header_label"},"Search:"),r.createElement("input",{onChange:this._onChange})),r.createElement("div",{className:"Autocomplete__header_item"},r.createElement("span",{className:"Autocomplete__header_label"},"Highlight:"),r.createElement("input",{onChange:this._onChangeHighlight})),r.createElement("div",{className:"Autocomplete__header_item"},r.createElement("span",{className:"Autocomplete__header_label"},"Display in reverse order:"),r.createElement("input",{type:"checkbox",onChange:this._onChangeDirection}))),this._renderList())}}]),n}(),m=function(n){function o(e){s(this,o);var t=p(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=t.propsComputed.map(function(e){return e.value}).distinctUntilChanged(),r=t.propsComputed.switchMap(function(e){return e.highlight}).distinctUntilChanged();return t.chunks$=i.Computed.combine(n,r,function(e,t){return""===t?[[e],t]:[e.split(t),t]}),t}return h(o,a.BaseComponent),t(o,[{key:"render",value:function(){var t=this.getFromComputed(this.chunks$),n=e(t,2),i=n[0],a=n[1],o=[],u=!0,c=!1,l=void 0;try{for(var s,p=i.entries()[Symbol.iterator]();!(u=(s=p.next()).done);u=!0){var h=e(s.value,2),f=h[0],m=h[1];0!==f&&o.push(r.createElement("div",{key:a+"_"+f,className:"Autocomplite__highlight"},a)),o.push(r.createElement("div",{key:f},m))}}catch(e){c=!0,l=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw l}}return r.createElement("div",{className:"Autocomplite__result_item"},o)}}]),o}();exports.default=f;
},{"react":32,"computed-values":40,"../BaseComponent":6,"./Store":30}],7:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("react"),r=o(t);require("./App.css");var n=require("./BaseComponent");function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(t){function o(){var e,t,r;a(this,o);for(var n=arguments.length,c=Array(n),u=0;u<n;u++)c[u]=arguments[u];return t=r=i(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(c))),r._onClick=function(){var e=r.props,t=e.value;(0,e.onClick)(t)},i(r,t)}return c(o,n.BaseComponent),e(o,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return r.createElement("div",{className:t,onClick:this._onClick},n)}}]),o}();exports.default=u;
},{"react":32,"./App.css":5,"./BaseComponent":6}],13:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("computed-values");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function i(u,n){var s=this;e(this,i),this._value=new t.Value(""),this._isVisit=new t.Value(!1),this.value$=this._value.asComputed(),this.onChange=function(t){s._value.setValue(t.target.value)},this.onBlur=function(){s._isVisit.setValue(!0)};var a=this.value$.map(function(t){return!n(t)});this.error$=t.Computed.combine(a,this._isVisit.asComputed(),function(t,e){return t&&e?u:null}),this.data$=t.Computed.combine(a,this.value$,function(t,e){return t?null:e})};exports.default=i;
},{"computed-values":40}],14:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("computed-values"),r=require("./FormInputState"),e=n(r);function n(t){return t&&t.__esModule?t:{default:t}}function u(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var a=function r(e){u(this,r),this.inputs=e,this.data$=t.Computed.combineArray(this.inputs.map(function(t){return t.state.data$}),function(t){return t}).map(function(t){var r=[],e=!0,n=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if(null===o)return null;r.push(o)}}catch(t){n=!0,u=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw u}}return r})};exports.default=a;
},{"computed-values":40,"./FormInputState":13}],29:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("react"),r=i(t),n=require("../BaseComponent"),o=require("./FormInputState"),u=a(o);function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}require("./FormInput.css");var f=function(t){function o(){return l(this,o),c(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return p(o,n.BaseComponent),e(o,[{key:"render",value:function(){var e=this.props,t=e.input,n=e.caption,o=this.getFromComputed(t.value$),u=this.getFromComputed(t.error$);return r.createElement("div",{className:"FormInput"},r.createElement("div",null,n),r.createElement("div",{className:"FormInput__error"},u),r.createElement("input",{onChange:t.onChange,onBlur:t.onBlur,value:o}))}}]),o}();exports.default=f;
},{"react":32,"../BaseComponent":6,"./FormInputState":13,"./FormInput.css":5}],25:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("react"),r=f(t),n=require("../BaseComponent"),o=require("./FormInput"),u=c(o),i=require("./FormGroupState"),a=c(i);function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(t){function o(){return l(this,o),p(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return s(o,n.BaseComponent),e(o,[{key:"render",value:function(){var e=this.props.state;return r.createElement("div",null,e.inputs.map(function(e){return r.createElement(u.default,{key:e.key,input:e.state,caption:e.label})}))}}]),o}();exports.default=y;
},{"react":32,"../BaseComponent":6,"./FormInput":29,"./FormGroupState":14}],26:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("computed-values");exports.default=function(t,u){var n=e.Computed.combine(t,u,function(e,t){return function(){t(e)}}),r=t.map(function(e){return null!==e});return e.Computed.combine(n,r,function(e,t){return{onSubmit:e,submitEnable:t}})};
},{"computed-values":40}],12:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("react"),r=m(t),n=require("classnames"),o=f(n),u=require("../BaseComponent"),a=require("./FormGroupState"),i=f(a),s=require("./FormGroup"),c=f(s),l=require("./FormSubmit"),p=f(l);function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}require("./FormApp.css");var h=function(t){function n(){var e,t,r;b(this,n);for(var o=arguments.length,u=Array(o),a=0;a<o;a++)u[a]=arguments[a];return t=r=d(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),r.submit$=(0,p.default)(r.propsComputed.switchMap(function(e){return e.state.data$}),r.propsComputed.map(function(e){return e.onSubmit})),d(r,t)}return y(n,u.BaseComponent),e(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.state,u=this.getFromComputed(this.submit$),a=(0,o.default)("FormSubmit",{"FormSubmit--disable":!u.submitEnable});return r.createElement("div",{className:t},r.createElement(c.default,{state:n}),r.createElement("div",{className:a},r.createElement("div",{className:"FormSubmitButton",onClick:u.onSubmit},"send")))}}]),n}();exports.default=h;
},{"react":32,"classnames":39,"../BaseComponent":6,"./FormGroupState":14,"./FormGroup":25,"./FormSubmit":26,"./FormApp.css":5}],15:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=exports.isNumber=function(r){return parseInt(r,10).toString()===r},e=exports.isGrunwald=function(r){return"1410"===r},t=function(e){if(r(e))return!0;var t=e.toLowerCase();return["a","b","c","d","e","f"].includes(t)},n=exports.isHex=function(r){if(0===r.length)return!1;for(var e=r.length-1,n=0;n<=e;n++)if(!1===t(r[n]))return!1;return!0},u=exports.is42=function(r){return"42"===r};exports.default={isNumber:r,isGrunwald:e,isHex:n,is42:u};
},{}],17:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,r){var e=[],n=!0,u=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(t){u=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(u)throw a}}return e}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=require("computed-values"),e=require("../Form/FormGroupState"),n=u(e);function u(t){return t&&t.__esModule?t:{default:t}}function a(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var i=function e(n){var u=this;a(this,e),this.back=function(){var t=u._currentSteep.getValue()-1;t>=0&&u._currentSteep.setValue(t)},this.next=function(){var t=u._maxSteep$.getValueSnapshot(),r=u._currentSteep.getValue()+1;r<=t&&u._currentSteep.setValue(r)};var i=r.Computed.combineArray(n.map(function(t){return t.data$}),function(t){return t}),o=i.map(function(t){var r=[],e=!0,n=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if(null===o)return null;r.push(o)}}catch(t){n=!0,u=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw u}}return r});this._maxSteep$=i.map(function(r){var e=!0,n=!1,u=void 0;try{for(var a,i=r.entries()[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=t(a.value,2),l=o[0];if(null===o[1])return l}}catch(t){n=!0,u=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw u}}return r.length-1}),this._currentSteep=new r.Value(0);var l=this._currentSteep.asComputed(),c=l.map(function(t){return[t+1,3]}),f=l.map(function(t){return n[t]}),s=l.map(function(t){return t>0}),p=r.Computed.combine(l,this._maxSteep$,function(t,r){return t<r});this.data$=o,this.currentSteep$=c,this.currentGroup$=f,this.prevEnable$=s,this.nextEnable$=p};exports.default=i;
},{"computed-values":40,"../Form/FormGroupState":14}],16:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=require("react"),n=b(r),o=require("classnames"),a=m(o),u=require("../BaseComponent"),i=require("../Form/FormGroupState"),l=m(i),c=require("../Form/FormGroup"),s=m(c),f=require("./FormWizzardMainState"),p=m(f);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}require("./FormWizzardMain.css");var v=function(r){function o(){var e,t,r;y(this,o);for(var u=arguments.length,i=Array(u),l=0;l<u;l++)i[l]=arguments[l];return t=r=d(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(i))),r._renderButton=function(e,t,r){var o=(0,a.default)({buttonDisable:!r});return n.createElement("button",{onClick:t,className:o},e)},d(r,t)}return h(o,u.BaseComponent),t(o,[{key:"render",value:function(){var t=this.props,r=t.className,o=t.state,a=this.getFromComputed(o.currentGroup$),u=this.getFromComputed(o.currentSteep$),i=e(u,2),l=i[0],c=i[1],f=this.getFromComputed(o.prevEnable$),p=this.getFromComputed(o.nextEnable$);return n.createElement("div",{className:r},n.createElement(s.default,{state:a}),this._renderButton("Back",o.back,f),this._renderButton("Next",o.next,p),n.createElement("br",null),n.createElement("br",null),n.createElement("div",null,"Steep ",l," / ",c))}}]),o}();exports.default=v;
},{"react":32,"classnames":39,"../BaseComponent":6,"../Form/FormGroupState":14,"../Form/FormGroup":25,"./FormWizzardMainState":17,"./FormWizzardMain.css":5}],4:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),t=require("react"),r=A(t),a=require("classnames"),n=W(a);require("./App.css");var u=require("./MessageItem/MessageItem"),l=W(u),o=require("./Chat/Chat"),i=W(o),f=require("./Chat2/Chat"),m=W(f),d=require("./Autocomplete/Autocomplete"),c=W(d),s=require("computed-values"),b=require("./BaseComponent"),p=require("./Tab"),_=W(p),y=require("./Form/FormApp"),h=W(y),v=require("./Form/FormInputState"),w=W(v),k=require("./Form/FormGroupState"),E=W(k),g=require("./Form/Validators"),S=W(g),z=require("./FormWizzard/FormWizzardMain"),C=W(z),q=require("./FormWizzard/FormWizzardMainState"),F=W(q);function W(e){return e&&e.__esModule?e:{default:e}}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(t){function a(){var e,t,u;x(this,a);for(var o=arguments.length,f=Array(o),d=0;d<o;d++)f[d]=arguments[d];return t=u=M(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(f))),u.formState1=new E.default([{key:"field1",label:"Enter the number 1410",state:new w.default("Wrong value",S.default.isGrunwald)},{key:"field2",label:"Input some number",state:new w.default("Wrong number",S.default.isNumber)},{key:"field3",label:"Enter the hexadecimal value",state:new w.default("Wrong hexadecimal value",S.default.isHex)}]),u.formState2=new E.default([{key:"field1",label:"Enter the number 1410",state:new w.default("Wrong value",S.default.isGrunwald)},{key:"field2",label:"Input some number",state:new w.default("Enter the number",S.default.isNumber)},{key:"field3",label:"Enter the hexadecimal value",state:new w.default("Wrong hexadecimal value",S.default.isHex)},{key:"field4",label:"Enter the hexadecimal value",state:new w.default("Wrong hexadecimal value",S.default.isHex)},{key:"field5",label:"Enter the number 42",state:new w.default("Wrong value",S.default.is42)}]),u._onSubmit1=function(e){},u._onSubmit2=function(e){},u.formState3=new E.default([{key:"field1",label:"Enter the number 1410",state:new w.default("Wrong value",S.default.isGrunwald)}]),u.formWizzardState=new F.default([u.formState1,u.formState2,u.formState3]),u.tab=new s.Value("formWizzard"),u.tab$=u.tab.asComputed(),u._config=[{key:"formWizzard",label:"Form wizzard",render:function(){return r.createElement(C.default,{className:"App__border",state:u.formWizzardState})}},{key:"chat",label:"Chat",render:function(){return r.createElement(i.default,{className:"App__border"})}},{key:"chat2",label:"Chat2",render:function(){return r.createElement(m.default,{className:"App__border"})}},{key:"autocomplete",label:"Autocomplete",render:function(){return r.createElement(c.default,{className:"App__border"})}},{key:"podstawowy",label:"Simple timer",render:function(){return r.createElement(l.default,{messageId:"someIdExample",className:"App__border"})}},{key:"form1",label:"Form 1",render:function(){return r.createElement(h.default,{className:"App__border",state:u.formState1,onSubmit:u._onSubmit1})}},{key:"form2",label:"Form 2",render:function(){return r.createElement(h.default,{className:"App__border",state:u.formState2,onSubmit:u._onSubmit2})}}],u._getTabClass=function(e){var t=u.getFromComputed(u.tab$);return(0,n.default)("Menu__item",{"Menu__item--select":t===e})},u._tabClick=function(e){u.tab.setValue(e)},u._renderMenu=function(){return r.createElement("div",{className:"Menu"},u._config.map(function(e){return r.createElement(_.default,{key:e.key,className:u._getTabClass(e.key),value:e.key,onClick:u._tabClick},e.label)}))},u._renderBody=function(e){return r.createElement("div",null,u._config.map(function(t){if(t.key===e){var a=t.render;return r.createElement(a,{key:t.key})}return null}))},M(u,t)}return N(a,b.BaseComponent),e(a,[{key:"render",value:function(){var e=this.getFromComputed(this.tab$);return r.createElement("div",{className:"App"},this._renderMenu(),this._renderBody(e))}}]),a}();exports.default=O;
},{"react":32,"classnames":39,"./App.css":5,"./MessageItem/MessageItem":8,"./Chat/Chat":9,"./Chat2/Chat":10,"./Autocomplete/Autocomplete":11,"computed-values":40,"./BaseComponent":6,"./Tab":7,"./Form/FormApp":12,"./Form/FormInputState":13,"./Form/FormGroupState":14,"./Form/Validators":15,"./FormWizzard/FormWizzardMain":16,"./FormWizzard/FormWizzardMainState":17}],3:[function(require,module,exports) {
"use strict";var e=require("react"),r=a(e),t=require("react-dom"),u=a(t),d=require("./App"),l=a(d);function a(e){return e&&e.__esModule?e:{default:e}}u.default.render(r.default.createElement(l.default,null),document.getElementById("root"));
},{"react":32,"react-dom":33,"./App":4}]},{},[3])